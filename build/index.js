(()=>{"use strict";var e,a={929:(e,a,t)=>{const i=window.React,l=window.wp.blocks,r=window.wp.blockEditor,n=window.wp.components,o=window.wp.i18n,s=window.wp.serverSideRender;var c=t.n(s);(0,l.registerBlockType)("vas-dinamico/form-block",{edit:({attributes:e,setAttributes:a})=>{const{formId:t,showTitle:l}=e,s=(0,r.useBlockProps)();return(0,i.createElement)("div",{...s},(0,i.createElement)(r.InspectorControls,null,(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Form Settings","vas-dinamico-forms")},(0,i.createElement)(n.TextControl,{label:(0,o.__)("Form ID","vas-dinamico-forms"),value:t,onChange:e=>a({formId:e}),help:(0,o.__)("Enter the unique identifier for the form","vas-dinamico-forms")}),(0,i.createElement)(n.ToggleControl,{label:(0,o.__)("Show Title","vas-dinamico-forms"),checked:l,onChange:e=>a({showTitle:e})}))),t?(0,i.createElement)(c(),{block:"vas-dinamico/form-block",attributes:e}):(0,i.createElement)("div",{className:"vas-dinamico-form-placeholder"},(0,i.createElement)("div",{className:"components-placeholder"},(0,i.createElement)("div",{className:"components-placeholder__label"},(0,o.__)("VAS Dinámico Form","vas-dinamico-forms")),(0,i.createElement)("div",{className:"components-placeholder__instructions"},(0,o.__)("Please enter a Form ID in the block settings.","vas-dinamico-forms")))))},save:()=>null});const m=window.wp.element,d={colors:{primary:"#005a87",primaryHover:"#003d5b",secondary:"#e3f2fd",background:"#ffffff",backgroundSubtle:"#f8f9fa",text:"#2c3e50",textMuted:"#64748b",inputBg:"#ffffff",inputText:"#2c3e50",inputBorder:"#e2e8f0",inputBorderFocus:"#005a87",buttonBg:"#005a87",buttonText:"#ffffff",buttonHoverBg:"#003d5b",error:"#ff6b6b",success:"#28a745",warning:"#ffc107",border:"#e2e8f0",borderDark:"#cbd5e0"},typography:{fontFamilyHeading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontFamilyBody:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontSizeBase:"16px",fontSizeH1:"2rem",fontSizeH2:"1.75rem",fontSizeH3:"1.5rem",fontSizeSmall:"0.875rem",fontWeightNormal:"400",fontWeightMedium:"500",fontWeightBold:"700",lineHeightBase:"1.6",lineHeightHeading:"1.3"},spacing:{xs:"0.5rem",sm:"1rem",md:"1.5rem",lg:"2rem",xl:"2.5rem",containerPadding:"2.5rem",fieldGap:"1.5rem",sectionGap:"2rem"},borders:{radiusSm:"8px",radiusMd:"12px",radiusLg:"20px",width:"1px",widthFocus:"2px",style:"solid"},shadows:{sm:"0 2px 8px rgba(0, 90, 135, 0.08)",md:"0 4px 12px rgba(0, 90, 135, 0.1)",lg:"0 8px 25px rgba(0, 90, 135, 0.1)",focus:"0 0 0 3px rgba(0, 90, 135, 0.1)"},interactivity:{transitionDuration:"0.2s",transitionTiming:"ease",hoverScale:"1.02",focusOutlineWidth:"2px",focusOutlineOffset:"2px"}};function p(e){if(e.styleConfig&&"object"==typeof e.styleConfig)return e.styleConfig;const a=JSON.parse(JSON.stringify(d));return e.backgroundColor&&(a.colors.background=e.backgroundColor),e.textColor&&(a.colors.text=e.textColor),e.primaryColor&&(a.colors.primary=e.primaryColor,a.colors.buttonBg=e.primaryColor),e.inputBgColor&&(a.colors.inputBg=e.inputBgColor),e.inputTextColor&&(a.colors.inputText=e.inputTextColor),e.buttonBgColor&&(a.colors.buttonBg=e.buttonBgColor),e.buttonTextColor&&(a.colors.buttonText=e.buttonTextColor),void 0!==e.borderRadius&&(a.borders.radiusMd=`${e.borderRadius}px`),void 0!==e.padding&&(a.spacing.containerPadding=`${e.padding}px`),a}function u(e){const a=e||d;return{"--eipsi-color-primary":a.colors.primary,"--eipsi-color-primary-hover":a.colors.primaryHover,"--eipsi-color-secondary":a.colors.secondary,"--eipsi-color-background":a.colors.background,"--eipsi-color-background-subtle":a.colors.backgroundSubtle,"--eipsi-color-text":a.colors.text,"--eipsi-color-text-muted":a.colors.textMuted,"--eipsi-color-input-bg":a.colors.inputBg,"--eipsi-color-input-text":a.colors.inputText,"--eipsi-color-input-border":a.colors.inputBorder,"--eipsi-color-input-border-focus":a.colors.inputBorderFocus,"--eipsi-color-button-bg":a.colors.buttonBg,"--eipsi-color-button-text":a.colors.buttonText,"--eipsi-color-button-hover-bg":a.colors.buttonHoverBg,"--eipsi-color-error":a.colors.error,"--eipsi-color-success":a.colors.success,"--eipsi-color-warning":a.colors.warning,"--eipsi-color-border":a.colors.border,"--eipsi-color-border-dark":a.colors.borderDark,"--eipsi-font-family-heading":a.typography.fontFamilyHeading,"--eipsi-font-family-body":a.typography.fontFamilyBody,"--eipsi-font-size-base":a.typography.fontSizeBase,"--eipsi-font-size-h1":a.typography.fontSizeH1,"--eipsi-font-size-h2":a.typography.fontSizeH2,"--eipsi-font-size-h3":a.typography.fontSizeH3,"--eipsi-font-size-small":a.typography.fontSizeSmall,"--eipsi-font-weight-normal":a.typography.fontWeightNormal,"--eipsi-font-weight-medium":a.typography.fontWeightMedium,"--eipsi-font-weight-bold":a.typography.fontWeightBold,"--eipsi-line-height-base":a.typography.lineHeightBase,"--eipsi-line-height-heading":a.typography.lineHeightHeading,"--eipsi-spacing-xs":a.spacing.xs,"--eipsi-spacing-sm":a.spacing.sm,"--eipsi-spacing-md":a.spacing.md,"--eipsi-spacing-lg":a.spacing.lg,"--eipsi-spacing-xl":a.spacing.xl,"--eipsi-spacing-container-padding":a.spacing.containerPadding,"--eipsi-spacing-field-gap":a.spacing.fieldGap,"--eipsi-spacing-section-gap":a.spacing.sectionGap,"--eipsi-border-radius-sm":a.borders.radiusSm,"--eipsi-border-radius-md":a.borders.radiusMd,"--eipsi-border-radius-lg":a.borders.radiusLg,"--eipsi-border-width":a.borders.width,"--eipsi-border-width-focus":a.borders.widthFocus,"--eipsi-border-style":a.borders.style,"--eipsi-shadow-sm":a.shadows.sm,"--eipsi-shadow-md":a.shadows.md,"--eipsi-shadow-lg":a.shadows.lg,"--eipsi-shadow-focus":a.shadows.focus,"--eipsi-transition-duration":a.interactivity.transitionDuration,"--eipsi-transition-timing":a.interactivity.transitionTiming,"--eipsi-hover-scale":a.interactivity.hoverScale,"--eipsi-focus-outline-width":a.interactivity.focusOutlineWidth,"--eipsi-focus-outline-offset":a.interactivity.focusOutlineOffset}}(0,l.registerBlockType)("vas-dinamico/form-container",{edit:function({attributes:e,setAttributes:a}){const{formId:t,submitButtonLabel:l,description:s,styleConfig:c}=e;(0,m.useEffect)(()=>{if(!c){const t=p(e);a({styleConfig:t})}},[]);const d=c||p(e),f=u(d),g=function(e){return Object.entries(e).map(([e,a])=>`${e}: ${a}`).join("; ")}(f),v=(0,r.useBlockProps)({className:"eipsi-form-container-editor"}),b=(0,r.useInnerBlocksProps)({className:"eipsi-form-inner-blocks"},{allowedBlocks:["vas-dinamico/form-page","vas-dinamico/campo-texto","vas-dinamico/campo-textarea","vas-dinamico/campo-descripcion","vas-dinamico/campo-select","vas-dinamico/campo-radio","vas-dinamico/campo-multiple","vas-dinamico/campo-likert","vas-dinamico/vas-slider"],templateLock:!1,renderAppender:r.InnerBlocks.ButtonBlockAppender}),h=(e,t)=>{const i={...d,colors:{...d.colors,[e]:t}};a({styleConfig:i})};return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(r.InspectorControls,null,(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Form Settings","vas-dinamico-forms"),initialOpen:!0},(0,i.createElement)(n.TextControl,{label:(0,o.__)("Form ID/Slug","vas-dinamico-forms"),value:t,onChange:e=>a({formId:e}),help:(0,o.__)("Enter a unique identifier for the form (e.g., contact-form)","vas-dinamico-forms")}),(0,i.createElement)(n.TextControl,{label:(0,o.__)("Submit Button Label","vas-dinamico-forms"),value:l,onChange:e=>a({submitButtonLabel:e})}),(0,i.createElement)(n.TextareaControl,{label:(0,o.__)("Description (Optional)","vas-dinamico-forms"),value:s,onChange:e=>a({description:e}),help:(0,o.__)("Optional description text shown above the form","vas-dinamico-forms")})),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Style Customization","vas-dinamico-forms"),initialOpen:!1},(0,i.createElement)("p",{style:{fontSize:"0.9em",color:"#666",marginTop:0}},(0,o.__)("Customize form appearance using design tokens. Changes apply to all form elements.","vas-dinamico-forms")),(0,i.createElement)("div",{style:{marginBottom:"1.5em"}},(0,i.createElement)("h4",{style:{fontSize:"0.95em",marginBottom:"0.5em"}},(0,o.__)("Colors","vas-dinamico-forms")),(0,i.createElement)("div",{style:{marginBottom:"1em"}},(0,i.createElement)("label",{htmlFor:"primary-color"},(0,o.__)("Primary Color","vas-dinamico-forms")),(0,i.createElement)(n.ColorPalette,{id:"primary-color",colors:[{name:"EIPSI Blue",color:"#005a87"},{name:"Default Blue",color:"#0073aa"},{name:"Navy",color:"#003d5b"}],value:d.colors.primary,onChange:e=>h("primary",e)})),(0,i.createElement)("div",{style:{marginBottom:"1em"}},(0,i.createElement)("label",{htmlFor:"background-color"},(0,o.__)("Background Color","vas-dinamico-forms")),(0,i.createElement)(n.ColorPalette,{id:"background-color",colors:[{name:"White",color:"#ffffff"},{name:"Light Gray",color:"#f8f9fa"},{name:"Dark",color:"#23210f"}],value:d.colors.background,onChange:e=>h("background",e)})),(0,i.createElement)("div",{style:{marginBottom:"1em"}},(0,i.createElement)("label",{htmlFor:"text-color"},(0,o.__)("Text Color","vas-dinamico-forms")),(0,i.createElement)(n.ColorPalette,{id:"text-color",colors:[{name:"Dark",color:"#2c3e50"},{name:"Black",color:"#1d2327"},{name:"White",color:"#ffffff"}],value:d.colors.text,onChange:e=>h("text",e)}))),(0,i.createElement)("div",{style:{marginBottom:"1.5em"}},(0,i.createElement)("h4",{style:{fontSize:"0.95em",marginBottom:"0.5em"}},(0,o.__)("Spacing & Layout","vas-dinamico-forms")),(0,i.createElement)(n.RangeControl,{label:(0,o.__)("Container Padding","vas-dinamico-forms"),value:parseInt(d.spacing.containerPadding),onChange:e=>((e,t)=>{const i={...d,spacing:{...d.spacing,[e]:`${t}px`}};a({styleConfig:i})})("containerPadding",e),min:0,max:80,step:4}),(0,i.createElement)(n.RangeControl,{label:(0,o.__)("Border Radius","vas-dinamico-forms"),value:parseInt(d.borders.radiusMd),onChange:e=>((e,t)=>{const i={...d,borders:{...d.borders,[e]:`${t}px`}};a({styleConfig:i})})("radiusMd",e),min:0,max:40,step:2})))),(0,i.createElement)("div",{...v,style:{"--eipsi-editor-style":g}},(0,i.createElement)("div",{className:"eipsi-form-container-preview",style:f},!t&&(0,i.createElement)("div",{className:"eipsi-form-placeholder"},(0,i.createElement)("div",{className:"components-placeholder"},(0,i.createElement)("div",{className:"components-placeholder__label"},(0,o.__)("EIPSI Form Container","vas-dinamico-forms")),(0,i.createElement)("div",{className:"components-placeholder__instructions"},(0,o.__)("Please enter a Form ID in the block settings to get started.","vas-dinamico-forms")))),t&&(0,i.createElement)("div",{className:"eipsi-form-preview-wrapper"},(0,i.createElement)("div",{className:"form-header"},(0,i.createElement)("h3",{className:"form-title"},t.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")),s&&(0,i.createElement)("p",{className:"form-description"},s)),(0,i.createElement)("div",{...b}),(0,i.createElement)("div",{className:"form-footer"},(0,i.createElement)("button",{type:"button",className:"eipsi-submit-button",disabled:!0},l||(0,o.__)("Submit","vas-dinamico-forms")))))))},save:function({attributes:e}){const{formId:a,submitButtonLabel:t,description:l,className:n,styleConfig:o}=e,s=u(o||p(e)),c=r.useBlockProps.save({className:"vas-dinamico-form eipsi-form "+(n||""),style:s}),m=r.useInnerBlocksProps.save({className:"eipsi-form eipsi-form-content"});return(0,i.createElement)("div",{...c},l&&(0,i.createElement)("div",{className:"form-description"},(0,i.createElement)("p",null,l)),(0,i.createElement)("form",{className:"vas-form eipsi-form-element","data-form-id":a},(0,i.createElement)("input",{type:"hidden",name:"form_id",value:a}),(0,i.createElement)("input",{type:"hidden",name:"form_action",value:"vas_dinamico_submit_form"}),(0,i.createElement)("input",{type:"hidden",name:"eipsi_nonce",value:""}),(0,i.createElement)("input",{type:"hidden",className:"eipsi-device-placeholder",name:"device"}),(0,i.createElement)("input",{type:"hidden",className:"eipsi-browser-placeholder",name:"browser"}),(0,i.createElement)("input",{type:"hidden",className:"eipsi-os-placeholder",name:"os"}),(0,i.createElement)("input",{type:"hidden",className:"eipsi-screen-placeholder",name:"screen_width"}),(0,i.createElement)("input",{type:"hidden",className:"eipsi-start-time",name:"start_time"}),(0,i.createElement)("input",{type:"hidden",className:"eipsi-current-page",name:"current_page",value:"1"}),(0,i.createElement)("div",{...m}),(0,i.createElement)("div",{className:"form-navigation"},(0,i.createElement)("button",{type:"button",className:"eipsi-prev-button",style:{display:"none"},"data-testid":"prev-button"},"Anterior"),(0,i.createElement)("button",{type:"button",className:"eipsi-next-button","data-testid":"next-button"},"Siguiente"),(0,i.createElement)("button",{type:"submit",className:"eipsi-submit-button",style:{display:"none"},"data-testid":"submit-button"},t||"Enviar")),(0,i.createElement)("div",{className:"form-progress"},"Página ",(0,i.createElement)("span",{className:"current-page"},"1")," de"," ",(0,i.createElement)("span",{className:"total-pages"},"?"))))}});const f=window.wp.data;(0,l.registerBlockType)("vas-dinamico/form-page",{edit:function({attributes:e,setAttributes:a,clientId:t}){const{title:l,pageIndex:s}=e,c=(0,f.useSelect)(e=>{const{getBlockRootClientId:a,getBlockOrder:i,getBlock:l}=e("core/block-editor"),r=a(t),n=((r?i(r):i())||[]).filter(e=>{const a=l(e);return"vas-dinamico/form-page"===a?.name}).indexOf(t);return-1===n?null:n+1},[t]);(0,m.useEffect)(()=>{c&&c!==s&&a({pageIndex:c})},[c,s,a]);const d=c||s||1,p=(0,r.useBlockProps)({className:"eipsi-page-editor"}),u=(0,r.useInnerBlocksProps)({className:"eipsi-page-content-editor"},{allowedBlocks:["core/paragraph","core/heading","core/html","core/spacer","core/separator","core/group","core/columns","core/column","core/list","core/list-item","core/image","core/buttons","core/button","vas-dinamico/campo-texto","vas-dinamico/campo-textarea","vas-dinamico/campo-descripcion","vas-dinamico/campo-select","vas-dinamico/campo-radio","vas-dinamico/campo-multiple","vas-dinamico/campo-likert","vas-dinamico/vas-slider"],templateLock:!1,renderAppender:void 0});return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(r.InspectorControls,null,(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Page Settings","vas-dinamico-forms")},(0,i.createElement)(n.TextControl,{label:(0,o.__)("Page Title (Optional)","vas-dinamico-forms"),value:l,onChange:e=>a({title:e}),help:(0,o.__)("Enter an optional title for this page (e.g., Personal Information)","vas-dinamico-forms")}),(0,i.createElement)(n.TextControl,{label:(0,o.__)("Page Number","vas-dinamico-forms"),type:"number",value:d,help:(0,o.__)("This page number updates automatically based on block order.","vas-dinamico-forms"),disabled:!0}))),(0,i.createElement)("div",{...p},(0,i.createElement)("div",{className:"eipsi-page-preview"},(0,i.createElement)("div",{className:"page-header"},(0,i.createElement)("span",{className:"page-badge"},(0,o.__)("Page","vas-dinamico-forms")," ",d),l&&(0,i.createElement)("h3",{className:"eipsi-page-title"},l),!l&&(0,i.createElement)("p",{className:"page-placeholder-text"},(0,o.__)("Add a page title in the block settings (optional)","vas-dinamico-forms"))),(0,i.createElement)("div",{...u}))))},save:function({attributes:e}){const{title:a,pageIndex:t,className:l}=e,n=r.useBlockProps.save({className:`eipsi-page ${l||""}`.trim(),"data-page":t,style:{display:1===t?void 0:"none"}}),o=r.useInnerBlocksProps.save({className:"eipsi-page-content"});return(0,i.createElement)("div",{...n},a&&(0,i.createElement)("h3",{className:"eipsi-page-title"},a),(0,i.createElement)("div",{...o}))}});const g=({attributes:e,setAttributes:a,showPlaceholder:t=!0})=>{const{fieldName:l,label:r,required:s,placeholder:c,helperText:m}=e;return(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Field Settings","vas-dinamico-forms"),initialOpen:!0},(0,i.createElement)(n.TextControl,{label:(0,o.__)("Field Name / Slug","vas-dinamico-forms"),value:l||"",onChange:e=>a({fieldName:e}),help:(0,o.__)("Used as the input name attribute (e.g., full_name)","vas-dinamico-forms")}),(0,i.createElement)(n.TextControl,{label:(0,o.__)("Label","vas-dinamico-forms"),value:r||"",onChange:e=>a({label:e})}),(0,i.createElement)(n.ToggleControl,{label:(0,o.__)("Required field","vas-dinamico-forms"),checked:!!s,onChange:e=>a({required:!!e})}),t&&(0,i.createElement)(n.TextControl,{label:(0,o.__)("Placeholder","vas-dinamico-forms"),value:c||"",onChange:e=>a({placeholder:e})}),(0,i.createElement)(n.TextareaControl,{label:(0,o.__)("Helper text","vas-dinamico-forms"),value:m||"",onChange:e=>a({helperText:e}),help:(0,o.__)("Displayed below the field to provide additional guidance.","vas-dinamico-forms")}))},v=[{label:(0,o.__)("Text","vas-dinamico-forms"),value:"text"},{label:(0,o.__)("Email","vas-dinamico-forms"),value:"email"},{label:(0,o.__)("Number","vas-dinamico-forms"),value:"number"},{label:(0,o.__)("Telephone","vas-dinamico-forms"),value:"tel"},{label:(0,o.__)("URL","vas-dinamico-forms"),value:"url"},{label:(0,o.__)("Date","vas-dinamico-forms"),value:"date"}];(0,l.registerBlockType)("vas-dinamico/campo-texto",{edit:function({attributes:e,setAttributes:a}){const{fieldName:t,label:l,required:s,placeholder:c,helperText:m,fieldType:d}=e,p=t&&""!==t.trim()?t.trim():void 0,u=(0,r.useBlockProps)({className:"form-group eipsi-field eipsi-text-field","data-field-name":p,"data-required":s?"true":"false","data-field-type":d||"text"}),f=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(p),b=l&&""!==l.trim()?l:(0,o.__)("Campo de texto","vas-dinamico-forms");return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(r.InspectorControls,null,(0,i.createElement)(g,{attributes:e,setAttributes:a}),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Text Field Options","vas-dinamico-forms"),initialOpen:!1},(0,i.createElement)(n.SelectControl,{label:(0,o.__)("Input type","vas-dinamico-forms"),value:d,options:v,onChange:e=>a({fieldType:e})}))),(0,i.createElement)("div",{...u},(0,i.createElement)("label",{className:s?"required":void 0,htmlFor:f},b),(0,i.createElement)("input",{type:d||"text",name:p,id:f,placeholder:c||"",required:s,"data-required":s?"true":"false","data-field-type":d||"text",disabled:!0}),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(m),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldName:a,label:t,required:l,placeholder:n,helperText:o,fieldType:s}=e,c=a&&""!==a.trim()?a.trim():void 0,m=r.useBlockProps.save({className:"form-group eipsi-field eipsi-text-field","data-field-name":c,"data-required":l?"true":"false","data-field-type":s||"text"}),d=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(c),p=s||"text";return(0,i.createElement)("div",{...m},t&&(0,i.createElement)("label",{className:l?"required":void 0,htmlFor:d},t),(0,i.createElement)("input",{type:p,name:c,id:d,placeholder:n||"",required:l,"data-required":l?"true":"false","data-field-type":p}),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(o),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"}))}}),(0,l.registerBlockType)("vas-dinamico/campo-textarea",{edit:function({attributes:e,setAttributes:a}){const{fieldName:t,label:l,required:s,placeholder:c,helperText:m,rows:d}=e,p=t&&""!==t.trim()?t.trim():void 0,u=(0,r.useBlockProps)({className:"form-group eipsi-field eipsi-textarea-field","data-field-name":p,"data-required":s?"true":"false","data-field-type":"textarea"}),f=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(p),v=l||(0,o.__)("Campo textarea","vas-dinamico-forms"),b=Number(d)||4;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(r.InspectorControls,null,(0,i.createElement)(g,{attributes:e,setAttributes:a}),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Textarea Options","vas-dinamico-forms"),initialOpen:!1},(0,i.createElement)(n.RangeControl,{label:(0,o.__)("Rows","vas-dinamico-forms"),value:b,onChange:e=>a({rows:Number(e)||4}),min:2,max:12}))),(0,i.createElement)("div",{...u},(0,i.createElement)("label",{className:s?"required":void 0,htmlFor:f},v),(0,i.createElement)("textarea",{name:p,id:f,placeholder:c||"",required:s,rows:b,"data-required":s?"true":"false","data-field-type":"textarea",disabled:!0}),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(m),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldName:a,label:t,required:l,placeholder:n,helperText:o,rows:s}=e,c=a&&""!==a.trim()?a.trim():void 0,m=r.useBlockProps.save({className:"form-group eipsi-field eipsi-textarea-field","data-field-name":c,"data-required":l?"true":"false","data-field-type":"textarea"}),d=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(c),p=Number(s)||4;return(0,i.createElement)("div",{...m},t&&(0,i.createElement)("label",{className:l?"required":void 0,htmlFor:d},t),(0,i.createElement)("textarea",{name:c,id:d,placeholder:n||"",required:l,rows:p,"data-required":l?"true":"false","data-field-type":"textarea"}),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(o),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"}))}}),(0,l.registerBlockType)("vas-dinamico/campo-descripcion",{edit:function({attributes:e,setAttributes:a}){const{fieldName:t,label:l,required:n,placeholder:s,helperText:c}=e,m=t&&""!==t.trim()?t.trim():void 0,d=(0,r.useBlockProps)({className:"form-group eipsi-field eipsi-description-field","data-field-name":m,"data-required":n?"true":"false","data-field-type":"description"}),p=l||(0,o.__)("Campo descripción","vas-dinamico-forms");return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(r.InspectorControls,null,(0,i.createElement)(g,{attributes:e,setAttributes:a})),(0,i.createElement)("div",{...d},p&&(0,i.createElement)("label",{className:n?"required":void 0},p),s&&(0,i.createElement)("p",{className:"description-placeholder"},s),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(c),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldName:a,label:t,required:l,placeholder:n,helperText:o}=e,s=a&&""!==a.trim()?a.trim():void 0,c=r.useBlockProps.save({className:"form-group eipsi-field eipsi-description-field","data-field-name":s,"data-required":l?"true":"false","data-field-type":"description"});return(0,i.createElement)("div",{...c},t&&(0,i.createElement)("label",{className:l?"required":void 0},t),n&&(0,i.createElement)("p",{className:"description-placeholder"},n),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(o),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"}))}});const b=({attributes:e,setAttributes:a,options:t=[],clientId:l})=>{const{conditionalLogic:r}=e,[s,c]=(0,m.useState)({}),d=function(e){return e?Array.isArray(e)?{enabled:!0,rules:e.map((e,a)=>({id:e.id||`rule-legacy-${a}`,matchValue:e.value||e.matchValue||"",action:e.action||"goToPage",targetPage:e.targetPage||null})),defaultAction:"nextPage"}:"object"==typeof e?{enabled:!1!==e.enabled,rules:(e.rules||[]).map((e,a)=>({id:e.id||`rule-${a}`,matchValue:e.value||e.matchValue||"",action:e.action||"goToPage",targetPage:e.targetPage||null})),defaultAction:e.defaultAction||"nextPage",defaultTargetPage:e.defaultTargetPage||null}:{enabled:!1,rules:[],defaultAction:"nextPage"}:{enabled:!1,rules:[],defaultAction:"nextPage"}}(r),{pages:p,hasPages:u}=(0,f.useSelect)(e=>{const{getSelectedBlock:a,getBlockParentsByBlockName:t,getBlock:i}=e("core/block-editor");try{const e=l?i(l):a();if(!e)return{pages:[],hasPages:!1};const r=t(e.clientId,"vas-dinamico/form-container");if(0===r.length)return{pages:[],hasPages:!1};const n=i(r[r.length-1]);if(!n||!n.innerBlocks)return{pages:[],hasPages:!1};const o=n.innerBlocks.filter(e=>"vas-dinamico/form-page"===e.name).map((e,a)=>({index:a+1,title:e.attributes.title||"",clientId:e.clientId}));return{pages:o,hasPages:o.length>0}}catch(e){return{pages:[],hasPages:!1}}},[l]);(0,m.useEffect)(()=>{d.enabled&&d.rules.length>0&&g(d.rules)},[d.enabled,d.rules,t,p]);const g=e=>{const a={},t=new Set;e.forEach((e,i)=>{t.has(e.matchValue)?a[i]=(0,o.__)("Este valor ya está siendo usado en otra regla","vas-dinamico-forms"):e.matchValue&&t.add(e.matchValue),e.matchValue||(a[i]=(0,o.__)("Selecciona un valor para esta regla","vas-dinamico-forms")),"goToPage"===e.action&&(!e.targetPage||e.targetPage<1)&&(a[i]=(0,o.__)("Selecciona una página válida","vas-dinamico-forms"))}),c(a)},v=(e,t,i)=>{const l=[...d.rules];l[e]={...l[e],[t]:i},a({conditionalLogic:{...d,rules:l}})},b=(e,t=null)=>{const i={...d,defaultAction:e};"goToPage"===e&&t?i.defaultTargetPage=parseInt(t):delete i.defaultTargetPage,a({conditionalLogic:i})},h=()=>{const e=[];return 0===p.length?[{label:(0,o.__)("No hay páginas disponibles","vas-dinamico-forms"),value:"",disabled:!0}]:(p.forEach(a=>{const t=a.title?`${(0,o.__)("Página","vas-dinamico-forms")} ${a.index} – ${a.title}`:`${(0,o.__)("Página","vas-dinamico-forms")} ${a.index}`;e.push({label:t,value:a.index.toString()})}),e)},E=()=>{const e=[{label:(0,o.__)("Siguiente página","vas-dinamico-forms"),value:"nextPage"},{label:(0,o.__)("Finalizar formulario","vas-dinamico-forms"),value:"submit"}];return p.length>0&&e.splice(1,0,{label:(0,o.__)("Ir a página específica…","vas-dinamico-forms"),value:"goToPage"}),e},_=t.length>0&&u;return(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Lógica Condicional","vas-dinamico-forms"),initialOpen:!1},(0,i.createElement)("div",{className:"conditional-logic-toggle-wrapper"},(0,i.createElement)(n.ToggleControl,{label:(0,o.__)("Habilitar lógica condicional","vas-dinamico-forms"),checked:d.enabled||!1,onChange:e=>{e?a({conditionalLogic:{enabled:!0,rules:[],defaultAction:"nextPage"}}):(a({conditionalLogic:null}),c({}))},help:(0,o.__)("Permite configurar el comportamiento del formulario según las respuestas del participante.","vas-dinamico-forms")})),d.enabled&&(0,i.createElement)("div",{className:"conditional-logic-panel"},!u&&(0,i.createElement)("div",{className:"conditional-logic-warning"},(0,i.createElement)("p",null,(0,o.__)("Para configurar la lógica condicional, primero debes agregar páginas al formulario.","vas-dinamico-forms"))),0===t.length&&(0,i.createElement)("div",{className:"conditional-logic-warning"},(0,i.createElement)("p",null,(0,o.__)("Para configurar la lógica condicional, primero debes agregar opciones a este campo.","vas-dinamico-forms"))),_&&0===d.rules.length&&(0,i.createElement)("div",{className:"conditional-logic-empty-state"},(0,i.createElement)(n.Dashicon,{icon:"randomize"}),(0,i.createElement)("p",null,(0,o.__)("No hay reglas configuradas. Las reglas permiten redirigir al participante a diferentes páginas según su respuesta.","vas-dinamico-forms"))),d.rules.map((e,l)=>(0,i.createElement)("div",{key:e.id||l,className:"conditional-logic-rule"},(0,i.createElement)("div",{className:"conditional-logic-rule-header"},(0,i.createElement)("h4",null,(0,o.__)("Regla","vas-dinamico-forms")," ",l+1)),(0,i.createElement)(n.SelectControl,{label:(0,o.__)("Cuando el participante seleccione","vas-dinamico-forms"),value:e.matchValue||"",options:0===t.length?[{label:(0,o.__)("No hay opciones disponibles","vas-dinamico-forms"),value:"",disabled:!0}]:[{label:(0,o.__)("Selecciona un valor…","vas-dinamico-forms"),value:""},...t.map(e=>({label:e,value:e}))],onChange:e=>v(l,"matchValue",e)}),(0,i.createElement)(n.SelectControl,{label:(0,o.__)("Entonces","vas-dinamico-forms"),value:"goToPage"===e.action?"goToPage":e.action,options:E(),onChange:e=>{"nextPage"===e?(v(l,"action","nextPage"),v(l,"targetPage",null)):"submit"===e?(v(l,"action","submit"),v(l,"targetPage",null)):"goToPage"===e&&(v(l,"action","goToPage"),v(l,"targetPage",p[0]?.index||1))}}),"goToPage"===e.action&&(0,i.createElement)(n.SelectControl,{label:(0,o.__)("Ir a la página","vas-dinamico-forms"),value:e.targetPage?e.targetPage.toString():"",options:h(),onChange:e=>v(l,"targetPage",parseInt(e))}),s[l]&&(0,i.createElement)("div",{className:"conditional-logic-validation-error"},(0,i.createElement)(n.Dashicon,{icon:"warning"}),(0,i.createElement)("span",null,s[l])),(0,i.createElement)("div",{className:"conditional-logic-rule-actions"},(0,i.createElement)(n.Button,{isDestructive:!0,isSmall:!0,onClick:()=>(e=>{const t=d.rules.filter((a,t)=>t!==e);0===t.length?(a({conditionalLogic:null}),c({})):a({conditionalLogic:{...d,rules:t}})})(l)},(0,o.__)("Eliminar regla","vas-dinamico-forms"))))),_&&d.rules.length>0&&(0,i.createElement)("div",{className:"conditional-logic-default-action"},(0,i.createElement)("h4",null,(0,o.__)("Acción predeterminada","vas-dinamico-forms")),(0,i.createElement)("p",{style:{fontSize:"12px",color:"#64748b",marginBottom:"12px"}},(0,o.__)("Define qué sucede cuando el participante selecciona un valor sin regla configurada.","vas-dinamico-forms")),(0,i.createElement)(n.SelectControl,{label:(0,o.__)("Para otros valores","vas-dinamico-forms"),value:"goToPage"===d.defaultAction?"goToPage":d.defaultAction||"nextPage",options:E(),onChange:e=>{"goToPage"===e?b(e,p[0]?.index||1):b(e)}}),"goToPage"===d.defaultAction&&(0,i.createElement)(n.SelectControl,{label:(0,o.__)("Ir a la página","vas-dinamico-forms"),value:d.defaultTargetPage?d.defaultTargetPage.toString():p[0]?.index.toString()||"1",options:h(),onChange:e=>b("goToPage",e)})),(0,i.createElement)(n.Button,{isPrimary:!0,isSmall:!0,onClick:()=>{const e={id:`rule-${Date.now()}`,matchValue:"",action:"goToPage",targetPage:p.length>0?p[0].index:1},t=[...d.rules,e];a({conditionalLogic:{...d,rules:t}})},disabled:!_,className:"conditional-logic-add-rule-button"},(0,o.__)("+ Agregar regla","vas-dinamico-forms")),_&&(0,i.createElement)("div",{className:"conditional-logic-info",style:{marginTop:"16px"}},(0,i.createElement)("p",null,(0,o.__)("Las reglas se evalúan en orden. La primera regla que coincida determinará la navegación del formulario.","vas-dinamico-forms")))))};(0,l.registerBlockType)("vas-dinamico/campo-select",{edit:function({attributes:e,setAttributes:a,clientId:t}){const{fieldName:l,label:s,required:c,placeholder:m,helperText:d,options:p,conditionalLogic:u}=e,f=l&&""!==l.trim()?l.trim():void 0,v=u&&(Array.isArray(u)?u.length>0:u.enabled&&u.rules&&u.rules.length>0),h=(0,r.useBlockProps)({className:"form-group eipsi-field eipsi-select-field","data-field-name":f,"data-required":c?"true":"false","data-field-type":"select","data-conditional-logic":v?"true":void 0}),E=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(f),_=s&&""!==s.trim()?s:(0,o.__)("Campo de selección","vas-dinamico-forms"),y=(N=p)&&""!==N.trim()?N.split(",").map(e=>e.trim()).filter(e=>""!==e):[];var N;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(r.InspectorControls,null,(0,i.createElement)(g,{attributes:e,setAttributes:a}),(0,i.createElement)(b,{attributes:e,setAttributes:a,options:y,clientId:t}),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Select Options","vas-dinamico-forms"),initialOpen:!0},(0,i.createElement)(n.TextareaControl,{label:(0,o.__)("Options (comma-separated)","vas-dinamico-forms"),value:p||"",onChange:e=>a({options:e}),help:(0,o.__)("Enter options separated by commas (e.g., Option 1, Option 2, Option 3)","vas-dinamico-forms"),rows:5}))),(0,i.createElement)("div",{...h},(0,i.createElement)("label",{className:c?"required":void 0,htmlFor:E},_),(0,i.createElement)("select",{name:f,id:E,required:c,"data-required":c?"true":"false","data-field-type":"select",disabled:!0},m&&""!==m.trim()&&(0,i.createElement)("option",{value:""},m),y.length>0?y.map((e,a)=>(0,i.createElement)("option",{key:a,value:e},e)):(0,i.createElement)("option",{value:""},(0,o.__)("Add options in the sidebar","vas-dinamico-forms"))),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(d),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldName:a,label:t,required:l,placeholder:n,helperText:o,options:s,conditionalLogic:c}=e,m=a&&""!==a.trim()?a.trim():void 0,d=r.useBlockProps.save({className:"form-group eipsi-field eipsi-select-field","data-field-name":m,"data-required":l?"true":"false","data-field-type":"select","data-conditional-logic":c?JSON.stringify(c):void 0}),p=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(m),u=(f=s)&&""!==f.trim()?f.split(",").map(e=>e.trim()).filter(e=>""!==e):[];var f;return(0,i.createElement)("div",{...d},t&&(0,i.createElement)("label",{className:l?"required":void 0,htmlFor:p},t),(0,i.createElement)("select",{name:m,id:p,required:l,"data-required":l?"true":"false","data-field-type":"select"},n&&""!==n.trim()&&(0,i.createElement)("option",{value:""},n),u.map((e,a)=>(0,i.createElement)("option",{key:a,value:e},e))),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(o),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"}))}}),(0,l.registerBlockType)("vas-dinamico/campo-radio",{edit:function({attributes:e,setAttributes:a,clientId:t}){const{fieldName:l,label:s,required:c,helperText:m,options:d,conditionalLogic:p}=e,u=l&&""!==l.trim()?l.trim():void 0,f=p&&(Array.isArray(p)?p.length>0:p.enabled&&p.rules&&p.rules.length>0),v=(0,r.useBlockProps)({className:"form-group eipsi-field eipsi-radio-field","data-field-name":u,"data-required":c?"true":"false","data-field-type":"radio","data-conditional-logic":f?"true":void 0}),h=s&&""!==s.trim()?s:(0,o.__)("Campo de opciones","vas-dinamico-forms"),E=(_=d)&&""!==_.trim()?_.split(",").map(e=>e.trim()).filter(e=>""!==e):[];var _;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(r.InspectorControls,null,(0,i.createElement)(g,{attributes:e,setAttributes:a,showPlaceholder:!1}),(0,i.createElement)(b,{attributes:e,setAttributes:a,options:E,clientId:t}),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Radio Options","vas-dinamico-forms"),initialOpen:!0},(0,i.createElement)(n.TextareaControl,{label:(0,o.__)("Options (comma-separated)","vas-dinamico-forms"),value:d||"",onChange:e=>a({options:e}),help:(0,o.__)("Enter options separated by commas (e.g., Option 1, Option 2, Option 3)","vas-dinamico-forms"),rows:5}))),(0,i.createElement)("div",{...v},(0,i.createElement)("label",{className:c?"required":void 0},h),(0,i.createElement)("ul",{className:"radio-list"},E.length>0?E.map((e,a)=>{const t=((e,a="")=>{if(!e||""===e.trim())return;const t=e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-");return a?`field-${t}-${a}`:`field-${t}`})(u,a.toString());return(0,i.createElement)("li",{key:a},(0,i.createElement)("input",{type:"radio",name:u,id:t,value:e,required:c,"data-required":c?"true":"false","data-field-type":"radio",disabled:!0}),(0,i.createElement)("label",{htmlFor:t},e))}):(0,i.createElement)("li",{className:"empty-state"},(0,o.__)("Add options in the sidebar","vas-dinamico-forms"))),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(m),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldName:a,label:t,required:l,helperText:n,options:o,conditionalLogic:s}=e,c=a&&""!==a.trim()?a.trim():void 0,m=r.useBlockProps.save({className:"form-group eipsi-field eipsi-radio-field","data-field-name":c,"data-required":l?"true":"false","data-field-type":"radio","data-conditional-logic":s?JSON.stringify(s):void 0}),d=(p=o)&&""!==p.trim()?p.split(",").map(e=>e.trim()).filter(e=>""!==e):[];var p;return(0,i.createElement)("div",{...m},t&&(0,i.createElement)("label",{className:l?"required":void 0},t),(0,i.createElement)("ul",{className:"radio-list"},d.map((e,a)=>{const t=((e,a="")=>{if(!e||""===e.trim())return;const t=e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-");return a?`field-${t}-${a}`:`field-${t}`})(c,a.toString());return(0,i.createElement)("li",{key:a},(0,i.createElement)("input",{type:"radio",name:c,id:t,value:e,required:l,"data-required":l?"true":"false","data-field-type":"radio"}),(0,i.createElement)("label",{htmlFor:t},e))})),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(n),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"}))}}),(0,l.registerBlockType)("vas-dinamico/campo-multiple",{edit:function({attributes:e,setAttributes:a,clientId:t}){const{fieldName:l,label:s,required:c,helperText:m,options:d,conditionalLogic:p}=e,u=l&&""!==l.trim()?l.trim():void 0,f=p&&(Array.isArray(p)?p.length>0:p.enabled&&p.rules&&p.rules.length>0),v=(0,r.useBlockProps)({className:"form-group eipsi-field eipsi-checkbox-field","data-field-name":u,"data-required":c?"true":"false","data-field-type":"checkbox","data-conditional-logic":f?"true":void 0}),h=s&&""!==s.trim()?s:(0,o.__)("Campo de selección múltiple","vas-dinamico-forms"),E=(_=d)&&""!==_.trim()?_.split(",").map(e=>e.trim()).filter(e=>""!==e):[];var _;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(r.InspectorControls,null,(0,i.createElement)(g,{attributes:e,setAttributes:a,showPlaceholder:!1}),(0,i.createElement)(b,{attributes:e,setAttributes:a,options:E,clientId:t}),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Checkbox Options","vas-dinamico-forms"),initialOpen:!0},(0,i.createElement)(n.TextareaControl,{label:(0,o.__)("Options (comma-separated)","vas-dinamico-forms"),value:d||"",onChange:e=>a({options:e}),help:(0,o.__)("Enter options separated by commas (e.g., Option 1, Option 2, Option 3)","vas-dinamico-forms"),rows:5}))),(0,i.createElement)("div",{...v},(0,i.createElement)("label",{className:c?"required":void 0},h),(0,i.createElement)("ul",{className:"checkbox-list"},E.length>0?E.map((e,a)=>{const t=((e,a="")=>{if(!e||""===e.trim())return;const t=e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-");return a?`field-${t}-${a}`:`field-${t}`})(u,a.toString());return(0,i.createElement)("li",{key:a},(0,i.createElement)("input",{type:"checkbox",name:`${u}[]`,id:t,value:e,"data-required":c?"true":"false","data-field-type":"checkbox",disabled:!0}),(0,i.createElement)("label",{htmlFor:t},e))}):(0,i.createElement)("li",{className:"empty-state"},(0,o.__)("Add options in the sidebar","vas-dinamico-forms"))),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(m),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldName:a,label:t,required:l,helperText:n,options:o,conditionalLogic:s}=e,c=a&&""!==a.trim()?a.trim():void 0,m=r.useBlockProps.save({className:"form-group eipsi-field eipsi-checkbox-field","data-field-name":c,"data-required":l?"true":"false","data-field-type":"checkbox","data-conditional-logic":s?JSON.stringify(s):void 0}),d=(p=o)&&""!==p.trim()?p.split(",").map(e=>e.trim()).filter(e=>""!==e):[];var p;return(0,i.createElement)("div",{...m},t&&(0,i.createElement)("label",{className:l?"required":void 0},t),(0,i.createElement)("ul",{className:"checkbox-list"},d.map((e,a)=>{const t=((e,a="")=>{if(!e||""===e.trim())return;const t=e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-");return a?`field-${t}-${a}`:`field-${t}`})(c,a.toString());return(0,i.createElement)("li",{key:a},(0,i.createElement)("input",{type:"checkbox",name:`${c}[]`,id:t,value:e,"data-required":l?"true":"false","data-field-type":"checkbox"}),(0,i.createElement)("label",{htmlFor:t},e))})),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(n),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"}))}});const h=e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`},E=e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`};(0,l.registerBlockType)("vas-dinamico/campo-likert",{edit:function({attributes:e,setAttributes:a,clientId:t}){const{fieldKey:l,fieldName:s,label:c,required:d,helperText:p,minValue:u,maxValue:f,labels:g}=e;(0,m.useEffect)(()=>{if(!l){const e=`likert-${t.replace(/[^a-zA-Z0-9]/g,"")}`;a({fieldKey:e})}},[l,t,a]);const v=s&&""!==s.trim()?s.trim():l,b=(0,r.useBlockProps)({className:"form-group eipsi-field eipsi-likert-field","data-field-name":v,"data-required":d?"true":"false","data-field-type":"likert","data-min":u,"data-max":f}),E=c&&""!==c.trim()?c:(0,o.__)("Escala Likert","vas-dinamico-forms"),_=g&&""!==g.trim()?g.split(",").map(e=>e.trim()).filter(e=>""!==e):[],y=[];for(let e=u;e<=f;e++)y.push(e);const N=_.length>0&&_.length!==y.length;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(r.InspectorControls,null,(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Field Settings","vas-dinamico-forms"),initialOpen:!0},(0,i.createElement)(n.TextControl,{label:(0,o.__)("Field Name / Slug","vas-dinamico-forms"),value:s||"",onChange:e=>a({fieldName:e}),help:(0,o.__)("Used as the input name attribute (e.g., satisfaction)","vas-dinamico-forms")}),(0,i.createElement)(n.TextControl,{label:(0,o.__)("Label","vas-dinamico-forms"),value:c||"",onChange:e=>a({label:e})}),(0,i.createElement)(n.ToggleControl,{label:(0,o.__)("Required field","vas-dinamico-forms"),checked:!!d,onChange:e=>a({required:!!e})}),(0,i.createElement)(n.TextareaControl,{label:(0,o.__)("Helper text","vas-dinamico-forms"),value:p||"",onChange:e=>a({helperText:e}),help:(0,o.__)("Displayed below the field to provide additional guidance.","vas-dinamico-forms")})),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Likert Scale Options","vas-dinamico-forms"),initialOpen:!0},(0,i.createElement)(n.RangeControl,{label:(0,o.__)("Minimum Value","vas-dinamico-forms"),value:u,onChange:e=>{e<f&&a({minValue:e})},min:0,max:10,help:(0,o.__)("The lowest value in the scale","vas-dinamico-forms")}),(0,i.createElement)(n.RangeControl,{label:(0,o.__)("Maximum Value","vas-dinamico-forms"),value:f,onChange:e=>{e>u&&a({maxValue:e})},min:1,max:10,help:(0,o.__)("The highest value in the scale","vas-dinamico-forms")}),(0,i.createElement)(n.TextareaControl,{label:(0,o.__)("Labels (comma-separated)","vas-dinamico-forms"),value:g||"",onChange:e=>a({labels:e}),help:(0,o.__)("Optional labels for each scale point. Must match the number of scale points.","vas-dinamico-forms")}),N&&(0,i.createElement)(n.Notice,{status:"warning",isDismissible:!1},(0,o.__)("You have %1$d labels but %2$d scale points. Labels will be ignored if count doesn't match.","vas-dinamico-forms").replace("%1$d",_.length).replace("%2$d",y.length)))),(0,i.createElement)("div",{...b},c&&(0,i.createElement)("label",{htmlFor:v?`${h(v)}-label`:void 0,className:d?"required":void 0},E),(0,i.createElement)("div",{className:"likert-scale likert-preview","data-scale":`${u}-${f}`},(0,i.createElement)("ul",{className:"likert-list"},y.map((e,a)=>{const t=`${h(v)}-${e}`,l=_[a]||e.toString();return(0,i.createElement)("li",{key:e,className:"likert-item"},(0,i.createElement)("input",{type:"radio",name:v,id:t,value:e,required:d,"data-required":d?"true":"false",disabled:!0}),(0,i.createElement)("label",{htmlFor:t,className:"likert-label"},l))}))),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(p),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldKey:a,fieldName:t,label:l,required:n,helperText:o,minValue:s,maxValue:c,labels:m}=e,d=t&&""!==t.trim()?t.trim():a,p=r.useBlockProps.save({className:"form-group eipsi-field eipsi-likert-field","data-field-name":d,"data-required":n?"true":"false","data-field-type":"likert","data-min":s,"data-max":c}),u=m&&""!==m.trim()?m.split(",").map(e=>e.trim()).filter(e=>""!==e):[],f=[];for(let e=s;e<=c;e++)f.push(e);return(0,i.createElement)("div",{...p},l&&(0,i.createElement)("label",{htmlFor:d?`${E(d)}-label`:void 0,className:n?"required":void 0},l),(0,i.createElement)("div",{className:"likert-scale","data-scale":`${s}-${c}`},(0,i.createElement)("ul",{className:"likert-list"},f.map((e,a)=>{const t=`${E(d)}-${e}`,l=u[a]||e.toString();return(0,i.createElement)("li",{key:e,className:"likert-item"},(0,i.createElement)("label",{htmlFor:t,className:"likert-label-wrapper"},(0,i.createElement)("input",{type:"radio",name:d,id:t,value:e,required:n,"data-required":n?"true":"false"}),(0,i.createElement)("span",{className:"likert-label-text"},l)))}))),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(o),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"}))}}),(0,l.registerBlockType)("vas-dinamico/vas-slider",{edit:function({attributes:e,setAttributes:a}){const{fieldName:t,label:l,required:s,helperText:c,leftLabel:d,rightLabel:p,labels:u,minValue:f,maxValue:g,step:v,initialValue:b,showValue:h}=e,E=t&&""!==t.trim()?t.trim():void 0,_=(0,r.useBlockProps)({className:"form-group eipsi-field eipsi-vas-slider-field","data-field-name":E,"data-required":s?"true":"false","data-field-type":"vas-slider"}),y=l&&""!==l.trim()?l:(0,o.__)("VAS Slider","vas-dinamico-forms"),N=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(E),x=b>=f&&b<=g?b:Math.floor((f+g)/2),[k,C]=(0,m.useState)(x),P=u&&""!==u.trim()?u.split(",").map(e=>e.trim()).filter(e=>""!==e):[],B=P.length>0;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(r.InspectorControls,null,(0,i.createElement)(n.PanelBody,{title:(0,o.__)("Field Settings","vas-dinamico-forms"),initialOpen:!0},(0,i.createElement)(n.TextControl,{label:(0,o.__)("Field Name / Slug","vas-dinamico-forms"),value:t||"",onChange:e=>a({fieldName:e}),help:(0,o.__)("Used as the input name attribute (e.g., pain_level)","vas-dinamico-forms")}),(0,i.createElement)(n.TextControl,{label:(0,o.__)("Label","vas-dinamico-forms"),value:l||"",onChange:e=>a({label:e})}),(0,i.createElement)(n.ToggleControl,{label:(0,o.__)("Required field","vas-dinamico-forms"),checked:!!s,onChange:e=>a({required:!!e})}),(0,i.createElement)(n.TextareaControl,{label:(0,o.__)("Helper text","vas-dinamico-forms"),value:c||"",onChange:e=>a({helperText:e}),help:(0,o.__)("Displayed below the field to provide additional guidance.","vas-dinamico-forms")})),(0,i.createElement)(n.PanelBody,{title:(0,o.__)("VAS Slider Options","vas-dinamico-forms"),initialOpen:!0},(0,i.createElement)(n.TextareaControl,{label:(0,o.__)("Labels (comma-separated)","vas-dinamico-forms"),value:u||"",onChange:e=>a({labels:e}),help:(0,o.__)('Optional: Multiple labels for scale points (e.g., "Muy mal,Mal,Neutral,Bien,Muy bien")',"vas-dinamico-forms")}),(0,i.createElement)(n.TextControl,{label:(0,o.__)("Left Label","vas-dinamico-forms"),value:d||"",onChange:e=>a({leftLabel:e}),help:(0,o.__)("Label for the minimum value (used when multi-labels are not set)","vas-dinamico-forms")}),(0,i.createElement)(n.TextControl,{label:(0,o.__)("Right Label","vas-dinamico-forms"),value:p||"",onChange:e=>a({rightLabel:e}),help:(0,o.__)("Label for the maximum value (used when multi-labels are not set)","vas-dinamico-forms")}),(0,i.createElement)(n.RangeControl,{label:(0,o.__)("Minimum Value","vas-dinamico-forms"),value:f,onChange:e=>{if(a({minValue:e}),g<=e&&a({maxValue:e+1}),b<e){const t=Math.floor((e+g)/2);a({initialValue:t}),C(t)}},min:0,max:100}),(0,i.createElement)(n.RangeControl,{label:(0,o.__)("Maximum Value","vas-dinamico-forms"),value:g,onChange:e=>{if(a({maxValue:e}),f>=e&&a({minValue:e-1}),b>e){const t=Math.floor((f+e)/2);a({initialValue:t}),C(t)}},min:1,max:1e3}),(0,i.createElement)(n.RangeControl,{label:(0,o.__)("Step","vas-dinamico-forms"),value:v,onChange:e=>a({step:e}),min:.1,max:10,step:.1,help:(0,o.__)("Increment for each slider movement","vas-dinamico-forms")}),(0,i.createElement)(n.RangeControl,{label:(0,o.__)("Initial Value","vas-dinamico-forms"),value:b,onChange:e=>{a({initialValue:e}),C(e)},min:f,max:g,step:v,help:(0,o.__)("Default slider position","vas-dinamico-forms")}),(0,i.createElement)(n.ToggleControl,{label:(0,o.__)("Show current value","vas-dinamico-forms"),checked:!!h,onChange:e=>a({showValue:!!e})}))),(0,i.createElement)("div",{..._},(0,i.createElement)("label",{className:s?"required":void 0,htmlFor:N},y),(0,i.createElement)("div",{className:"vas-slider-container vas-slider-preview","data-scale":`${f}-${g}`},!B&&(0,i.createElement)("div",{className:"vas-slider-labels"},d&&(0,i.createElement)("span",{className:"vas-label-left"},d),h&&(0,i.createElement)("span",{className:"vas-current-value",id:`${N}-value`},k),p&&(0,i.createElement)("span",{className:"vas-label-right"},p)),B&&(0,i.createElement)("div",{className:"vas-multi-labels"},P.map((e,a)=>(0,i.createElement)("span",{key:a,className:"vas-multi-label"},e))),B&&h&&(0,i.createElement)("div",{className:"vas-current-value-solo",id:`${N}-value`},k),(0,i.createElement)("input",{type:"range",name:E,id:N,className:"vas-slider",min:f,max:g,step:v,value:k,onChange:e=>C(parseFloat(e.target.value)),required:s,"data-required":s?"true":"false","data-show-value":h?"true":"false","aria-valuemin":f,"aria-valuemax":g,"aria-valuenow":k,"aria-labelledby":`${N}-value`})),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(c),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldName:a,label:t,required:l,helperText:n,labels:o,minValue:s,maxValue:c,step:m,initialValue:d,showValue:p}=e,u=a&&""!==a.trim()?a.trim():void 0,f=r.useBlockProps.save({className:"form-group eipsi-field eipsi-vas-slider-field","data-field-name":u,"data-required":l?"true":"false","data-field-type":"vas-slider"}),g=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(u),v=d>=s&&d<=c?d:Math.floor((s+c)/2),b=o&&""!==o.trim()?o.split(",").map(e=>e.trim()).filter(e=>""!==e):["Nada","Leve","Moderado","Fuerte","Muy fuerte"];return(0,i.createElement)("div",{...f},t&&(0,i.createElement)("label",{className:l?"required":void 0,htmlFor:g},t),(0,i.createElement)("div",{className:"vas-section"},(0,i.createElement)("div",{className:"vas-slider-container"},b.length>0&&(0,i.createElement)("div",{className:"vas-labels"},b.map((e,a)=>(0,i.createElement)("span",{key:a,className:"vas-label"},e))),(0,i.createElement)("div",{className:"vas-slider-wrapper"},(0,i.createElement)("input",{type:"range",name:u,id:g,className:"vas-slider",min:s,max:c,step:m,defaultValue:v,required:l,"data-required":l?"true":"false","data-show-value":p?"true":"false","aria-valuemin":s,"aria-valuemax":c,"aria-valuenow":v,"aria-labelledby":`${g}-value`})),p&&(0,i.createElement)("div",{className:"vas-value-display"},(0,i.createElement)("span",{className:"vas-value-number",id:`${g}-value-display`},v)))),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,i.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,i.createElement)("span",{key:t},e,t<a.length-1&&(0,i.createElement)("br",null))))})(n),(0,i.createElement)("div",{className:"form-error","aria-live":"polite"}))}})}},t={};function i(e){var l=t[e];if(void 0!==l)return l.exports;var r=t[e]={exports:{}};return a[e](r,r.exports,i),r.exports}i.m=a,e=[],i.O=(a,t,l,r)=>{if(!t){var n=1/0;for(m=0;m<e.length;m++){for(var[t,l,r]=e[m],o=!0,s=0;s<t.length;s++)(!1&r||n>=r)&&Object.keys(i.O).every(e=>i.O[e](t[s]))?t.splice(s--,1):(o=!1,r<n&&(n=r));if(o){e.splice(m--,1);var c=l();void 0!==c&&(a=c)}}return a}r=r||0;for(var m=e.length;m>0&&e[m-1][2]>r;m--)e[m]=e[m-1];e[m]=[t,l,r]},i.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return i.d(a,{a}),a},i.d=(e,a)=>{for(var t in a)i.o(a,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},i.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={57:0,350:0};i.O.j=a=>0===e[a];var a=(a,t)=>{var l,r,[n,o,s]=t,c=0;if(n.some(a=>0!==e[a])){for(l in o)i.o(o,l)&&(i.m[l]=o[l]);if(s)var m=s(i)}for(a&&a(t);c<n.length;c++)r=n[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(m)},t=globalThis.webpackChunkvas_dinamico_forms=globalThis.webpackChunkvas_dinamico_forms||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var l=i.O(void 0,[350],()=>i(929));l=i.O(l)})();