(()=>{"use strict";var e,a={748:(e,a,i)=>{const s=window.wp.blocks,o=window.wp.blockEditor,r=window.wp.components,l=window.wp.i18n,t=window.wp.serverSideRender;var n=i.n(t);const c=window.ReactJSXRuntime;(0,s.registerBlockType)("vas-dinamico/form-block",{edit:({attributes:e,setAttributes:a})=>{const{formId:i,showTitle:s}=e,t=(0,o.useBlockProps)();return(0,c.jsxs)("div",{...t,children:[(0,c.jsx)(o.InspectorControls,{children:(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("Form Settings","vas-dinamico-forms"),children:[(0,c.jsx)(r.TextControl,{label:(0,l.__)("Form ID","vas-dinamico-forms"),value:i,onChange:e=>a({formId:e}),help:(0,l.__)("Enter the unique identifier for the form","vas-dinamico-forms")}),(0,c.jsx)(r.ToggleControl,{label:(0,l.__)("Show Title","vas-dinamico-forms"),checked:s,onChange:e=>a({showTitle:e})})]})}),i?(0,c.jsx)(n(),{block:"vas-dinamico/form-block",attributes:e}):(0,c.jsx)("div",{className:"vas-dinamico-form-placeholder",children:(0,c.jsxs)("div",{className:"components-placeholder",children:[(0,c.jsx)("div",{className:"components-placeholder__label",children:(0,l.__)("VAS DinÃ¡mico Form","vas-dinamico-forms")}),(0,c.jsx)("div",{className:"components-placeholder__instructions",children:(0,l.__)("Please enter a Form ID in the block settings.","vas-dinamico-forms")})]})})]})},save:()=>null});const d=window.wp.element,m={colors:{primary:"#005a87",primaryHover:"#003d5b",secondary:"#e3f2fd",background:"#ffffff",backgroundSubtle:"#f8f9fa",text:"#2c3e50",textMuted:"#64748b",inputBg:"#ffffff",inputText:"#2c3e50",inputBorder:"#64748b",inputBorderFocus:"#005a87",inputErrorBg:"#fff5f5",inputIcon:"#005a87",buttonBg:"#005a87",buttonText:"#ffffff",buttonHoverBg:"#003d5b",error:"#d32f2f",success:"#198754",warning:"#b35900",border:"#64748b",borderDark:"#475569"},typography:{fontFamilyHeading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontFamilyBody:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontSizeBase:"16px",fontSizeH1:"2rem",fontSizeH2:"1.75rem",fontSizeH3:"1.5rem",fontSizeSmall:"0.875rem",fontWeightNormal:"400",fontWeightMedium:"500",fontWeightBold:"700",lineHeightBase:"1.6",lineHeightHeading:"1.3"},spacing:{xs:"0.5rem",sm:"1rem",md:"1.5rem",lg:"2rem",xl:"2.5rem",containerPadding:"2.5rem",fieldGap:"1.5rem",sectionGap:"2rem"},borders:{radiusSm:"8px",radiusMd:"12px",radiusLg:"20px",width:"1px",widthFocus:"2px",style:"solid"},shadows:{sm:"0 2px 8px rgba(0, 90, 135, 0.08)",md:"0 4px 12px rgba(0, 90, 135, 0.1)",lg:"0 8px 25px rgba(0, 90, 135, 0.1)",focus:"0 0 0 3px rgba(0, 90, 135, 0.1)",error:"0 0 0 3px rgba(211, 47, 47, 0.15)"},interactivity:{transitionDuration:"0.2s",transitionTiming:"ease",hoverScale:"1.02",focusOutlineWidth:"2px",focusOutlineOffset:"2px"}};function p(e){if(e.styleConfig&&"object"==typeof e.styleConfig)return e.styleConfig;const a=JSON.parse(JSON.stringify(m));return e.backgroundColor&&(a.colors.background=e.backgroundColor),e.textColor&&(a.colors.text=e.textColor),e.primaryColor&&(a.colors.primary=e.primaryColor,a.colors.buttonBg=e.primaryColor),e.inputBgColor&&(a.colors.inputBg=e.inputBgColor),e.inputTextColor&&(a.colors.inputText=e.inputTextColor),e.buttonBgColor&&(a.colors.buttonBg=e.buttonBgColor),e.buttonTextColor&&(a.colors.buttonText=e.buttonTextColor),void 0!==e.borderRadius&&(a.borders.radiusMd=`${e.borderRadius}px`),void 0!==e.padding&&(a.spacing.containerPadding=`${e.padding}px`),a}function u(e){const a=e||m;return{"--eipsi-color-primary":a.colors.primary,"--eipsi-color-primary-hover":a.colors.primaryHover,"--eipsi-color-secondary":a.colors.secondary,"--eipsi-color-background":a.colors.background,"--eipsi-color-background-subtle":a.colors.backgroundSubtle,"--eipsi-color-text":a.colors.text,"--eipsi-color-text-muted":a.colors.textMuted,"--eipsi-color-input-bg":a.colors.inputBg,"--eipsi-color-input-text":a.colors.inputText,"--eipsi-color-input-border":a.colors.inputBorder,"--eipsi-color-input-border-focus":a.colors.inputBorderFocus,"--eipsi-color-input-error-bg":a.colors.inputErrorBg,"--eipsi-color-input-icon":a.colors.inputIcon,"--eipsi-color-button-bg":a.colors.buttonBg,"--eipsi-color-button-text":a.colors.buttonText,"--eipsi-color-button-hover-bg":a.colors.buttonHoverBg,"--eipsi-color-error":a.colors.error,"--eipsi-color-success":a.colors.success,"--eipsi-color-warning":a.colors.warning,"--eipsi-color-border":a.colors.border,"--eipsi-color-border-dark":a.colors.borderDark,"--eipsi-font-family-heading":a.typography.fontFamilyHeading,"--eipsi-font-family-body":a.typography.fontFamilyBody,"--eipsi-font-size-base":a.typography.fontSizeBase,"--eipsi-font-size-h1":a.typography.fontSizeH1,"--eipsi-font-size-h2":a.typography.fontSizeH2,"--eipsi-font-size-h3":a.typography.fontSizeH3,"--eipsi-font-size-small":a.typography.fontSizeSmall,"--eipsi-font-weight-normal":a.typography.fontWeightNormal,"--eipsi-font-weight-medium":a.typography.fontWeightMedium,"--eipsi-font-weight-bold":a.typography.fontWeightBold,"--eipsi-line-height-base":a.typography.lineHeightBase,"--eipsi-line-height-heading":a.typography.lineHeightHeading,"--eipsi-spacing-xs":a.spacing.xs,"--eipsi-spacing-sm":a.spacing.sm,"--eipsi-spacing-md":a.spacing.md,"--eipsi-spacing-lg":a.spacing.lg,"--eipsi-spacing-xl":a.spacing.xl,"--eipsi-spacing-container-padding":a.spacing.containerPadding,"--eipsi-spacing-field-gap":a.spacing.fieldGap,"--eipsi-spacing-section-gap":a.spacing.sectionGap,"--eipsi-border-radius-sm":a.borders.radiusSm,"--eipsi-border-radius-md":a.borders.radiusMd,"--eipsi-border-radius-lg":a.borders.radiusLg,"--eipsi-border-width":a.borders.width,"--eipsi-border-width-focus":a.borders.widthFocus,"--eipsi-border-style":a.borders.style,"--eipsi-shadow-sm":a.shadows.sm,"--eipsi-shadow-md":a.shadows.md,"--eipsi-shadow-lg":a.shadows.lg,"--eipsi-shadow-focus":a.shadows.focus,"--eipsi-shadow-error":a.shadows.error,"--eipsi-transition-duration":a.interactivity.transitionDuration,"--eipsi-transition-timing":a.interactivity.transitionTiming,"--eipsi-hover-scale":a.interactivity.hoverScale,"--eipsi-focus-outline-width":a.interactivity.focusOutlineWidth,"--eipsi-focus-outline-offset":a.interactivity.focusOutlineOffset}}function f(e){if(!e||"string"!=typeof e)return null;const a=e.trim();if(a.startsWith("#"))return function(e){const a=e.replace(/^#/,"");let i,s,o;if(3===a.length)i=parseInt(a[0]+a[0],16),s=parseInt(a[1]+a[1],16),o=parseInt(a[2]+a[2],16);else{if(6!==a.length)return null;i=parseInt(a.substring(0,2),16),s=parseInt(a.substring(2,4),16),o=parseInt(a.substring(4,6),16)}return{r:i,g:s,b:o}}(a);const i=a.match(/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/);return i?{r:parseInt(i[1],10),g:parseInt(i[2],10),b:parseInt(i[3],10)}:null}function h(e){if(!e)return 0;const a=e.r/255,i=e.g/255,s=e.b/255;return.2126*(a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4))+.7152*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.0722*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))}function g(e,a){const i=function(e,a){const i=f(e),s=f(a);if(!i||!s)return 0;const o=h(i),r=h(s);return(Math.max(o,r)+.05)/(Math.min(o,r)+.05)}(e,a);return i>=7?{passes:!0,level:"AAA",ratio:i.toFixed(2),message:"Excellent contrast (WCAG AAA)"}:i>=4.5?{passes:!0,level:"AA",ratio:i.toFixed(2),message:"Good contrast (WCAG AA)"}:{passes:!1,level:"Fail",ratio:i.toFixed(2),message:`Insufficient contrast (${i.toFixed(2)}:1). Minimum 4.5:1 required for accessibility.`}}const x=[{name:"Clinical Blue",description:"Professional medical research with balanced design and EIPSI blue branding",config:{...m}},{name:"Minimal White",description:"Ultra-clean minimalist design with sharp lines and abundant white space",config:{colors:{primary:"#475569",primaryHover:"#1e293b",secondary:"#f8fafc",background:"#ffffff",backgroundSubtle:"#fafbfc",text:"#0f172a",textMuted:"#556677",inputBg:"#ffffff",inputText:"#0f172a",inputBorder:"#64748b",inputBorderFocus:"#475569",inputErrorBg:"#fef2f2",inputIcon:"#475569",buttonBg:"#475569",buttonText:"#ffffff",buttonHoverBg:"#1e293b",error:"#c53030",success:"#28744c",warning:"#b35900",border:"#64748b",borderDark:"#475569"},typography:{fontFamilyHeading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontFamilyBody:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontSizeBase:"16px",fontSizeH1:"1.875rem",fontSizeH2:"1.5rem",fontSizeH3:"1.25rem",fontSizeSmall:"0.875rem",fontWeightNormal:"400",fontWeightMedium:"500",fontWeightBold:"600",lineHeightBase:"1.7",lineHeightHeading:"1.25"},spacing:{xs:"0.75rem",sm:"1.25rem",md:"2rem",lg:"2.75rem",xl:"4rem",containerPadding:"3.5rem",fieldGap:"2rem",sectionGap:"3rem"},borders:{radiusSm:"4px",radiusMd:"6px",radiusLg:"8px",width:"1px",widthFocus:"2px",style:"solid"},shadows:{sm:"none",md:"none",lg:"none",focus:"0 0 0 3px rgba(71, 85, 105, 0.15)",error:"0 0 0 3px rgba(197, 48, 48, 0.15)"},interactivity:{transitionDuration:"0.15s",transitionTiming:"ease",hoverScale:"1",focusOutlineWidth:"2px",focusOutlineOffset:"2px"}}},{name:"Warm Neutral",description:"Warm and approachable with rounded corners and inviting serif typography",config:{colors:{primary:"#8b6f47",primaryHover:"#6b5437",secondary:"#f5f1eb",background:"#fdfcfa",backgroundSubtle:"#f7f4ef",text:"#3d3935",textMuted:"#6b6560",inputBg:"#ffffff",inputText:"#3d3935",inputBorder:"#8b7a65",inputBorderFocus:"#8b6f47",inputErrorBg:"#fff5f5",inputIcon:"#8b6f47",buttonBg:"#8b6f47",buttonText:"#ffffff",buttonHoverBg:"#6b5437",error:"#c53030",success:"#2a7850",warning:"#b04d1f",border:"#8b7a65",borderDark:"#6b5437"},typography:{fontFamilyHeading:'Georgia, "Times New Roman", serif',fontFamilyBody:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontSizeBase:"16px",fontSizeH1:"2rem",fontSizeH2:"1.75rem",fontSizeH3:"1.5rem",fontSizeSmall:"0.875rem",fontWeightNormal:"400",fontWeightMedium:"500",fontWeightBold:"700",lineHeightBase:"1.7",lineHeightHeading:"1.35"},spacing:{xs:"0.5rem",sm:"1rem",md:"1.5rem",lg:"2rem",xl:"2.5rem",containerPadding:"2.5rem",fieldGap:"1.75rem",sectionGap:"2.25rem"},borders:{radiusSm:"10px",radiusMd:"14px",radiusLg:"20px",width:"1px",widthFocus:"2px",style:"solid"},shadows:{sm:"0 2px 8px rgba(139, 111, 71, 0.08)",md:"0 4px 12px rgba(139, 111, 71, 0.12)",lg:"0 8px 25px rgba(139, 111, 71, 0.15)",focus:"0 0 0 3px rgba(139, 111, 71, 0.15)",error:"0 0 0 3px rgba(197, 48, 48, 0.15)"},interactivity:{transitionDuration:"0.25s",transitionTiming:"ease-out",hoverScale:"1.01",focusOutlineWidth:"2px",focusOutlineOffset:"2px"}}},{name:"Serene Teal",description:"Calming teal tones with balanced design for therapeutic assessments",config:{colors:{primary:"#0e7490",primaryHover:"#155e75",secondary:"#e0f2fe",background:"#ffffff",backgroundSubtle:"#f0f9ff",text:"#0c4a6e",textMuted:"#475569",inputBg:"#ffffff",inputText:"#0c4a6e",inputBorder:"#0891b2",inputBorderFocus:"#0e7490",inputErrorBg:"#fef2f2",inputIcon:"#0e7490",buttonBg:"#0e7490",buttonText:"#ffffff",buttonHoverBg:"#155e75",error:"#dc2626",success:"#047857",warning:"#b35900",border:"#0891b2",borderDark:"#0e7490"},typography:{fontFamilyHeading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontFamilyBody:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontSizeBase:"16px",fontSizeH1:"2rem",fontSizeH2:"1.625rem",fontSizeH3:"1.375rem",fontSizeSmall:"0.875rem",fontWeightNormal:"400",fontWeightMedium:"500",fontWeightBold:"600",lineHeightBase:"1.65",lineHeightHeading:"1.3"},spacing:{xs:"0.5rem",sm:"1rem",md:"1.75rem",lg:"2.25rem",xl:"3rem",containerPadding:"2.75rem",fieldGap:"1.75rem",sectionGap:"2.5rem"},borders:{radiusSm:"10px",radiusMd:"16px",radiusLg:"24px",width:"1px",widthFocus:"2px",style:"solid"},shadows:{sm:"0 2px 8px rgba(8, 145, 178, 0.08)",md:"0 4px 12px rgba(8, 145, 178, 0.1)",lg:"0 8px 24px rgba(8, 145, 178, 0.12)",focus:"0 0 0 3px rgba(8, 145, 178, 0.2)",error:"0 0 0 3px rgba(220, 38, 38, 0.15)"},interactivity:{transitionDuration:"0.25s",transitionTiming:"ease-out",hoverScale:"1.015",focusOutlineWidth:"2px",focusOutlineOffset:"2px"}}}],v=({styleConfig:e,setStyleConfig:a,presetName:i,setPresetName:s})=>{const[o,t]=(0,d.useState)(i||null),n=e||m,p=(e,i,s)=>{const o={...n,[e]:{...n[e],[i]:s}};a(o),t(null)},u=g(n.colors.text,n.colors.background),f=g(n.colors.textMuted,n.colors.backgroundSubtle),h=g(n.colors.buttonText,n.colors.buttonBg),v=g(n.colors.buttonText,n.colors.buttonHoverBg),b=g(n.colors.inputText,n.colors.inputBg),_=g(n.colors.error,n.colors.background),j=g(n.colors.success,n.colors.background),y=g(n.colors.warning,n.colors.background),N=[{name:"EIPSI Blue",color:"#005a87"},{name:"Dark Blue",color:"#003d5b"},{name:"Light Blue",color:"#e3f2fd"},{name:"Navy",color:"#2c5aa0"},{name:"White",color:"#ffffff"},{name:"Light Gray",color:"#f8f9fa"},{name:"Dark Gray",color:"#2c3e50"},{name:"Medium Gray",color:"#64748b"},{name:"Border Gray",color:"#e2e8f0"},{name:"Black",color:"#000000"},{name:"Error Red (WCAG AA)",color:"#d32f2f"},{name:"Success Green (WCAG AA)",color:"#198754"},{name:"Warning Brown (WCAG AA)",color:"#b35900"},{name:"Warm Brown",color:"#8b6f47"}],C=[{label:"System Default",value:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},{label:"Arial",value:"Arial, sans-serif"},{label:"Helvetica",value:"Helvetica, Arial, sans-serif"},{label:"Georgia (Serif)",value:'Georgia, "Times New Roman", serif'},{label:"Times New Roman",value:'"Times New Roman", serif'},{label:"Courier New (Mono)",value:'"Courier New", monospace'},{label:"Verdana",value:"Verdana, sans-serif"}];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("ðŸŽ¨ Theme Presets","vas-dinamico-forms"),initialOpen:!0,children:[(0,c.jsx)("p",{className:"eipsi-panel-description",children:(0,l.__)("Apply professionally designed themes optimized for clinical research.","vas-dinamico-forms")}),(0,c.jsx)("div",{className:"eipsi-preset-grid",children:x.map(e=>{const i=function(e){return{primary:e.config.colors.primary,background:e.config.colors.background,backgroundSubtle:e.config.colors.backgroundSubtle,text:e.config.colors.text,border:e.config.colors.border,buttonBg:e.config.colors.buttonBg,buttonText:e.config.colors.buttonText,borderRadius:e.config.borders.radiusMd,shadow:e.config.shadows.md,fontFamily:e.config.typography.fontFamilyHeading}}(e),l=o===e.name;return(0,c.jsxs)("button",{className:"eipsi-preset-button "+(l?"is-active":""),onClick:()=>(e=>{a(JSON.parse(JSON.stringify(e.config))),t(e.name),s(e.name)})(e),title:e.description,children:[(0,c.jsxs)("div",{className:"eipsi-preset-preview",style:{background:i.backgroundSubtle,borderColor:i.border,borderRadius:i.borderRadius,boxShadow:i.shadow},children:[(0,c.jsx)("div",{className:"eipsi-preset-button-sample",style:{background:i.buttonBg,color:i.buttonText,borderRadius:i.borderRadius},children:"Button"}),(0,c.jsx)("div",{className:"eipsi-preset-text",style:{color:i.text,fontFamily:i.fontFamily},children:"Text"})]}),(0,c.jsx)("span",{className:"eipsi-preset-name",children:e.name}),l&&(0,c.jsx)(r.Dashicon,{icon:"yes-alt",className:"eipsi-preset-checkmark"})]},e.name)})}),(0,c.jsx)(r.Button,{isSecondary:!0,isSmall:!0,onClick:()=>{window.confirm((0,l.__)("Reset all customizations to default clinical theme?","vas-dinamico-forms"))&&(a(JSON.parse(JSON.stringify(m))),t("Clinical Blue"),s("Clinical Blue"))},style:{marginTop:"1rem",width:"100%"},children:(0,l.__)("Reset to Default","vas-dinamico-forms")})]}),(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("ðŸŽ¨ Colors","vas-dinamico-forms"),initialOpen:!1,children:[(0,c.jsx)("p",{className:"eipsi-panel-description",children:(0,l.__)("Customize form colors. Maintain 4.5:1 contrast ratio for accessibility.","vas-dinamico-forms")}),(0,c.jsx)("h4",{className:"eipsi-section-title",children:(0,l.__)("Brand Colors","vas-dinamico-forms")}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Primary","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.primary})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.primary,onChange:e=>p("colors","primary",e),clearable:!1})]}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Primary Hover","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.primaryHover})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.primaryHover,onChange:e=>p("colors","primaryHover",e),clearable:!1})]}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Secondary","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.secondary})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.secondary,onChange:e=>p("colors","secondary",e),clearable:!1})]}),(0,c.jsx)("h4",{className:"eipsi-section-title",children:(0,l.__)("Background & Text","vas-dinamico-forms")}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Background","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.background})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.background,onChange:e=>p("colors","background",e),clearable:!1})]}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Text","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.text})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.text,onChange:e=>p("colors","text",e),clearable:!1})]}),!u.passes&&(0,c.jsxs)(r.Notice,{status:"warning",isDismissible:!1,children:[(0,c.jsx)("strong",{children:(0,l.__)("Contrast Warning:","vas-dinamico-forms")})," ",u.message]}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Text Muted","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.textMuted})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.textMuted,onChange:e=>p("colors","textMuted",e),clearable:!1})]}),!f.passes&&(0,c.jsxs)(r.Notice,{status:"warning",isDismissible:!1,children:[(0,c.jsx)("strong",{children:(0,l.__)("Contrast Warning:","vas-dinamico-forms")})," ",(0,l.__)("Text Muted on Background Subtle:","vas-dinamico-forms"),f.message]}),(0,c.jsx)("h4",{className:"eipsi-section-title",children:(0,l.__)("Input Fields","vas-dinamico-forms")}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Input Background","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.inputBg})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.inputBg,onChange:e=>p("colors","inputBg",e),clearable:!1})]}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Input Text","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.inputText})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.inputText,onChange:e=>p("colors","inputText",e),clearable:!1})]}),!b.passes&&(0,c.jsxs)(r.Notice,{status:"warning",isDismissible:!1,children:[(0,c.jsx)("strong",{children:(0,l.__)("Contrast Warning:","vas-dinamico-forms")})," ",b.message]}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Input Border","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.inputBorder})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.inputBorder,onChange:e=>p("colors","inputBorder",e),clearable:!1})]}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Input Border (Focus)","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.inputBorderFocus})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.inputBorderFocus,onChange:e=>p("colors","inputBorderFocus",e),clearable:!1})]}),(0,c.jsx)("h4",{className:"eipsi-section-title",children:(0,l.__)("Buttons","vas-dinamico-forms")}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Button Background","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.buttonBg})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.buttonBg,onChange:e=>p("colors","buttonBg",e),clearable:!1})]}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Button Text","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.buttonText})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.buttonText,onChange:e=>p("colors","buttonText",e),clearable:!1})]}),!h.passes&&(0,c.jsxs)(r.Notice,{status:"warning",isDismissible:!1,children:[(0,c.jsx)("strong",{children:(0,l.__)("Contrast Warning:","vas-dinamico-forms")})," ",h.message]}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Button Hover","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.buttonHoverBg})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.buttonHoverBg,onChange:e=>p("colors","buttonHoverBg",e),clearable:!1})]}),!v.passes&&(0,c.jsxs)(r.Notice,{status:"warning",isDismissible:!1,children:[(0,c.jsx)("strong",{children:(0,l.__)("Contrast Warning:","vas-dinamico-forms")})," ",(0,l.__)("Button Text on Hover Background:","vas-dinamico-forms"),v.message]}),(0,c.jsx)("h4",{className:"eipsi-section-title",children:(0,l.__)("Status & Feedback","vas-dinamico-forms")}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Error","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.error})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.error,onChange:e=>p("colors","error",e),clearable:!1})]}),!_.passes&&(0,c.jsxs)(r.Notice,{status:"warning",isDismissible:!1,children:[(0,c.jsx)("strong",{children:(0,l.__)("Contrast Warning:","vas-dinamico-forms")})," ",(0,l.__)("Error messages must be readable.","vas-dinamico-forms"),_.message]}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Success","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.success})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.success,onChange:e=>p("colors","success",e),clearable:!1})]}),!j.passes&&(0,c.jsxs)(r.Notice,{status:"warning",isDismissible:!1,children:[(0,c.jsx)("strong",{children:(0,l.__)("Contrast Warning:","vas-dinamico-forms")})," ",(0,l.__)("Success messages must be readable.","vas-dinamico-forms"),j.message]}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Warning","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.warning})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.warning,onChange:e=>p("colors","warning",e),clearable:!1})]}),!y.passes&&(0,c.jsxs)(r.Notice,{status:"warning",isDismissible:!1,children:[(0,c.jsx)("strong",{children:(0,l.__)("Contrast Warning:","vas-dinamico-forms")})," ",(0,l.__)("Warning messages must be readable.","vas-dinamico-forms"),y.message]}),(0,c.jsx)("h4",{className:"eipsi-section-title",children:(0,l.__)("Borders","vas-dinamico-forms")}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Border","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.border})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.border,onChange:e=>p("colors","border",e),clearable:!1})]}),(0,c.jsxs)("div",{className:"eipsi-color-control",children:[(0,c.jsxs)(r.Flex,{align:"flex-start",justify:"space-between",children:[(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)("label",{children:(0,l.__)("Border Dark","vas-dinamico-forms")})}),(0,c.jsx)(r.FlexItem,{children:(0,c.jsx)(r.ColorIndicator,{colorValue:n.colors.borderDark})})]}),(0,c.jsx)(r.ColorPalette,{colors:N,value:n.colors.borderDark,onChange:e=>p("colors","borderDark",e),clearable:!1})]})]}),(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("âœï¸ Typography","vas-dinamico-forms"),initialOpen:!1,children:[(0,c.jsx)("p",{className:"eipsi-panel-description",children:(0,l.__)("Configure font families and sizes for optimal readability.","vas-dinamico-forms")}),(0,c.jsx)("h4",{className:"eipsi-section-title",children:(0,l.__)("Font Families","vas-dinamico-forms")}),(0,c.jsx)(r.SelectControl,{label:(0,l.__)("Heading Font","vas-dinamico-forms"),value:n.typography.fontFamilyHeading,options:C,onChange:e=>p("typography","fontFamilyHeading",e)}),(0,c.jsx)(r.SelectControl,{label:(0,l.__)("Body Font","vas-dinamico-forms"),value:n.typography.fontFamilyBody,options:C,onChange:e=>p("typography","fontFamilyBody",e)}),(0,c.jsx)("h4",{className:"eipsi-section-title",children:(0,l.__)("Font Sizes","vas-dinamico-forms")}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Base Size","vas-dinamico-forms"),value:n.typography.fontSizeBase,onChange:e=>p("typography","fontSizeBase",e),help:(0,l.__)("Recommended: 16px minimum for accessibility","vas-dinamico-forms")}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Heading 1 Size","vas-dinamico-forms"),value:n.typography.fontSizeH1,onChange:e=>p("typography","fontSizeH1",e)}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Heading 2 Size","vas-dinamico-forms"),value:n.typography.fontSizeH2,onChange:e=>p("typography","fontSizeH2",e)}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Heading 3 Size","vas-dinamico-forms"),value:n.typography.fontSizeH3,onChange:e=>p("typography","fontSizeH3",e)}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Small Text Size","vas-dinamico-forms"),value:n.typography.fontSizeSmall,onChange:e=>p("typography","fontSizeSmall",e)}),(0,c.jsx)("h4",{className:"eipsi-section-title",children:(0,l.__)("Font Weights","vas-dinamico-forms")}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Normal Weight","vas-dinamico-forms"),value:parseInt(n.typography.fontWeightNormal),onChange:e=>p("typography","fontWeightNormal",String(e)),min:100,max:900,step:100}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Medium Weight","vas-dinamico-forms"),value:parseInt(n.typography.fontWeightMedium),onChange:e=>p("typography","fontWeightMedium",String(e)),min:100,max:900,step:100}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Bold Weight","vas-dinamico-forms"),value:parseInt(n.typography.fontWeightBold),onChange:e=>p("typography","fontWeightBold",String(e)),min:100,max:900,step:100}),(0,c.jsx)("h4",{className:"eipsi-section-title",children:(0,l.__)("Line Heights","vas-dinamico-forms")}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Base Line Height","vas-dinamico-forms"),value:n.typography.lineHeightBase,onChange:e=>p("typography","lineHeightBase",e),help:(0,l.__)("Recommended: 1.6â€“1.8 for comfortable reading","vas-dinamico-forms")}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Heading Line Height","vas-dinamico-forms"),value:n.typography.lineHeightHeading,onChange:e=>p("typography","lineHeightHeading",e)})]}),(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("ðŸ“ Spacing & Layout","vas-dinamico-forms"),initialOpen:!1,children:[(0,c.jsx)("p",{className:"eipsi-panel-description",children:(0,l.__)("Control spacing for participant comfort and visual hierarchy.","vas-dinamico-forms")}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Container Padding","vas-dinamico-forms"),value:parseFloat(n.spacing.containerPadding),onChange:e=>p("spacing","containerPadding",`${e}rem`),min:0,max:5,step:.25,help:(0,l.__)("Breathing room around form content","vas-dinamico-forms")}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Field Gap","vas-dinamico-forms"),value:parseFloat(n.spacing.fieldGap),onChange:e=>p("spacing","fieldGap",`${e}rem`),min:.5,max:4,step:.25,help:(0,l.__)("Vertical spacing between form fields","vas-dinamico-forms")}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Section Gap","vas-dinamico-forms"),value:parseFloat(n.spacing.sectionGap),onChange:e=>p("spacing","sectionGap",`${e}rem`),min:1,max:5,step:.25,help:(0,l.__)("Spacing between major form sections","vas-dinamico-forms")}),(0,c.jsx)("h4",{className:"eipsi-section-title",children:(0,l.__)("Spacing Scale","vas-dinamico-forms")}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Extra Small","vas-dinamico-forms"),value:parseFloat(n.spacing.xs),onChange:e=>p("spacing","xs",`${e}rem`),min:.25,max:2,step:.25}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Small","vas-dinamico-forms"),value:parseFloat(n.spacing.sm),onChange:e=>p("spacing","sm",`${e}rem`),min:.5,max:3,step:.25}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Medium","vas-dinamico-forms"),value:parseFloat(n.spacing.md),onChange:e=>p("spacing","md",`${e}rem`),min:1,max:4,step:.25}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Large","vas-dinamico-forms"),value:parseFloat(n.spacing.lg),onChange:e=>p("spacing","lg",`${e}rem`),min:1.5,max:5,step:.25}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Extra Large","vas-dinamico-forms"),value:parseFloat(n.spacing.xl),onChange:e=>p("spacing","xl",`${e}rem`),min:2,max:6,step:.25})]}),(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("ðŸ”² Borders & Radius","vas-dinamico-forms"),initialOpen:!1,children:[(0,c.jsx)("p",{className:"eipsi-panel-description",children:(0,l.__)("Configure border styles and corner radius for clinical aesthetics.","vas-dinamico-forms")}),(0,c.jsx)("h4",{className:"eipsi-section-title",children:(0,l.__)("Border Radius","vas-dinamico-forms")}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Small Radius","vas-dinamico-forms"),value:parseInt(n.borders.radiusSm),onChange:e=>p("borders","radiusSm",`${e}px`),min:0,max:20,step:1,help:(0,l.__)("Used for small elements","vas-dinamico-forms")}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Medium Radius","vas-dinamico-forms"),value:parseInt(n.borders.radiusMd),onChange:e=>p("borders","radiusMd",`${e}px`),min:0,max:30,step:1,help:(0,l.__)("Used for inputs and buttons","vas-dinamico-forms")}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Large Radius","vas-dinamico-forms"),value:parseInt(n.borders.radiusLg),onChange:e=>p("borders","radiusLg",`${e}px`),min:0,max:40,step:1,help:(0,l.__)("Used for containers and sections","vas-dinamico-forms")}),(0,c.jsx)("h4",{className:"eipsi-section-title",children:(0,l.__)("Border Width & Style","vas-dinamico-forms")}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Border Width","vas-dinamico-forms"),value:parseInt(n.borders.width),onChange:e=>p("borders","width",`${e}px`),min:0,max:10,step:1}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Focus Border Width","vas-dinamico-forms"),value:parseInt(n.borders.widthFocus),onChange:e=>p("borders","widthFocus",`${e}px`),min:0,max:10,step:1,help:(0,l.__)("Thicker border for focused elements","vas-dinamico-forms")}),(0,c.jsx)(r.SelectControl,{label:(0,l.__)("Border Style","vas-dinamico-forms"),value:n.borders.style,options:[{label:"Solid",value:"solid"},{label:"Dashed",value:"dashed"},{label:"Dotted",value:"dotted"},{label:"None",value:"none"}],onChange:e=>p("borders","style",e)})]}),(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("âœ¨ Shadows & Effects","vas-dinamico-forms"),initialOpen:!1,children:[(0,c.jsx)("p",{className:"eipsi-panel-description",children:(0,l.__)("Add depth and visual feedback with shadows.","vas-dinamico-forms")}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Small Shadow","vas-dinamico-forms"),value:n.shadows.sm,onChange:e=>p("shadows","sm",e),help:(0,l.__)("Subtle elevation for small elements","vas-dinamico-forms")}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Medium Shadow","vas-dinamico-forms"),value:n.shadows.md,onChange:e=>p("shadows","md",e),help:(0,l.__)("Standard card depth","vas-dinamico-forms")}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Large Shadow","vas-dinamico-forms"),value:n.shadows.lg,onChange:e=>p("shadows","lg",e),help:(0,l.__)("Prominent elevation","vas-dinamico-forms")}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Focus Shadow","vas-dinamico-forms"),value:n.shadows.focus,onChange:e=>p("shadows","focus",e),help:(0,l.__)("Ring effect for focused elements","vas-dinamico-forms")})]}),(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("âš¡ Hover & Interaction","vas-dinamico-forms"),initialOpen:!1,children:[(0,c.jsx)("p",{className:"eipsi-panel-description",children:(0,l.__)("Configure animation and interaction feedback.","vas-dinamico-forms")}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Transition Duration","vas-dinamico-forms"),value:n.interactivity.transitionDuration,onChange:e=>p("interactivity","transitionDuration",e),help:(0,l.__)("E.g., 0.2s or 200ms","vas-dinamico-forms")}),(0,c.jsx)(r.SelectControl,{label:(0,l.__)("Transition Timing","vas-dinamico-forms"),value:n.interactivity.transitionTiming,options:[{label:"Linear",value:"linear"},{label:"Ease",value:"ease"},{label:"Ease In",value:"ease-in"},{label:"Ease Out",value:"ease-out"},{label:"Ease In Out",value:"ease-in-out"}],onChange:e=>p("interactivity","transitionTiming",e)}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Hover Scale","vas-dinamico-forms"),value:n.interactivity.hoverScale,onChange:e=>p("interactivity","hoverScale",e),help:(0,l.__)("E.g., 1.02 for slight growth on hover","vas-dinamico-forms")}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Focus Outline Width","vas-dinamico-forms"),value:parseInt(n.interactivity.focusOutlineWidth),onChange:e=>p("interactivity","focusOutlineWidth",`${e}px`),min:0,max:10,step:1,help:(0,l.__)("Recommended: 2â€“3px for accessibility","vas-dinamico-forms")}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Focus Outline Offset","vas-dinamico-forms"),value:parseInt(n.interactivity.focusOutlineOffset),onChange:e=>p("interactivity","focusOutlineOffset",`${e}px`),min:0,max:10,step:1})]})]})};(0,s.registerBlockType)("vas-dinamico/form-container",{edit:function({attributes:e,setAttributes:a}){const{formId:i,submitButtonLabel:s,description:t,styleConfig:n,presetName:m,allowBackwardsNav:f}=e;(0,d.useEffect)(()=>{const i={};n||(i.styleConfig=p(e)),m||(i.presetName="Clinical Blue"),Object.keys(i).length&&a(i)},[]);const h=n||p(e),g=u(h),x=(0,o.useBlockProps)({className:"eipsi-form-container-editor",style:g}),b=(0,o.useInnerBlocksProps)({className:"eipsi-form-inner-blocks"},{allowedBlocks:["vas-dinamico/form-page","vas-dinamico/campo-texto","vas-dinamico/campo-textarea","vas-dinamico/campo-descripcion","vas-dinamico/campo-select","vas-dinamico/campo-radio","vas-dinamico/campo-multiple","vas-dinamico/campo-likert","vas-dinamico/vas-slider"],templateLock:!1,renderAppender:o.InnerBlocks.ButtonBlockAppender});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(o.InspectorControls,{children:[(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("Form Settings","vas-dinamico-forms"),initialOpen:!0,children:[(0,c.jsx)(r.TextControl,{label:(0,l.__)("Form ID/Slug","vas-dinamico-forms"),value:i,onChange:e=>a({formId:e}),help:(0,l.__)("Enter a unique identifier for the form (e.g., contact-form)","vas-dinamico-forms")}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Submit Button Label","vas-dinamico-forms"),value:s,onChange:e=>a({submitButtonLabel:e})}),(0,c.jsx)(r.TextareaControl,{label:(0,l.__)("Description (Optional)","vas-dinamico-forms"),value:t,onChange:e=>a({description:e}),help:(0,l.__)("Optional description text shown above the form","vas-dinamico-forms")})]}),(0,c.jsx)(r.PanelBody,{title:(0,l.__)("Navigation Settings","vas-dinamico-forms"),initialOpen:!1,children:(0,c.jsx)(r.ToggleControl,{label:(0,l.__)("Allow backwards navigation","vas-dinamico-forms"),checked:!!f,onChange:e=>a({allowBackwardsNav:!!e}),help:(0,l.__)('When disabled, the "Previous" button will be hidden on all pages.',"vas-dinamico-forms")})}),(0,c.jsx)(v,{styleConfig:h,setStyleConfig:e=>{a({styleConfig:e})},presetName:m||"Clinical Blue",setPresetName:e=>a({presetName:e})})]}),(0,c.jsx)("div",{...x,children:(0,c.jsxs)("div",{className:"eipsi-form-container-preview",children:[!i&&(0,c.jsx)("div",{className:"eipsi-form-placeholder",children:(0,c.jsxs)("div",{className:"components-placeholder",children:[(0,c.jsx)("div",{className:"components-placeholder__label",children:(0,l.__)("EIPSI Form Container","vas-dinamico-forms")}),(0,c.jsx)("div",{className:"components-placeholder__instructions",children:(0,l.__)("Please enter a Form ID in the block settings to get started.","vas-dinamico-forms")})]})}),i&&(0,c.jsxs)("div",{className:"eipsi-form-preview-wrapper",children:[(0,c.jsxs)("div",{className:"form-header",children:[(0,c.jsx)("h3",{className:"form-title",children:i.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}),t&&(0,c.jsx)("p",{className:"form-description",children:t})]}),(0,c.jsx)("div",{...b}),(0,c.jsx)("div",{className:"form-footer",children:(0,c.jsx)("button",{type:"button",className:"eipsi-submit-button",disabled:!0,children:s||(0,l.__)("Submit","vas-dinamico-forms")})})]})]})})]})},save:function({attributes:e}){const{formId:a,submitButtonLabel:i,description:s,className:r,styleConfig:l,presetName:t,allowBackwardsNav:n}=e,d=u(l||p(e)),m=o.useBlockProps.save({className:"vas-dinamico-form eipsi-form "+(r||""),style:d,"data-preset":t||"Clinical Blue"}),f=o.useInnerBlocksProps.save({className:"eipsi-form eipsi-form-content"});return(0,c.jsxs)("div",{...m,children:[(0,c.jsxs)("header",{className:"eipsi-header",children:[(0,c.jsx)("h2",{children:s||"Formulario"}),(0,c.jsx)("button",{type:"button",className:"eipsi-toggle",id:"eipsi-theme-toggle","aria-label":"Toggle dark mode",children:"ðŸŒ™ Nocturno"})]}),(0,c.jsxs)("form",{className:"vas-form eipsi-form-element","data-form-id":a,"data-allow-backwards-nav":n?"true":"false",children:[(0,c.jsx)("input",{type:"hidden",name:"form_id",value:a}),(0,c.jsx)("input",{type:"hidden",name:"form_action",value:"vas_dinamico_submit_form"}),(0,c.jsx)("input",{type:"hidden",name:"eipsi_nonce",value:""}),(0,c.jsx)("input",{type:"hidden",className:"eipsi-device-placeholder",name:"device"}),(0,c.jsx)("input",{type:"hidden",className:"eipsi-browser-placeholder",name:"browser"}),(0,c.jsx)("input",{type:"hidden",className:"eipsi-os-placeholder",name:"os"}),(0,c.jsx)("input",{type:"hidden",className:"eipsi-screen-placeholder",name:"screen_width"}),(0,c.jsx)("input",{type:"hidden",className:"eipsi-start-time",name:"form_start_time"}),(0,c.jsx)("input",{type:"hidden",className:"eipsi-end-time",name:"form_end_time"}),(0,c.jsx)("input",{type:"hidden",className:"eipsi-current-page",name:"current_page",value:"1"}),(0,c.jsx)("div",{...f}),(0,c.jsxs)("div",{className:"form-navigation",children:[n&&(0,c.jsx)("div",{className:"form-nav-left",children:(0,c.jsx)("button",{type:"button",className:"eipsi-prev-button is-hidden","data-testid":"prev-button","aria-label":"Ir a la pÃ¡gina anterior",children:"Anterior"})}),(0,c.jsxs)("div",{className:"form-nav-right",children:[(0,c.jsx)("button",{type:"button",className:"eipsi-next-button","data-testid":"next-button","aria-label":"Ir a la siguiente pÃ¡gina",children:"Siguiente"}),(0,c.jsx)("button",{type:"submit",className:"eipsi-submit-button is-hidden","data-testid":"submit-button","aria-label":"Enviar el formulario",children:i||"Enviar"})]})]}),(0,c.jsxs)("div",{className:"form-progress",children:["PÃ¡gina ",(0,c.jsx)("span",{className:"current-page",children:"1"})," de"," ",(0,c.jsx)("span",{className:"total-pages",children:"?"})]})]}),(0,c.jsx)("noscript",{children:(0,c.jsx)("style",{children:".eipsi-header .eipsi-toggle { display: none !important; }"})})]})}});const b=window.wp.data;(0,s.registerBlockType)("vas-dinamico/form-page",{edit:function({attributes:e,setAttributes:a,clientId:i}){const{title:s,pageIndex:t,pageType:n,enableRestartButton:m,restartButtonLabel:p}=e,u=(0,b.useSelect)(e=>{const{getBlockRootClientId:a,getBlockOrder:s,getBlock:o}=e("core/block-editor"),r=a(i),l=((r?s(r):s())||[]).filter(e=>{const a=o(e);return"vas-dinamico/form-page"===a?.name}).indexOf(i);return-1===l?null:l+1},[i]);(0,d.useEffect)(()=>{u&&u!==t&&a({pageIndex:u})},[u,t,a]);const f=u||t||1,h=(0,o.useBlockProps)({className:"eipsi-page-editor"}),g=(0,o.useInnerBlocksProps)({className:"eipsi-page-content-editor"},{allowedBlocks:["core/paragraph","core/heading","core/html","core/spacer","core/separator","core/group","core/columns","core/column","core/list","core/list-item","core/image","core/buttons","core/button","vas-dinamico/campo-texto","vas-dinamico/campo-textarea","vas-dinamico/campo-descripcion","vas-dinamico/campo-select","vas-dinamico/campo-radio","vas-dinamico/campo-multiple","vas-dinamico/campo-likert","vas-dinamico/vas-slider"],templateLock:!1,renderAppender:void 0}),x="thank_you"===n;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.InspectorControls,{children:(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("Page Settings","vas-dinamico-forms"),children:[(0,c.jsx)(r.ToggleControl,{label:(0,l.__)("Thank-You Page","vas-dinamico-forms"),help:(0,l.__)("Mark this page as the thank-you/completion page. It will be shown after form submission.","vas-dinamico-forms"),checked:x,onChange:e=>a({pageType:e?"thank_you":"standard"})}),!x&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.TextControl,{label:(0,l.__)("Page Title (Optional)","vas-dinamico-forms"),value:s,onChange:e=>a({title:e}),help:(0,l.__)("Enter an optional title for this page (e.g., Personal Information)","vas-dinamico-forms")}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Page Number","vas-dinamico-forms"),type:"number",value:f,help:(0,l.__)("This page number updates automatically based on block order.","vas-dinamico-forms"),disabled:!0})]}),x&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.TextControl,{label:(0,l.__)("Thank-You Title","vas-dinamico-forms"),value:s,onChange:e=>a({title:e}),placeholder:"Â¡Gracias por completar el formulario!",help:(0,l.__)("Title shown after form submission","vas-dinamico-forms")}),(0,c.jsx)(r.ToggleControl,{label:(0,l.__)("Show Restart Button","vas-dinamico-forms"),checked:!!m,onChange:e=>a({enableRestartButton:!!e}),help:(0,l.__)("Add a button to start a new form submission","vas-dinamico-forms")}),m&&(0,c.jsx)(r.TextControl,{label:(0,l.__)("Restart Button Label","vas-dinamico-forms"),value:p,onChange:e=>a({restartButtonLabel:e})})]})]})}),(0,c.jsx)("div",{...h,children:(0,c.jsxs)("div",{className:"eipsi-page-preview",children:[(0,c.jsx)("div",{className:"page-header",children:x?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"page-badge page-badge--thank-you",children:(0,l.__)("Thank-You Page","vas-dinamico-forms")}),s&&(0,c.jsx)("h3",{className:"eipsi-page-title",children:s}),!s&&(0,c.jsx)("p",{className:"page-placeholder-text",children:(0,l.__)("Add a thank-you title in the block settings","vas-dinamico-forms")})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("span",{className:"page-badge",children:[(0,l.__)("Page","vas-dinamico-forms")," ",f]}),s&&(0,c.jsx)("h3",{className:"eipsi-page-title",children:s}),!s&&(0,c.jsx)("p",{className:"page-placeholder-text",children:(0,l.__)("Add a page title in the block settings (optional)","vas-dinamico-forms")})]})}),(0,c.jsx)("div",{...g})]})})]})},save:function({attributes:e}){const{title:a,pageIndex:i,className:s,pageType:r,enableRestartButton:t,restartButtonLabel:n}=e,d="thank_you"===r,m=o.useBlockProps.save({className:`eipsi-page ${d?"eipsi-thank-you-page-block":""} ${s||""}`.trim(),"data-page":d?"thank-you":i,"data-page-type":d?"thank_you":"standard",style:{display:d||1!==i?"none":void 0}}),p=o.useInnerBlocksProps.save({className:"eipsi-page-content"});return(0,c.jsxs)("div",{...m,children:[a&&(0,c.jsx)("h3",{className:"eipsi-page-title",children:a}),(0,c.jsx)("div",{...p}),d&&t&&(0,c.jsx)("div",{className:"eipsi-thank-you-restart",children:(0,c.jsx)("button",{type:"button",className:"eipsi-restart-button","data-action":"restart","data-testid":"thank-you-restart-button",children:n||(0,l.__)("Comenzar de nuevo","vas-dinamico-forms")})})]})}});const _=({attributes:e,setAttributes:a,showPlaceholder:i=!0})=>{const{fieldName:s,label:o,required:t,placeholder:n,helperText:d}=e;return(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("Field Settings","vas-dinamico-forms"),initialOpen:!0,children:[(0,c.jsx)(r.TextControl,{label:(0,l.__)("Field Name / Slug","vas-dinamico-forms"),value:s||"",onChange:e=>a({fieldName:e}),help:(0,l.__)("Used as the input name attribute (e.g., full_name)","vas-dinamico-forms")}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Label","vas-dinamico-forms"),value:o||"",onChange:e=>a({label:e})}),(0,c.jsx)(r.ToggleControl,{label:(0,l.__)("Required field","vas-dinamico-forms"),checked:!!t,onChange:e=>a({required:!!e})}),i&&(0,c.jsx)(r.TextControl,{label:(0,l.__)("Placeholder","vas-dinamico-forms"),value:n||"",onChange:e=>a({placeholder:e})}),(0,c.jsx)(r.TextareaControl,{label:(0,l.__)("Helper text","vas-dinamico-forms"),value:d||"",onChange:e=>a({helperText:e}),help:(0,l.__)("Displayed below the field to provide additional guidance.","vas-dinamico-forms")})]})},j=[{label:(0,l.__)("Text","vas-dinamico-forms"),value:"text"},{label:(0,l.__)("Email","vas-dinamico-forms"),value:"email"},{label:(0,l.__)("Number","vas-dinamico-forms"),value:"number"},{label:(0,l.__)("Telephone","vas-dinamico-forms"),value:"tel"},{label:(0,l.__)("URL","vas-dinamico-forms"),value:"url"},{label:(0,l.__)("Date","vas-dinamico-forms"),value:"date"}],y=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})},N=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})};(0,s.registerBlockType)("vas-dinamico/campo-texto",{edit:function({attributes:e,setAttributes:a}){const{fieldName:i,label:s,required:t,placeholder:n,helperText:d,fieldType:m}=e,p=i&&""!==i.trim()?i.trim():void 0,u=(0,o.useBlockProps)({className:"form-group eipsi-field eipsi-text-field","data-field-name":p,"data-required":t?"true":"false","data-field-type":m||"text"}),f=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(p),h=s&&""!==s.trim()?s:(0,l.__)("Campo de texto","vas-dinamico-forms");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(o.InspectorControls,{children:[(0,c.jsx)(_,{attributes:e,setAttributes:a}),(0,c.jsx)(r.PanelBody,{title:(0,l.__)("Text Field Options","vas-dinamico-forms"),initialOpen:!1,children:(0,c.jsx)(r.SelectControl,{label:(0,l.__)("Input type","vas-dinamico-forms"),value:m,options:j,onChange:e=>a({fieldType:e})})})]}),(0,c.jsxs)("div",{...u,children:[(0,c.jsx)("label",{className:t?"required":void 0,htmlFor:f,children:h}),(0,c.jsx)("input",{type:m||"text",name:p,id:f,placeholder:n||"",required:t,"data-required":t?"true":"false","data-field-type":m||"text",disabled:!0}),y(d),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})]})},save:function({attributes:e}){const{fieldName:a,label:i,required:s,placeholder:r,helperText:l,fieldType:t}=e,n=a&&""!==a.trim()?a.trim():void 0,d=o.useBlockProps.save({className:"form-group eipsi-field eipsi-text-field","data-field-name":n,"data-required":s?"true":"false","data-field-type":t||"text"}),m=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(n),p=t||"text";return(0,c.jsxs)("div",{...d,children:[i&&(0,c.jsx)("label",{className:s?"required":void 0,htmlFor:m,children:i}),(0,c.jsx)("input",{type:p,name:n,id:m,placeholder:r||"",required:s,"data-required":s?"true":"false","data-field-type":p}),N(l),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})}});const C=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})},B=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})};(0,s.registerBlockType)("vas-dinamico/campo-textarea",{edit:function({attributes:e,setAttributes:a}){const{fieldName:i,label:s,required:t,placeholder:n,helperText:d,rows:m}=e,p=i&&""!==i.trim()?i.trim():void 0,u=(0,o.useBlockProps)({className:"form-group eipsi-field eipsi-textarea-field","data-field-name":p,"data-required":t?"true":"false","data-field-type":"textarea"}),f=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(p),h=s||(0,l.__)("Campo textarea","vas-dinamico-forms"),g=Number(m)||4;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(o.InspectorControls,{children:[(0,c.jsx)(_,{attributes:e,setAttributes:a}),(0,c.jsx)(r.PanelBody,{title:(0,l.__)("Textarea Options","vas-dinamico-forms"),initialOpen:!1,children:(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Rows","vas-dinamico-forms"),value:g,onChange:e=>a({rows:Number(e)||4}),min:2,max:12})})]}),(0,c.jsxs)("div",{...u,children:[(0,c.jsx)("label",{className:t?"required":void 0,htmlFor:f,children:h}),(0,c.jsx)("textarea",{name:p,id:f,placeholder:n||"",required:t,rows:g,"data-required":t?"true":"false","data-field-type":"textarea",disabled:!0}),C(d),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})]})},save:function({attributes:e}){const{fieldName:a,label:i,required:s,placeholder:r,helperText:l,rows:t}=e,n=a&&""!==a.trim()?a.trim():void 0,d=o.useBlockProps.save({className:"form-group eipsi-field eipsi-textarea-field","data-field-name":n,"data-required":s?"true":"false","data-field-type":"textarea"}),m=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(n),p=Number(t)||4;return(0,c.jsxs)("div",{...d,children:[i&&(0,c.jsx)("label",{className:s?"required":void 0,htmlFor:m,children:i}),(0,c.jsx)("textarea",{name:n,id:m,placeholder:r||"",required:s,rows:p,"data-required":s?"true":"false","data-field-type":"textarea"}),B(l),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})}});const w=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})},S=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})};(0,s.registerBlockType)("vas-dinamico/campo-descripcion",{edit:function({attributes:e,setAttributes:a}){const{fieldName:i,label:s,required:r,placeholder:t,helperText:n}=e,d=i&&""!==i.trim()?i.trim():void 0,m=(0,o.useBlockProps)({className:"form-group eipsi-field eipsi-description-field","data-field-name":d,"data-required":r?"true":"false","data-field-type":"description"}),p=s||(0,l.__)("Campo descripciÃ³n","vas-dinamico-forms");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.InspectorControls,{children:(0,c.jsx)(_,{attributes:e,setAttributes:a})}),(0,c.jsxs)("div",{...m,children:[p&&(0,c.jsx)("span",{className:r?"required":void 0,children:p}),t&&(0,c.jsx)("p",{className:"description-placeholder",children:t}),w(n),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})]})},save:function({attributes:e}){const{fieldName:a,label:i,required:s,placeholder:r,helperText:l}=e,t=a&&""!==a.trim()?a.trim():void 0,n=o.useBlockProps.save({className:"form-group eipsi-field eipsi-description-field","data-field-name":t,"data-required":s?"true":"false","data-field-type":"description"});return(0,c.jsxs)("div",{...n,children:[i&&(0,c.jsx)("span",{className:s?"required":void 0,children:i}),r&&(0,c.jsx)("p",{className:"description-placeholder",children:r}),S(l),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})}});const k=({attributes:e,setAttributes:a,options:i=[],clientId:s,mode:o="discrete"})=>{const{conditionalLogic:t}=e,[n,m]=(0,d.useState)({}),p=function(e){return e?Array.isArray(e)?{enabled:!0,rules:e.map((e,a)=>({id:e.id||`rule-legacy-${a}`,matchValue:e.value||e.matchValue||"",action:e.action||"goToPage",targetPage:e.targetPage||null})),defaultAction:"nextPage"}:"object"==typeof e?{enabled:!1!==e.enabled,rules:(e.rules||[]).map((e,a)=>({id:e.id||`rule-${a}`,matchValue:e.value||e.matchValue||"",action:e.action||"goToPage",targetPage:e.targetPage||null})),defaultAction:e.defaultAction||"nextPage",defaultTargetPage:e.defaultTargetPage||null}:{enabled:!1,rules:[],defaultAction:"nextPage"}:{enabled:!1,rules:[],defaultAction:"nextPage"}}(t),u="numeric"===o,{pages:f,hasPages:h}=(0,b.useSelect)(e=>{const{getSelectedBlock:a,getBlockParentsByBlockName:i,getBlock:o}=e("core/block-editor");try{const e=s?o(s):a();if(!e)return{pages:[],hasPages:!1};const r=i(e.clientId,"vas-dinamico/form-container");if(0===r.length)return{pages:[],hasPages:!1};const l=o(r[r.length-1]);if(!l||!l.innerBlocks)return{pages:[],hasPages:!1};const t=l.innerBlocks.filter(e=>"vas-dinamico/form-page"===e.name).map((e,a)=>({index:a+1,title:e.attributes.title||"",clientId:e.clientId}));return{pages:t,hasPages:t.length>0}}catch(e){return{pages:[],hasPages:!1}}},[s]);(0,d.useEffect)(()=>{p.enabled&&p.rules.length>0&&g(p.rules)},[p.enabled,p.rules,i,f]);const g=e=>{const a={},i=new Set;e.forEach((e,s)=>{u?(e.operator||(a[s]=(0,l.__)("Selecciona un operador","vas-dinamico-forms")),void 0!==e.threshold&&null!==e.threshold&&""!==e.threshold||(a[s]=(0,l.__)("Introduce un valor numÃ©rico","vas-dinamico-forms"))):(i.has(e.matchValue)?a[s]=(0,l.__)("Este valor ya estÃ¡ siendo usado en otra regla","vas-dinamico-forms"):e.matchValue&&i.add(e.matchValue),e.matchValue||(a[s]=(0,l.__)("Selecciona un valor para esta regla","vas-dinamico-forms"))),"goToPage"===e.action&&(!e.targetPage||e.targetPage<1)&&(a[s]=(0,l.__)("Selecciona una pÃ¡gina vÃ¡lida","vas-dinamico-forms"))}),m(a)},x=(e,i,s)=>{const o=[...p.rules];o[e]={...o[e],[i]:s},a({conditionalLogic:{...p,rules:o}})},v=(e,i=null)=>{const s={...p,defaultAction:e};"goToPage"===e&&i?s.defaultTargetPage=parseInt(i):delete s.defaultTargetPage,a({conditionalLogic:s})},_=()=>{const e=[];return 0===f.length?[{label:(0,l.__)("No hay pÃ¡ginas disponibles","vas-dinamico-forms"),value:"",disabled:!0}]:(f.forEach(a=>{const i=a.title?`${(0,l.__)("PÃ¡gina","vas-dinamico-forms")} ${a.index} â€“ ${a.title}`:`${(0,l.__)("PÃ¡gina","vas-dinamico-forms")} ${a.index}`;e.push({label:i,value:a.index.toString()})}),e)},j=()=>{const e=[{label:(0,l.__)("Siguiente pÃ¡gina","vas-dinamico-forms"),value:"nextPage"},{label:(0,l.__)("Finalizar formulario","vas-dinamico-forms"),value:"submit"}];return f.length>0&&e.splice(1,0,{label:(0,l.__)("Ir a pÃ¡gina especÃ­ficaâ€¦","vas-dinamico-forms"),value:"goToPage"}),e},y=(u||i.length>0)&&h;return(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("LÃ³gica Condicional","vas-dinamico-forms"),initialOpen:!1,children:[(0,c.jsx)("div",{className:"conditional-logic-toggle-wrapper",children:(0,c.jsx)(r.ToggleControl,{label:(0,l.__)("Habilitar lÃ³gica condicional","vas-dinamico-forms"),checked:p.enabled||!1,onChange:e=>{e?a({conditionalLogic:{enabled:!0,rules:[],defaultAction:"nextPage"}}):(a({conditionalLogic:null}),m({}))},help:(0,l.__)("Permite configurar el comportamiento del formulario segÃºn las respuestas del participante.","vas-dinamico-forms")})}),p.enabled&&(0,c.jsxs)("div",{className:"conditional-logic-panel",children:[!h&&(0,c.jsx)("div",{className:"conditional-logic-warning",children:(0,c.jsx)("p",{children:(0,l.__)("Para configurar la lÃ³gica condicional, primero debes agregar pÃ¡ginas al formulario.","vas-dinamico-forms")})}),!u&&0===i.length&&(0,c.jsx)("div",{className:"conditional-logic-warning",children:(0,c.jsx)("p",{children:(0,l.__)("Para configurar la lÃ³gica condicional, primero debes agregar opciones a este campo.","vas-dinamico-forms")})}),y&&0===p.rules.length&&(0,c.jsxs)("div",{className:"conditional-logic-empty-state",children:[(0,c.jsx)(r.Dashicon,{icon:"randomize"}),(0,c.jsx)("p",{children:(0,l.__)("No hay reglas configuradas. Las reglas permiten redirigir al participante a diferentes pÃ¡ginas segÃºn su respuesta.","vas-dinamico-forms")})]}),p.rules.map((e,s)=>(0,c.jsxs)("div",{className:"conditional-logic-rule",children:[(0,c.jsx)("div",{className:"conditional-logic-rule-header",children:(0,c.jsxs)("h4",{children:[(0,l.__)("Regla","vas-dinamico-forms")," ",s+1]})}),u?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.SelectControl,{label:(0,l.__)("Cuando el valor del slider sea","vas-dinamico-forms"),value:e.operator||">=",options:[{label:(0,l.__)("Mayor o igual (â‰¥)","vas-dinamico-forms"),value:">="},{label:(0,l.__)("Menor o igual (â‰¤)","vas-dinamico-forms"),value:"<="},{label:(0,l.__)("Mayor que (>)","vas-dinamico-forms"),value:">"},{label:(0,l.__)("Menor que (<)","vas-dinamico-forms"),value:"<"},{label:(0,l.__)("Igual a (=)","vas-dinamico-forms"),value:"=="}],onChange:e=>x(s,"operator",e)}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Valor umbral","vas-dinamico-forms"),type:"number",value:void 0!==e.threshold?e.threshold:"",onChange:e=>x(s,"threshold",""!==e?parseFloat(e):""),help:(0,l.__)("El valor con el que se compararÃ¡ la respuesta del slider","vas-dinamico-forms")})]}):(0,c.jsx)(r.SelectControl,{label:(0,l.__)("Cuando el participante seleccione","vas-dinamico-forms"),value:e.matchValue||"",options:0===i.length?[{label:(0,l.__)("No hay opciones disponibles","vas-dinamico-forms"),value:"",disabled:!0}]:[{label:(0,l.__)("Selecciona un valorâ€¦","vas-dinamico-forms"),value:""},...i.map(e=>({label:e,value:e}))],onChange:e=>x(s,"matchValue",e)}),(0,c.jsx)(r.SelectControl,{label:(0,l.__)("Entonces","vas-dinamico-forms"),value:"goToPage"===e.action?"goToPage":e.action,options:j(),onChange:e=>{"nextPage"===e?(x(s,"action","nextPage"),x(s,"targetPage",null)):"submit"===e?(x(s,"action","submit"),x(s,"targetPage",null)):"goToPage"===e&&(x(s,"action","goToPage"),x(s,"targetPage",f[0]?.index||1))}}),"goToPage"===e.action&&(0,c.jsx)(r.SelectControl,{label:(0,l.__)("Ir a la pÃ¡gina","vas-dinamico-forms"),value:e.targetPage?e.targetPage.toString():"",options:_(),onChange:e=>x(s,"targetPage",parseInt(e))}),n[s]&&(0,c.jsxs)("div",{className:"conditional-logic-validation-error",children:[(0,c.jsx)(r.Dashicon,{icon:"warning"}),(0,c.jsx)("span",{children:n[s]})]}),(0,c.jsx)("div",{className:"conditional-logic-rule-actions",children:(0,c.jsx)(r.Button,{isDestructive:!0,isSmall:!0,onClick:()=>(e=>{const i=p.rules.filter((a,i)=>i!==e);0===i.length?(a({conditionalLogic:null}),m({})):a({conditionalLogic:{...p,rules:i}})})(s),children:(0,l.__)("Eliminar regla","vas-dinamico-forms")})})]},e.id||s)),y&&p.rules.length>0&&(0,c.jsxs)("div",{className:"conditional-logic-default-action",children:[(0,c.jsx)("h4",{children:(0,l.__)("AcciÃ³n predeterminada","vas-dinamico-forms")}),(0,c.jsx)("p",{style:{fontSize:"12px",color:"#64748b",marginBottom:"12px"},children:(0,l.__)("Define quÃ© sucede cuando el participante selecciona un valor sin regla configurada.","vas-dinamico-forms")}),(0,c.jsx)(r.SelectControl,{label:(0,l.__)("Para otros valores","vas-dinamico-forms"),value:"goToPage"===p.defaultAction?"goToPage":p.defaultAction||"nextPage",options:j(),onChange:e=>{"goToPage"===e?v(e,f[0]?.index||1):v(e)}}),"goToPage"===p.defaultAction&&(0,c.jsx)(r.SelectControl,{label:(0,l.__)("Ir a la pÃ¡gina","vas-dinamico-forms"),value:p.defaultTargetPage?p.defaultTargetPage.toString():f[0]?.index.toString()||"1",options:_(),onChange:e=>v("goToPage",e)})]}),(0,c.jsx)(r.Button,{isPrimary:!0,isSmall:!0,onClick:()=>{const e=u?{id:`rule-${Date.now()}`,operator:">=",threshold:0,action:"goToPage",targetPage:f.length>0?f[0].index:1}:{id:`rule-${Date.now()}`,matchValue:"",action:"goToPage",targetPage:f.length>0?f[0].index:1},i=[...p.rules,e];a({conditionalLogic:{...p,rules:i}})},disabled:!y,className:"conditional-logic-add-rule-button",children:(0,l.__)("+ Agregar regla","vas-dinamico-forms")}),y&&(0,c.jsx)("div",{className:"conditional-logic-info",style:{marginTop:"16px"},children:(0,c.jsx)("p",{children:(0,l.__)("Las reglas se evalÃºan en orden. La primera regla que coincida determinarÃ¡ la navegaciÃ³n del formulario.","vas-dinamico-forms")})})]})]})};function T(e){return e?e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"):""}function F(e){if(!e||""===e.trim())return[];const a=T(e);return a.includes("\n")?a.split("\n").map(e=>e.trim()).filter(e=>""!==e):function(e){const a=[];let i="",s=!1,o=0;for(;o<e.length;){const r=e[o],l=e[o+1];if('"'!==r){if(","===r&&!s){const e=i.trim();""!==e&&a.push(e),i="",o++;continue}i+=r,o++}else{if(s&&'"'===l){i+='"',o+=2;continue}s=!s,o++}}const r=i.trim();return""!==r&&a.push(r),a}(a)}const P=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})},I=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})};(0,s.registerBlockType)("vas-dinamico/campo-select",{edit:function({attributes:e,setAttributes:a,clientId:i}){const{fieldName:s,label:t,required:n,placeholder:d,helperText:m,options:p,conditionalLogic:u}=e,f=s&&""!==s.trim()?s.trim():void 0,h=u&&(Array.isArray(u)?u.length>0:u.enabled&&u.rules&&u.rules.length>0),g=(0,o.useBlockProps)({className:"form-group eipsi-field eipsi-select-field","data-field-name":f,"data-required":n?"true":"false","data-field-type":"select","data-conditional-logic":h?"true":void 0}),x=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(f),v=t&&""!==t.trim()?t:(0,l.__)("Campo de selecciÃ³n","vas-dinamico-forms"),b=F(p);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(o.InspectorControls,{children:[(0,c.jsx)(_,{attributes:e,setAttributes:a}),(0,c.jsx)(k,{attributes:e,setAttributes:a,options:b,clientId:i}),(0,c.jsx)(r.PanelBody,{title:(0,l.__)("Select Options","vas-dinamico-forms"),initialOpen:!0,children:(0,c.jsx)(r.TextareaControl,{label:(0,l.__)("Options (one per line)","vas-dinamico-forms"),value:p||"",onChange:e=>{a({options:T(e)})},help:(0,l.__)("Enter one option per line. Options can contain commas, periods, quotes, etc.","vas-dinamico-forms"),placeholder:"SÃ­, absolutamente\nSÃ­, pero no tan frecuente\nNo, no ocurre a menudo\nNunca",rows:8})})]}),(0,c.jsxs)("div",{...g,children:[(0,c.jsx)("label",{className:n?"required":void 0,htmlFor:x,children:v}),(0,c.jsxs)("select",{name:f,id:x,required:n,"data-required":n?"true":"false","data-field-type":"select",disabled:!0,children:[d&&""!==d.trim()&&(0,c.jsx)("option",{value:"",children:d}),b.length>0?b.map((e,a)=>(0,c.jsx)("option",{value:e,children:e},a)):(0,c.jsx)("option",{value:"",children:(0,l.__)("Add options in the sidebar","vas-dinamico-forms")})]}),P(m),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})]})},save:function({attributes:e}){const{fieldName:a,label:i,required:s,placeholder:r,helperText:l,options:t,conditionalLogic:n}=e,d=a&&""!==a.trim()?a.trim():void 0,m=o.useBlockProps.save({className:"form-group eipsi-field eipsi-select-field","data-field-name":d,"data-required":s?"true":"false","data-field-type":"select","data-conditional-logic":n?JSON.stringify(n):void 0}),p=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(d),u=F(t);return(0,c.jsxs)("div",{...m,children:[i&&(0,c.jsx)("label",{className:s?"required":void 0,htmlFor:p,children:i}),(0,c.jsxs)("select",{name:d,id:p,required:s,"data-required":s?"true":"false","data-field-type":"select",children:[r&&""!==r.trim()&&(0,c.jsx)("option",{value:"",disabled:!0,selected:!0,children:r}),u.map((e,a)=>(0,c.jsx)("option",{value:e,children:e},a))]}),I(l),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})}});const A=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})},$=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})};(0,s.registerBlockType)("vas-dinamico/campo-radio",{edit:function({attributes:e,setAttributes:a,clientId:i}){const{fieldName:s,label:t,required:n,helperText:d,options:m,conditionalLogic:p}=e,u=s&&""!==s.trim()?s.trim():void 0,f=p&&(Array.isArray(p)?p.length>0:p.enabled&&p.rules&&p.rules.length>0),h=(0,o.useBlockProps)({className:"form-group eipsi-field eipsi-radio-field","data-field-name":u,"data-required":n?"true":"false","data-field-type":"radio","data-conditional-logic":f?"true":void 0}),g=t&&""!==t.trim()?t:(0,l.__)("Campo de opciones","vas-dinamico-forms"),x=F(m);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(o.InspectorControls,{children:[(0,c.jsx)(_,{attributes:e,setAttributes:a,showPlaceholder:!1}),(0,c.jsx)(k,{attributes:e,setAttributes:a,options:x,clientId:i}),(0,c.jsx)(r.PanelBody,{title:(0,l.__)("Radio Options","vas-dinamico-forms"),initialOpen:!0,children:(0,c.jsx)(r.TextareaControl,{label:(0,l.__)("Options (one per line)","vas-dinamico-forms"),value:m||"",onChange:e=>{a({options:T(e)})},help:(0,l.__)("IngresÃ¡ una opciÃ³n por lÃ­nea. Las comas dentro de una opciÃ³n son seguras y los listados antiguos separados por comas se convierten automÃ¡ticamente.","vas-dinamico-forms"),placeholder:"SÃ­, absolutamente\nSÃ­, pero no tan frecuente\nNo, no ocurre a menudo\nNunca",rows:8})})]}),(0,c.jsx)("div",{...h,children:(0,c.jsxs)("fieldset",{children:[(0,c.jsx)("legend",{className:n?"required":void 0,children:g}),(0,c.jsx)("ul",{className:"radio-list",children:x.length>0?x.map((e,a)=>{const i=((e,a="")=>{if(!e||""===e.trim())return;const i=e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-");return a?`field-${i}-${a}`:`field-${i}`})(u,a.toString());return(0,c.jsx)("li",{children:(0,c.jsxs)("label",{htmlFor:i,className:"radio-label-wrapper",children:[(0,c.jsx)("input",{type:"radio",name:u,id:i,value:e,required:n,"data-required":n?"true":"false","data-field-type":"radio",disabled:!0}),(0,c.jsx)("span",{className:"radio-label-text",children:e})]})},a)}):(0,c.jsx)("li",{className:"empty-state",children:(0,l.__)("Add options in the sidebar","vas-dinamico-forms")})}),A(d),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})})]})},save:function({attributes:e}){const{fieldName:a,label:i,required:s,helperText:r,options:l,conditionalLogic:t}=e,n=a&&""!==a.trim()?a.trim():void 0,d=o.useBlockProps.save({className:"form-group eipsi-field eipsi-radio-field","data-field-name":n,"data-required":s?"true":"false","data-field-type":"radio","data-conditional-logic":t?JSON.stringify(t):void 0}),m=F(l);return(0,c.jsx)("div",{...d,children:(0,c.jsxs)("fieldset",{children:[i&&(0,c.jsx)("legend",{className:s?"required":void 0,children:i}),(0,c.jsx)("ul",{className:"radio-list",children:m.map((e,a)=>{const i=((e,a="")=>{if(!e||""===e.trim())return;const i=e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-");return a?`field-${i}-${a}`:`field-${i}`})(n,a.toString());return(0,c.jsx)("li",{children:(0,c.jsxs)("label",{htmlFor:i,className:"radio-label-wrapper",children:[(0,c.jsx)("input",{type:"radio",name:n,id:i,value:e,required:s,"data-required":s?"true":"false","data-field-type":"radio"}),(0,c.jsx)("span",{className:"radio-label-text",children:e})]})},a)})}),$(r),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})})}});const q=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})},H=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})};(0,s.registerBlockType)("vas-dinamico/campo-multiple",{edit:function({attributes:e,setAttributes:a,clientId:i}){const{fieldName:s,label:t,required:n,helperText:d,options:m,conditionalLogic:p}=e,u=s&&""!==s.trim()?s.trim():void 0,f=p&&(Array.isArray(p)?p.length>0:p.enabled&&p.rules&&p.rules.length>0),h=(0,o.useBlockProps)({className:"form-group eipsi-field eipsi-checkbox-field","data-field-name":u,"data-required":n?"true":"false","data-field-type":"checkbox","data-conditional-logic":f?"true":void 0}),g=t&&""!==t.trim()?t:(0,l.__)("Campo de selecciÃ³n mÃºltiple","vas-dinamico-forms"),x=F(m);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(o.InspectorControls,{children:[(0,c.jsx)(_,{attributes:e,setAttributes:a,showPlaceholder:!1}),(0,c.jsx)(k,{attributes:e,setAttributes:a,options:x,clientId:i}),(0,c.jsx)(r.PanelBody,{title:(0,l.__)("Checkbox Options","vas-dinamico-forms"),initialOpen:!0,children:(0,c.jsx)(r.TextareaControl,{label:(0,l.__)("Options (one per line)","vas-dinamico-forms"),value:m||"",onChange:e=>{a({options:T(e)})},help:(0,l.__)("IngresÃ¡ una opciÃ³n por lÃ­nea. PodÃ©s escribir comas o signos de puntuaciÃ³n dentro de cada opciÃ³n; si pegÃ¡s una lista vieja separada por comas la convertimos sola.","vas-dinamico-forms"),placeholder:"SÃ­, absolutamente\nSÃ­, pero no tan frecuente\nNo, no ocurre a menudo\nNunca",rows:8})})]}),(0,c.jsx)("div",{...h,children:(0,c.jsxs)("fieldset",{children:[(0,c.jsx)("legend",{className:n?"required":void 0,children:g}),(0,c.jsx)("ul",{className:"checkbox-list",children:x.length>0?x.map((e,a)=>{const i=((e,a="")=>{if(!e||""===e.trim())return;const i=e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-");return a?`field-${i}-${a}`:`field-${i}`})(u,a.toString());return(0,c.jsx)("li",{children:(0,c.jsxs)("label",{htmlFor:i,className:"checkbox-label-wrapper",children:[(0,c.jsx)("input",{type:"checkbox",name:`${u}[]`,id:i,value:e,"data-required":n?"true":"false","data-field-type":"checkbox",disabled:!0}),(0,c.jsx)("span",{className:"checkbox-label-text",children:e})]})},a)}):(0,c.jsx)("li",{className:"empty-state",children:(0,l.__)("Add options in the sidebar","vas-dinamico-forms")})}),q(d),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})})]})},save:function({attributes:e}){const{fieldName:a,label:i,required:s,helperText:r,options:l,conditionalLogic:t}=e,n=a&&""!==a.trim()?a.trim():void 0,d=o.useBlockProps.save({className:"form-group eipsi-field eipsi-checkbox-field","data-field-name":n,"data-required":s?"true":"false","data-field-type":"checkbox","data-conditional-logic":t?JSON.stringify(t):void 0}),m=F(l);return(0,c.jsx)("div",{...d,children:(0,c.jsxs)("fieldset",{children:[i&&(0,c.jsx)("legend",{className:s?"required":void 0,children:i}),(0,c.jsx)("ul",{className:"checkbox-list",children:m.map((e,a)=>{const i=((e,a="")=>{if(!e||""===e.trim())return;const i=e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-");return a?`field-${i}-${a}`:`field-${i}`})(n,a.toString());return(0,c.jsx)("li",{children:(0,c.jsxs)("label",{htmlFor:i,className:"checkbox-label-wrapper",children:[(0,c.jsx)("input",{type:"checkbox",name:`${n}[]`,id:i,value:e,"data-required":s?"true":"false","data-field-type":"checkbox"}),(0,c.jsx)("span",{className:"checkbox-label-text",children:e})]})},a)})}),H(r),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})})}});const O=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})},z=e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`},V=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})},M=e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`};(0,s.registerBlockType)("vas-dinamico/campo-likert",{edit:function({attributes:e,setAttributes:a,clientId:i}){const{fieldKey:s,fieldName:t,label:n,required:m,helperText:p,minValue:u,maxValue:f,labels:h}=e;(0,d.useEffect)(()=>{if(!s){const e=`likert-${i.replace(/[^a-zA-Z0-9]/g,"")}`;a({fieldKey:e})}},[s,i,a]);const g=t&&""!==t.trim()?t.trim():s,x=(0,o.useBlockProps)({className:"form-group eipsi-field eipsi-likert-field","data-field-name":g,"data-required":m?"true":"false","data-field-type":"likert","data-min":u,"data-max":f}),v=n&&""!==n.trim()?n:(0,l.__)("Escala Likert","vas-dinamico-forms"),b=h&&""!==h.trim()?h.split(",").map(e=>e.trim()).filter(e=>""!==e):[],_=[];for(let e=u;e<=f;e++)_.push(e);const j=b.length>0&&b.length!==_.length;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(o.InspectorControls,{children:[(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("Field Settings","vas-dinamico-forms"),initialOpen:!0,children:[(0,c.jsx)(r.TextControl,{label:(0,l.__)("Field Name / Slug","vas-dinamico-forms"),value:t||"",onChange:e=>a({fieldName:e}),help:(0,l.__)("Used as the input name attribute (e.g., satisfaction)","vas-dinamico-forms")}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Label","vas-dinamico-forms"),value:n||"",onChange:e=>a({label:e})}),(0,c.jsx)(r.ToggleControl,{label:(0,l.__)("Required field","vas-dinamico-forms"),checked:!!m,onChange:e=>a({required:!!e})}),(0,c.jsx)(r.TextareaControl,{label:(0,l.__)("Helper text","vas-dinamico-forms"),value:p||"",onChange:e=>a({helperText:e}),help:(0,l.__)("Displayed below the field to provide additional guidance.","vas-dinamico-forms")})]}),(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("Likert Scale Options","vas-dinamico-forms"),initialOpen:!0,children:[(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Minimum Value","vas-dinamico-forms"),value:u,onChange:e=>{e<f&&a({minValue:e})},min:0,max:10,help:(0,l.__)("The lowest value in the scale","vas-dinamico-forms")}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Maximum Value","vas-dinamico-forms"),value:f,onChange:e=>{e>u&&a({maxValue:e})},min:1,max:10,help:(0,l.__)("The highest value in the scale","vas-dinamico-forms")}),(0,c.jsx)(r.TextareaControl,{label:(0,l.__)("Labels (comma-separated)","vas-dinamico-forms"),value:h||"",onChange:e=>a({labels:e}),help:(0,l.__)("Optional labels for each scale point. Must match the number of scale points.","vas-dinamico-forms")}),j&&(0,c.jsx)(r.Notice,{status:"warning",isDismissible:!1,children:
// translators: %1$d: number of labels, %2$d: number of scale points
// translators: %1$d: number of labels, %2$d: number of scale points
(0,l.__)("You have %1$d labels but %2$d scale points. Labels will be ignored if count doesn't match.","vas-dinamico-forms").replace("%1$d",b.length).replace("%2$d",_.length)})]})]}),(0,c.jsxs)("div",{...x,children:[n&&(0,c.jsx)("label",{htmlFor:g?`${z(g)}-label`:void 0,className:m?"required":void 0,children:v}),(0,c.jsx)("div",{className:"likert-scale likert-preview","data-scale":`${u}-${f}`,children:(0,c.jsx)("ul",{className:"likert-list",children:_.map((e,a)=>{const i=`${z(g)}-${e}`,s=b[a]||e.toString();return(0,c.jsx)("li",{className:"likert-item",children:(0,c.jsxs)("label",{htmlFor:i,className:"likert-label-wrapper",children:[(0,c.jsx)("input",{type:"radio",name:g,id:i,value:e,required:m,"data-required":m?"true":"false",disabled:!0}),(0,c.jsx)("span",{className:"likert-label-text",children:s})]})},e)})})}),O(p),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})]})},save:function({attributes:e}){const{fieldKey:a,fieldName:i,label:s,required:r,helperText:l,minValue:t,maxValue:n,labels:d}=e,m=i&&""!==i.trim()?i.trim():a,p=o.useBlockProps.save({className:"form-group eipsi-field eipsi-likert-field","data-field-name":m,"data-required":r?"true":"false","data-field-type":"likert","data-min":t,"data-max":n}),u=d&&""!==d.trim()?d.split(",").map(e=>e.trim()).filter(e=>""!==e):[],f=[];for(let e=t;e<=n;e++)f.push(e);return(0,c.jsxs)("div",{...p,children:[s&&(0,c.jsx)("label",{htmlFor:m?`${M(m)}-label`:void 0,className:r?"required":void 0,children:s}),(0,c.jsx)("div",{className:"likert-scale","data-scale":`${t}-${n}`,children:(0,c.jsx)("ul",{className:"likert-list",children:f.map((e,a)=>{const i=`${M(m)}-${e}`,s=u[a]||e.toString();return(0,c.jsx)("li",{className:"likert-item",children:(0,c.jsxs)("label",{htmlFor:i,className:"likert-label-wrapper",children:[(0,c.jsx)("input",{type:"radio",name:m,id:i,value:e,required:r,"data-required":r?"true":"false"}),(0,c.jsx)("span",{className:"likert-label-text",children:s})]})},e)})})}),V(l),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})}});const R=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})},L=(e,a=0)=>"number"!=typeof e||Number.isNaN(e)?a:e,W=(e,a,i)=>"number"!=typeof e||Number.isNaN(e)?(a+i)/2:i<=a?a:Math.min(Math.max(e,a),i),D=e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,c.jsx)("p",{className:"field-helper",children:a.map((e,i)=>(0,c.jsxs)("span",{children:[e,i<a.length-1&&(0,c.jsx)("br",{})]},i))})};(0,s.registerBlockType)("vas-dinamico/vas-slider",{edit:function({attributes:e,setAttributes:a,clientId:i}){const{fieldName:s,label:t,required:n,helperText:m,labels:p,minValue:u,maxValue:f,step:h,initialValue:g,showValue:x,labelStyle:v,labelAlignment:b,labelAlignmentPercent:_,labelSpacing:j,labelFontSize:y,valueFontSize:N,showLabelContainers:C,showValueContainer:B,boldLabels:w,showCurrentValue:S,valuePosition:T}=e;(0,d.useEffect)(()=>{if(void 0===_)if("number"!=typeof j||Number.isNaN(j)){if(void 0!==v||void 0!==b){let e=50;"justified"===b?e=0:"centered"===b?e=100:"simple"===v?e=30:"centered"===v&&(e=70),a({labelAlignmentPercent:e})}}else a({labelAlignmentPercent:j})},[]);const F=s&&""!==s.trim()?s.trim():void 0,P=(0,o.useBlockProps)({className:"form-group eipsi-field eipsi-vas-slider-field"+("below"===T?" vas-value-below":""),"data-field-name":F,"data-required":n?"true":"false","data-field-type":"vas-slider","data-value-position":T||"above"}),I=t&&""!==t.trim()?t:(0,l.__)("VAS Slider","vas-dinamico-forms"),A=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(F),$=h&&h>0?h:1,q=L(u,0),H=L(f,q+$),O=H>q?H:q+$;let z=50;Number.isFinite(_)?z=_:Number.isFinite(j)&&(z=j);const V=Math.min(Math.max(z,0),100),M=V/100,D=1-M,[E,G]=(0,d.useState)(W(L(g,q),q,O));(0,d.useEffect)(()=>{const e=L(g,q),i=W(e,q,O);i!==g&&a({initialValue:i})},[g,q,O,a]),(0,d.useEffect)(()=>{const e=L(g,q),a=W(e,q,O);a!==E&&G(a)},[g,q,O,E]);const U=p?p.split(",").map(e=>e.trim()).filter(Boolean):[],Z=U.length>0?U:[`${q}`,`${O}`],J=void 0!==S?S:!1!==x,Y=J&&A?`${A}-value`:void 0,K=(0,l.__)("Debe ser menor que el mÃ¡ximo. Si lo igualÃ¡s o superÃ¡s, ajustamos el rango automÃ¡ticamente.","vas-dinamico-forms"),X=(0,l.__)("Debe ser mayor que el mÃ­nimo. Si lo igualÃ¡s o bajÃ¡s demasiado, movemos el mÃ­nimo para mantener el slider usable.","vas-dinamico-forms");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(o.InspectorControls,{children:[(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("Field Settings","vas-dinamico-forms"),initialOpen:!0,children:[(0,c.jsx)(r.TextControl,{label:(0,l.__)("Field Name / Slug","vas-dinamico-forms"),value:s||"",onChange:e=>a({fieldName:e}),help:(0,l.__)("Used as the input name attribute (e.g., pain_level)","vas-dinamico-forms")}),(0,c.jsx)(r.TextControl,{label:(0,l.__)("Label","vas-dinamico-forms"),value:t||"",onChange:e=>a({label:e})}),(0,c.jsx)(r.ToggleControl,{label:(0,l.__)("Required field","vas-dinamico-forms"),checked:!!n,onChange:e=>a({required:!!e})}),(0,c.jsx)(r.TextareaControl,{label:(0,l.__)("Helper text","vas-dinamico-forms"),value:m||"",onChange:e=>a({helperText:e}),help:(0,l.__)("Displayed below the field to provide additional guidance.","vas-dinamico-forms")})]}),(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("VAS Slider Options","vas-dinamico-forms"),initialOpen:!0,children:[(0,c.jsx)(r.TextareaControl,{label:(0,l.__)("Labels (comma-separated)","vas-dinamico-forms"),value:p||"",onChange:e=>a({labels:e}),help:(0,l.__)('Los labels visibles salen de esta lista (ej.: "100, 0" o "Muy mal,Mal,Neutral,Bien,Muy bien"). Si lo dejÃ¡s vacÃ­o, mostramos solo los extremos numÃ©ricos.',"vas-dinamico-forms")}),(0,c.jsx)(r.__experimentalNumberControl,{label:(0,l.__)("Minimum Value","vas-dinamico-forms"),value:u,onChange:e=>{const i=parseFloat(e);if(Number.isNaN(i))return;let s="number"!=typeof f||Number.isNaN(f)?i+$:f;i>=s&&(s=i+$);const o=W(L(g,i),i,s),r=W(E,i,s);a({minValue:i,maxValue:s,initialValue:o}),G(r)},min:-1e3,max:1e3,step:"any",help:K}),(0,c.jsx)(r.__experimentalNumberControl,{label:(0,l.__)("Maximum Value","vas-dinamico-forms"),value:f,onChange:e=>{const i=parseFloat(e);if(Number.isNaN(i))return;let s="number"!=typeof u||Number.isNaN(u)?i-$:u;i<=s&&(s=i-$);const o=W(L(g,s),s,i),r=W(E,s,i);a({minValue:s,maxValue:i,initialValue:o}),G(r)},min:-1e3,max:1e3,step:"any",help:X}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Step","vas-dinamico-forms"),value:h&&h>0?h:1,onChange:e=>{const i="number"==typeof e?e:parseFloat(e);Number.isNaN(i)||a({step:parseFloat((i>0?i:.1).toFixed(2))})},min:.1,max:10,step:.1,help:(0,l.__)("Increment for each slider movement","vas-dinamico-forms")}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Initial Value","vas-dinamico-forms"),value:"number"==typeof g?g:q,onChange:e=>{a({initialValue:e}),G(e)},min:q,max:O,step:$,help:(0,l.__)("Default slider position","vas-dinamico-forms")})]}),(0,c.jsxs)(r.PanelBody,{title:(0,l.__)("Appearance","vas-dinamico-forms"),initialOpen:!0,children:[(0,c.jsxs)("div",{className:"eipsi-panel-section",children:[(0,c.jsx)("h3",{style:{fontSize:"13px",fontWeight:600,marginBottom:"12px"},children:(0,l.__)("Label Appearance","vas-dinamico-forms")}),(0,c.jsx)(r.ToggleControl,{label:(0,l.__)("Show label containers","vas-dinamico-forms"),checked:!!C,onChange:e=>a({showLabelContainers:!!e}),help:(0,l.__)("Display background boxes around each label","vas-dinamico-forms")}),(0,c.jsx)(r.ToggleControl,{label:(0,l.__)("Bold labels","vas-dinamico-forms"),checked:!1!==w,onChange:e=>a({boldLabels:!!e}),help:(0,l.__)("Make label text bold","vas-dinamico-forms")}),(0,c.jsx)(r.__experimentalUnitControl,{label:(0,l.__)("Label size","vas-dinamico-forms"),value:`${y||16}px`,onChange:e=>{const i=parseInt(e,10)||16;a({labelFontSize:i})},min:12,max:36,step:1,units:[{value:"px",label:"px",default:16}],isUnitSelectTabbable:!1}),(0,c.jsx)(r.RangeControl,{label:(0,l.__)("Label alignment (0â€“100)","vas-dinamico-forms"),value:V,onChange:e=>{"number"==typeof e&&a({labelAlignmentPercent:e})},min:0,max:100,step:1,help:(0,l.__)("0 = etiquetas compactas hacia el centro, 100 = cada extremo bien marcado.","vas-dinamico-forms")})]}),(0,c.jsxs)("div",{className:"eipsi-panel-section",style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #e5e5e5"},children:[(0,c.jsx)("h3",{style:{fontSize:"13px",fontWeight:600,marginBottom:"12px"},children:(0,l.__)("Value Display","vas-dinamico-forms")}),(0,c.jsx)(r.ToggleControl,{label:(0,l.__)("Show current value","vas-dinamico-forms"),checked:J,onChange:e=>{a({showCurrentValue:!!e,showValue:!!e})},help:(0,l.__)("Display the current slider value","vas-dinamico-forms")}),(0,c.jsx)(r.ToggleControl,{label:(0,l.__)("Show value container","vas-dinamico-forms"),checked:!!B,onChange:e=>a({showValueContainer:!!e}),help:(0,l.__)("Display background box around the value number","vas-dinamico-forms")}),(0,c.jsx)(r.__experimentalUnitControl,{label:(0,l.__)("Value size","vas-dinamico-forms"),value:`${N||36}px`,onChange:e=>{const i=parseInt(e,10)||36;a({valueFontSize:i})},min:20,max:80,step:1,units:[{value:"px",label:"px",default:36}],isUnitSelectTabbable:!1}),(0,c.jsx)(r.SelectControl,{label:(0,l.__)("Value position","vas-dinamico-forms"),value:T||"above",options:[{label:(0,l.__)("Above slider","vas-dinamico-forms"),value:"above"},{label:(0,l.__)("Below slider","vas-dinamico-forms"),value:"below"}],onChange:e=>a({valuePosition:e})})]})]}),(0,c.jsx)(k,{attributes:e,setAttributes:a,clientId:i,mode:"numeric"})]}),(0,c.jsxs)("div",{...P,children:[(0,c.jsx)("label",{className:n?"required":void 0,htmlFor:A,children:I}),(0,c.jsxs)("div",{className:`vas-slider-container vas-slider-preview${C?" vas-show-label-containers":""}${B?" vas-show-value-container":""}${!1!==w?" vas-bold-labels":""}${"below"===T?" vas-value-below":""}`,"data-scale":`${q}-${O}`,style:{"--vas-label-alignment":M,"--vas-label-compactness":D,"--vas-label-size":`${y||16}px`,"--vas-value-size":`${N||36}px`},children:[(0,c.jsx)("div",{className:"vas-multi-labels","data-label-count":Z.length,children:Z.map((e,a)=>(0,c.jsx)("span",{className:"vas-multi-label",children:e},`${e}-${a}`))}),J&&(0,c.jsx)("div",{className:"vas-current-value-solo",id:Y,children:E}),(0,c.jsx)("input",{type:"range",name:F,id:A,className:"vas-slider",min:q,max:O,step:$,value:E,onChange:e=>{const a=parseFloat(e.target.value);Number.isNaN(a)||G(a)},required:n,"data-required":n?"true":"false","data-show-value":J?"true":"false","aria-valuemin":q,"aria-valuemax":O,"aria-valuenow":E,"aria-labelledby":Y})]}),R(m),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})]})},save:function({attributes:e}){const{fieldName:a,label:i,required:s,helperText:r,labels:l,minValue:t,maxValue:n,step:d,initialValue:m,showValue:p,labelAlignmentPercent:u,labelSpacing:f,labelFontSize:h,valueFontSize:g,showLabelContainers:x,showValueContainer:v,boldLabels:b,showCurrentValue:_,valuePosition:j,conditionalLogic:y}=e,N=a&&""!==a.trim()?a.trim():void 0,C={className:"form-group eipsi-field eipsi-vas-slider-field"+("below"===j?" vas-value-below":""),"data-field-name":N,"data-required":s?"true":"false","data-field-type":"vas-slider","data-value-position":j||"above"};y&&y.enabled&&y.rules&&y.rules.length>0&&(C["data-conditional-logic"]=JSON.stringify(y));const B=o.useBlockProps.save(C),w=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(N),S=d&&d>0?d:1,k="number"!=typeof t||Number.isNaN(t)?0:t,T="number"!=typeof n||Number.isNaN(n)?k+S:n,F=T>k?T:k+S,P="number"==typeof m&&!Number.isNaN(m)&&m>=k&&m<=F?m:Math.floor((k+F)/2),I=l?l.split(",").map(e=>e.trim()).filter(Boolean):[],A=I.length>0?I:[`${k}`,`${F}`],$=void 0!==_?_:!1!==p,q=$&&w?`${w}-value`:void 0;let H=50;"number"!=typeof u||Number.isNaN(u)?"number"!=typeof f||Number.isNaN(f)||(H=f):H=u;const O=Math.min(Math.max(H,0),100)/100,z=1-O;return(0,c.jsxs)("div",{...B,children:[i&&(0,c.jsx)("label",{className:s?"required":void 0,htmlFor:w,children:i}),(0,c.jsxs)("div",{className:`vas-slider-container${x?" vas-show-label-containers":""}${v?" vas-show-value-container":""}${!1!==b?" vas-bold-labels":""}${"below"===j?" vas-value-below":""}`,"data-scale":`${k}-${F}`,style:{"--vas-label-alignment":O,"--vas-label-compactness":z,"--vas-label-size":`${h||16}px`,"--vas-value-size":`${g||36}px`},children:[(0,c.jsx)("div",{className:"vas-multi-labels","data-label-count":A.length,children:A.map((e,a)=>(0,c.jsx)("span",{className:"vas-multi-label",children:e},`${e}-${a}`))}),$&&(0,c.jsx)("div",{className:"vas-current-value-solo",id:q,children:P}),(0,c.jsx)("input",{type:"range",name:N,id:w,className:"vas-slider",min:k,max:F,step:S,defaultValue:P,required:s,"data-required":s?"true":"false","data-show-value":$?"true":"false","data-touched":"false","aria-valuemin":k,"aria-valuemax":F,"aria-valuenow":P,"aria-labelledby":q})]}),D(r),(0,c.jsx)("div",{className:"form-error","aria-live":"polite"})]})}})}},i={};function s(e){var o=i[e];if(void 0!==o)return o.exports;var r=i[e]={exports:{}};return a[e](r,r.exports,s),r.exports}s.m=a,e=[],s.O=(a,i,o,r)=>{if(!i){var l=1/0;for(d=0;d<e.length;d++){for(var[i,o,r]=e[d],t=!0,n=0;n<i.length;n++)(!1&r||l>=r)&&Object.keys(s.O).every(e=>s.O[e](i[n]))?i.splice(n--,1):(t=!1,r<l&&(l=r));if(t){e.splice(d--,1);var c=o();void 0!==c&&(a=c)}}return a}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[i,o,r]},s.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return s.d(a,{a}),a},s.d=(e,a)=>{for(var i in a)s.o(a,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})},s.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={57:0,350:0};s.O.j=a=>0===e[a];var a=(a,i)=>{var o,r,[l,t,n]=i,c=0;if(l.some(a=>0!==e[a])){for(o in t)s.o(t,o)&&(s.m[o]=t[o]);if(n)var d=n(s)}for(a&&a(i);c<l.length;c++)r=l[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},i=globalThis.webpackChunkvas_dinamico_forms=globalThis.webpackChunkvas_dinamico_forms||[];i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i))})();var o=s.O(void 0,[350],()=>s(748));o=s.O(o)})();