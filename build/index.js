(()=>{"use strict";var e,a={878:(e,a,t)=>{const l=window.React,r=window.wp.blocks,i=window.wp.blockEditor,n=window.wp.components,o=window.wp.i18n,s=window.wp.serverSideRender;var m=t.n(s);(0,r.registerBlockType)("vas-dinamico/form-block",{edit:({attributes:e,setAttributes:a})=>{const{formId:t,showTitle:r}=e,s=(0,i.useBlockProps)();return(0,l.createElement)("div",{...s},(0,l.createElement)(i.InspectorControls,null,(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Form Settings","vas-dinamico-forms")},(0,l.createElement)(n.TextControl,{label:(0,o.__)("Form ID","vas-dinamico-forms"),value:t,onChange:e=>a({formId:e}),help:(0,o.__)("Enter the unique identifier for the form","vas-dinamico-forms")}),(0,l.createElement)(n.ToggleControl,{label:(0,o.__)("Show Title","vas-dinamico-forms"),checked:r,onChange:e=>a({showTitle:e})}))),t?(0,l.createElement)(m(),{block:"vas-dinamico/form-block",attributes:e}):(0,l.createElement)("div",{className:"vas-dinamico-form-placeholder"},(0,l.createElement)("div",{className:"components-placeholder"},(0,l.createElement)("div",{className:"components-placeholder__label"},(0,o.__)("VAS Dinámico Form","vas-dinamico-forms")),(0,l.createElement)("div",{className:"components-placeholder__instructions"},(0,o.__)("Please enter a Form ID in the block settings.","vas-dinamico-forms")))))},save:()=>null}),(0,r.registerBlockType)("vas-dinamico/form-container",{edit:function({attributes:e,setAttributes:a}){const{formId:t,submitButtonLabel:r,description:s,backgroundColor:m,textColor:c,borderRadius:d,padding:u}=e,p=(0,i.useBlockProps)({className:"eipsi-form-container-editor"}),f=(0,i.useInnerBlocksProps)({className:"eipsi-form-inner-blocks"},{allowedBlocks:["vas-dinamico/form-page","vas-dinamico/campo-texto","vas-dinamico/campo-textarea","vas-dinamico/campo-descripcion","vas-dinamico/campo-select","vas-dinamico/campo-radio","vas-dinamico/campo-multiple","vas-dinamico/campo-likert","vas-dinamico/vas-slider"],templateLock:!1,renderAppender:i.InnerBlocks.ButtonBlockAppender});return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.InspectorControls,null,(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Form Settings","vas-dinamico-forms"),initialOpen:!0},(0,l.createElement)(n.TextControl,{label:(0,o.__)("Form ID/Slug","vas-dinamico-forms"),value:t,onChange:e=>a({formId:e}),help:(0,o.__)("Enter a unique identifier for the form (e.g., contact-form)","vas-dinamico-forms")}),(0,l.createElement)(n.TextControl,{label:(0,o.__)("Submit Button Label","vas-dinamico-forms"),value:r,onChange:e=>a({submitButtonLabel:e})}),(0,l.createElement)(n.TextareaControl,{label:(0,o.__)("Description (Optional)","vas-dinamico-forms"),value:s,onChange:e=>a({description:e}),help:(0,o.__)("Optional description text shown above the form","vas-dinamico-forms")})),(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Style Customization","vas-dinamico-forms"),initialOpen:!1},(0,l.createElement)("div",{style:{marginBottom:"1em"}},(0,l.createElement)("label",{htmlFor:"background-color"},(0,o.__)("Background Color","vas-dinamico-forms")),(0,l.createElement)(n.ColorPalette,{id:"background-color",colors:[{name:"Dark",color:"#23210f"},{name:"White",color:"#ffffff"},{name:"Gray",color:"#f0f0f0"}],value:m,onChange:e=>a({backgroundColor:e})})),(0,l.createElement)("div",{style:{marginBottom:"1em"}},(0,l.createElement)("label",{htmlFor:"text-color"},(0,o.__)("Text Color","vas-dinamico-forms")),(0,l.createElement)(n.ColorPalette,{id:"text-color",value:c,onChange:e=>a({textColor:e})})),(0,l.createElement)(n.RangeControl,{label:(0,o.__)("Padding","vas-dinamico-forms"),value:u,onChange:e=>a({padding:e}),min:0,max:60,step:4}),(0,l.createElement)(n.RangeControl,{label:(0,o.__)("Border Radius","vas-dinamico-forms"),value:d,onChange:e=>a({borderRadius:e}),min:0,max:30,step:2}))),(0,l.createElement)("div",{...p},(0,l.createElement)("div",{className:"eipsi-form-container-preview"},!t&&(0,l.createElement)("div",{className:"eipsi-form-placeholder"},(0,l.createElement)("div",{className:"components-placeholder"},(0,l.createElement)("div",{className:"components-placeholder__label"},(0,o.__)("EIPSI Form Container","vas-dinamico-forms")),(0,l.createElement)("div",{className:"components-placeholder__instructions"},(0,o.__)("Please enter a Form ID in the block settings to get started.","vas-dinamico-forms")))),t&&(0,l.createElement)("div",{className:"eipsi-form-preview-wrapper"},(0,l.createElement)("div",{className:"form-header"},(0,l.createElement)("h3",{className:"form-title"},t.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")),s&&(0,l.createElement)("p",{className:"form-description"},s)),(0,l.createElement)("div",{...f}),(0,l.createElement)("div",{className:"form-footer"},(0,l.createElement)("button",{type:"button",className:"eipsi-submit-button",disabled:!0},r||(0,o.__)("Submit","vas-dinamico-forms")))))))},save:function({attributes:e}){const{formId:a,submitButtonLabel:t,description:r,className:n}=e,o=i.useBlockProps.save({className:"vas-dinamico-form eipsi-form "+(n||"")}),s=i.useInnerBlocksProps.save({className:"eipsi-form eipsi-form-content"});return(0,l.createElement)("div",{...o},r&&(0,l.createElement)("div",{className:"form-description"},(0,l.createElement)("p",null,r)),(0,l.createElement)("form",{className:"vas-form eipsi-form-element","data-form-id":a},(0,l.createElement)("input",{type:"hidden",name:"form_id",value:a}),(0,l.createElement)("input",{type:"hidden",name:"form_action",value:"vas_dinamico_submit_form"}),(0,l.createElement)("input",{type:"hidden",name:"eipsi_nonce",value:""}),(0,l.createElement)("input",{type:"hidden",className:"eipsi-device-placeholder",name:"device"}),(0,l.createElement)("input",{type:"hidden",className:"eipsi-browser-placeholder",name:"browser"}),(0,l.createElement)("input",{type:"hidden",className:"eipsi-os-placeholder",name:"os"}),(0,l.createElement)("input",{type:"hidden",className:"eipsi-screen-placeholder",name:"screen_width"}),(0,l.createElement)("input",{type:"hidden",className:"eipsi-start-time",name:"start_time"}),(0,l.createElement)("input",{type:"hidden",className:"eipsi-current-page",name:"current_page",value:"1"}),(0,l.createElement)("div",{...s}),(0,l.createElement)("div",{className:"form-navigation"},(0,l.createElement)("button",{type:"button",className:"eipsi-prev-button",style:{display:"none"},"data-testid":"prev-button"},"Anterior"),(0,l.createElement)("button",{type:"button",className:"eipsi-next-button","data-testid":"next-button"},"Siguiente"),(0,l.createElement)("button",{type:"submit",className:"eipsi-submit-button",style:{display:"none"},"data-testid":"submit-button"},t||"Enviar")),(0,l.createElement)("div",{className:"form-progress"},"Página ",(0,l.createElement)("span",{className:"current-page"},"1")," de"," ",(0,l.createElement)("span",{className:"total-pages"},"?"))))}});const c=window.wp.element,d=window.wp.data;(0,r.registerBlockType)("vas-dinamico/form-page",{edit:function({attributes:e,setAttributes:a,clientId:t}){const{title:r,pageIndex:s}=e,m=(0,d.useSelect)(e=>{const{getBlockRootClientId:a,getBlockOrder:l,getBlock:r}=e("core/block-editor"),i=a(t),n=((i?l(i):l())||[]).filter(e=>{const a=r(e);return"vas-dinamico/form-page"===a?.name}).indexOf(t);return-1===n?null:n+1},[t]);(0,c.useEffect)(()=>{m&&m!==s&&a({pageIndex:m})},[m,s,a]);const u=m||s||1,p=(0,i.useBlockProps)({className:"eipsi-page-editor"}),f=(0,i.useInnerBlocksProps)({className:"eipsi-page-content-editor"},{allowedBlocks:["core/paragraph","core/heading","core/html","core/spacer","core/separator","core/group","core/columns","core/column","core/list","core/list-item","core/image","core/buttons","core/button","vas-dinamico/campo-texto","vas-dinamico/campo-textarea","vas-dinamico/campo-descripcion","vas-dinamico/campo-select","vas-dinamico/campo-radio","vas-dinamico/campo-multiple","vas-dinamico/campo-likert","vas-dinamico/vas-slider"],templateLock:!1,renderAppender:void 0});return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.InspectorControls,null,(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Page Settings","vas-dinamico-forms")},(0,l.createElement)(n.TextControl,{label:(0,o.__)("Page Title (Optional)","vas-dinamico-forms"),value:r,onChange:e=>a({title:e}),help:(0,o.__)("Enter an optional title for this page (e.g., Personal Information)","vas-dinamico-forms")}),(0,l.createElement)(n.TextControl,{label:(0,o.__)("Page Number","vas-dinamico-forms"),type:"number",value:u,help:(0,o.__)("This page number updates automatically based on block order.","vas-dinamico-forms"),disabled:!0}))),(0,l.createElement)("div",{...p},(0,l.createElement)("div",{className:"eipsi-page-preview"},(0,l.createElement)("div",{className:"page-header"},(0,l.createElement)("span",{className:"page-badge"},(0,o.__)("Page","vas-dinamico-forms")," ",u),r&&(0,l.createElement)("h3",{className:"eipsi-page-title"},r),!r&&(0,l.createElement)("p",{className:"page-placeholder-text"},(0,o.__)("Add a page title in the block settings (optional)","vas-dinamico-forms"))),(0,l.createElement)("div",{...f}))))},save:function({attributes:e}){const{title:a,pageIndex:t,className:r}=e,n=i.useBlockProps.save({className:`eipsi-page ${r||""}`.trim(),"data-page":t,style:{display:1===t?void 0:"none"}}),o=i.useInnerBlocksProps.save({className:"eipsi-page-content"});return(0,l.createElement)("div",{...n},a&&(0,l.createElement)("h3",{className:"eipsi-page-title"},a),(0,l.createElement)("div",{...o}))}});const u=({attributes:e,setAttributes:a,showPlaceholder:t=!0})=>{const{fieldName:r,label:i,required:s,placeholder:m,helperText:c}=e;return(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Field Settings","vas-dinamico-forms"),initialOpen:!0},(0,l.createElement)(n.TextControl,{label:(0,o.__)("Field Name / Slug","vas-dinamico-forms"),value:r||"",onChange:e=>a({fieldName:e}),help:(0,o.__)("Used as the input name attribute (e.g., full_name)","vas-dinamico-forms")}),(0,l.createElement)(n.TextControl,{label:(0,o.__)("Label","vas-dinamico-forms"),value:i||"",onChange:e=>a({label:e})}),(0,l.createElement)(n.ToggleControl,{label:(0,o.__)("Required field","vas-dinamico-forms"),checked:!!s,onChange:e=>a({required:!!e})}),t&&(0,l.createElement)(n.TextControl,{label:(0,o.__)("Placeholder","vas-dinamico-forms"),value:m||"",onChange:e=>a({placeholder:e})}),(0,l.createElement)(n.TextareaControl,{label:(0,o.__)("Helper text","vas-dinamico-forms"),value:c||"",onChange:e=>a({helperText:e}),help:(0,o.__)("Displayed below the field to provide additional guidance.","vas-dinamico-forms")}))},p=[{label:(0,o.__)("Text","vas-dinamico-forms"),value:"text"},{label:(0,o.__)("Email","vas-dinamico-forms"),value:"email"},{label:(0,o.__)("Number","vas-dinamico-forms"),value:"number"},{label:(0,o.__)("Telephone","vas-dinamico-forms"),value:"tel"},{label:(0,o.__)("URL","vas-dinamico-forms"),value:"url"},{label:(0,o.__)("Date","vas-dinamico-forms"),value:"date"}];(0,r.registerBlockType)("vas-dinamico/campo-texto",{edit:function({attributes:e,setAttributes:a}){const{fieldName:t,label:r,required:s,placeholder:m,helperText:c,fieldType:d}=e,f=t&&""!==t.trim()?t.trim():void 0,v=(0,i.useBlockProps)({className:"form-group eipsi-field eipsi-text-field","data-field-name":f,"data-required":s?"true":"false","data-field-type":d||"text"}),g=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(f),b=r&&""!==r.trim()?r:(0,o.__)("Campo de texto","vas-dinamico-forms");return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.InspectorControls,null,(0,l.createElement)(u,{attributes:e,setAttributes:a}),(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Text Field Options","vas-dinamico-forms"),initialOpen:!1},(0,l.createElement)(n.SelectControl,{label:(0,o.__)("Input type","vas-dinamico-forms"),value:d,options:p,onChange:e=>a({fieldType:e})}))),(0,l.createElement)("div",{...v},(0,l.createElement)("label",{className:s?"required":void 0,htmlFor:g},b),(0,l.createElement)("input",{type:d||"text",name:f,id:g,placeholder:m||"",required:s,"data-required":s?"true":"false","data-field-type":d||"text",disabled:!0}),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(c),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldName:a,label:t,required:r,placeholder:n,helperText:o,fieldType:s}=e,m=a&&""!==a.trim()?a.trim():void 0,c=i.useBlockProps.save({className:"form-group eipsi-field eipsi-text-field","data-field-name":m,"data-required":r?"true":"false","data-field-type":s||"text"}),d=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(m),u=s||"text";return(0,l.createElement)("div",{...c},t&&(0,l.createElement)("label",{className:r?"required":void 0,htmlFor:d},t),(0,l.createElement)("input",{type:u,name:m,id:d,placeholder:n||"",required:r,"data-required":r?"true":"false","data-field-type":u}),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(o),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"}))}}),(0,r.registerBlockType)("vas-dinamico/campo-textarea",{edit:function({attributes:e,setAttributes:a}){const{fieldName:t,label:r,required:s,placeholder:m,helperText:c,rows:d}=e,p=t&&""!==t.trim()?t.trim():void 0,f=(0,i.useBlockProps)({className:"form-group eipsi-field eipsi-textarea-field","data-field-name":p,"data-required":s?"true":"false","data-field-type":"textarea"}),v=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(p),g=r||(0,o.__)("Campo textarea","vas-dinamico-forms"),b=Number(d)||4;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.InspectorControls,null,(0,l.createElement)(u,{attributes:e,setAttributes:a}),(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Textarea Options","vas-dinamico-forms"),initialOpen:!1},(0,l.createElement)(n.RangeControl,{label:(0,o.__)("Rows","vas-dinamico-forms"),value:b,onChange:e=>a({rows:Number(e)||4}),min:2,max:12}))),(0,l.createElement)("div",{...f},(0,l.createElement)("label",{className:s?"required":void 0,htmlFor:v},g),(0,l.createElement)("textarea",{name:p,id:v,placeholder:m||"",required:s,rows:b,"data-required":s?"true":"false","data-field-type":"textarea",disabled:!0}),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(c),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldName:a,label:t,required:r,placeholder:n,helperText:o,rows:s}=e,m=a&&""!==a.trim()?a.trim():void 0,c=i.useBlockProps.save({className:"form-group eipsi-field eipsi-textarea-field","data-field-name":m,"data-required":r?"true":"false","data-field-type":"textarea"}),d=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(m),u=Number(s)||4;return(0,l.createElement)("div",{...c},t&&(0,l.createElement)("label",{className:r?"required":void 0,htmlFor:d},t),(0,l.createElement)("textarea",{name:m,id:d,placeholder:n||"",required:r,rows:u,"data-required":r?"true":"false","data-field-type":"textarea"}),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(o),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"}))}}),(0,r.registerBlockType)("vas-dinamico/campo-descripcion",{edit:function({attributes:e,setAttributes:a}){const{fieldName:t,label:r,required:n,placeholder:s,helperText:m}=e,c=t&&""!==t.trim()?t.trim():void 0,d=(0,i.useBlockProps)({className:"form-group eipsi-field eipsi-description-field","data-field-name":c,"data-required":n?"true":"false","data-field-type":"description"}),p=r||(0,o.__)("Campo descripción","vas-dinamico-forms");return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.InspectorControls,null,(0,l.createElement)(u,{attributes:e,setAttributes:a})),(0,l.createElement)("div",{...d},p&&(0,l.createElement)("label",{className:n?"required":void 0},p),s&&(0,l.createElement)("p",{className:"description-placeholder"},s),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(m),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldName:a,label:t,required:r,placeholder:n,helperText:o}=e,s=a&&""!==a.trim()?a.trim():void 0,m=i.useBlockProps.save({className:"form-group eipsi-field eipsi-description-field","data-field-name":s,"data-required":r?"true":"false","data-field-type":"description"});return(0,l.createElement)("div",{...m},t&&(0,l.createElement)("label",{className:r?"required":void 0},t),n&&(0,l.createElement)("p",{className:"description-placeholder"},n),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(o),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"}))}});const f=({attributes:e,setAttributes:a,options:t=[],clientId:r})=>{const{conditionalLogic:i}=e,[s,m]=(0,c.useState)({}),u=function(e){return e?Array.isArray(e)?{enabled:!0,rules:e.map((e,a)=>({id:e.id||`rule-legacy-${a}`,matchValue:e.value||e.matchValue||"",action:e.action||"goToPage",targetPage:e.targetPage||null})),defaultAction:"nextPage"}:"object"==typeof e?{enabled:!1!==e.enabled,rules:(e.rules||[]).map((e,a)=>({id:e.id||`rule-${a}`,matchValue:e.value||e.matchValue||"",action:e.action||"goToPage",targetPage:e.targetPage||null})),defaultAction:e.defaultAction||"nextPage",defaultTargetPage:e.defaultTargetPage||null}:{enabled:!1,rules:[],defaultAction:"nextPage"}:{enabled:!1,rules:[],defaultAction:"nextPage"}}(i),{pages:p,hasPages:f}=(0,d.useSelect)(e=>{const{getSelectedBlock:a,getBlockParentsByBlockName:t,getBlock:l}=e("core/block-editor");try{const e=r?l(r):a();if(!e)return{pages:[],hasPages:!1};const i=t(e.clientId,"vas-dinamico/form-container");if(0===i.length)return{pages:[],hasPages:!1};const n=l(i[i.length-1]);if(!n||!n.innerBlocks)return{pages:[],hasPages:!1};const o=n.innerBlocks.filter(e=>"vas-dinamico/form-page"===e.name).map((e,a)=>({index:a+1,title:e.attributes.title||"",clientId:e.clientId}));return{pages:o,hasPages:o.length>0}}catch(e){return{pages:[],hasPages:!1}}},[r]);(0,c.useEffect)(()=>{u.enabled&&u.rules.length>0&&v(u.rules)},[u.enabled,u.rules,t,p]);const v=e=>{const a={},t=new Set;e.forEach((e,l)=>{t.has(e.matchValue)?a[l]=(0,o.__)("Este valor ya está siendo usado en otra regla","vas-dinamico-forms"):e.matchValue&&t.add(e.matchValue),e.matchValue||(a[l]=(0,o.__)("Selecciona un valor para esta regla","vas-dinamico-forms")),"goToPage"===e.action&&(!e.targetPage||e.targetPage<1)&&(a[l]=(0,o.__)("Selecciona una página válida","vas-dinamico-forms"))}),m(a)},g=(e,t,l)=>{const r=[...u.rules];r[e]={...r[e],[t]:l},a({conditionalLogic:{...u,rules:r}})},b=(e,t=null)=>{const l={...u,defaultAction:e};"goToPage"===e&&t?l.defaultTargetPage=parseInt(t):delete l.defaultTargetPage,a({conditionalLogic:l})},E=()=>{const e=[];return 0===p.length?[{label:(0,o.__)("No hay páginas disponibles","vas-dinamico-forms"),value:"",disabled:!0}]:(p.forEach(a=>{const t=a.title?`${(0,o.__)("Página","vas-dinamico-forms")} ${a.index} – ${a.title}`:`${(0,o.__)("Página","vas-dinamico-forms")} ${a.index}`;e.push({label:t,value:a.index.toString()})}),e)},h=()=>{const e=[{label:(0,o.__)("Siguiente página","vas-dinamico-forms"),value:"nextPage"},{label:(0,o.__)("Finalizar formulario","vas-dinamico-forms"),value:"submit"}];return p.length>0&&e.splice(1,0,{label:(0,o.__)("Ir a página específica…","vas-dinamico-forms"),value:"goToPage"}),e},_=t.length>0&&f;return(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Lógica Condicional","vas-dinamico-forms"),initialOpen:!1},(0,l.createElement)("div",{className:"conditional-logic-toggle-wrapper"},(0,l.createElement)(n.ToggleControl,{label:(0,o.__)("Habilitar lógica condicional","vas-dinamico-forms"),checked:u.enabled||!1,onChange:e=>{e?a({conditionalLogic:{enabled:!0,rules:[],defaultAction:"nextPage"}}):(a({conditionalLogic:null}),m({}))},help:(0,o.__)("Permite configurar el comportamiento del formulario según las respuestas del participante.","vas-dinamico-forms")})),u.enabled&&(0,l.createElement)("div",{className:"conditional-logic-panel"},!f&&(0,l.createElement)("div",{className:"conditional-logic-warning"},(0,l.createElement)("p",null,(0,o.__)("Para configurar la lógica condicional, primero debes agregar páginas al formulario.","vas-dinamico-forms"))),0===t.length&&(0,l.createElement)("div",{className:"conditional-logic-warning"},(0,l.createElement)("p",null,(0,o.__)("Para configurar la lógica condicional, primero debes agregar opciones a este campo.","vas-dinamico-forms"))),_&&0===u.rules.length&&(0,l.createElement)("div",{className:"conditional-logic-empty-state"},(0,l.createElement)(n.Dashicon,{icon:"randomize"}),(0,l.createElement)("p",null,(0,o.__)("No hay reglas configuradas. Las reglas permiten redirigir al participante a diferentes páginas según su respuesta.","vas-dinamico-forms"))),u.rules.map((e,r)=>(0,l.createElement)("div",{key:e.id||r,className:"conditional-logic-rule"},(0,l.createElement)("div",{className:"conditional-logic-rule-header"},(0,l.createElement)("h4",null,(0,o.__)("Regla","vas-dinamico-forms")," ",r+1)),(0,l.createElement)(n.SelectControl,{label:(0,o.__)("Cuando el participante seleccione","vas-dinamico-forms"),value:e.matchValue||"",options:0===t.length?[{label:(0,o.__)("No hay opciones disponibles","vas-dinamico-forms"),value:"",disabled:!0}]:[{label:(0,o.__)("Selecciona un valor…","vas-dinamico-forms"),value:""},...t.map(e=>({label:e,value:e}))],onChange:e=>g(r,"matchValue",e)}),(0,l.createElement)(n.SelectControl,{label:(0,o.__)("Entonces","vas-dinamico-forms"),value:"goToPage"===e.action?"goToPage":e.action,options:h(),onChange:e=>{"nextPage"===e?(g(r,"action","nextPage"),g(r,"targetPage",null)):"submit"===e?(g(r,"action","submit"),g(r,"targetPage",null)):"goToPage"===e&&(g(r,"action","goToPage"),g(r,"targetPage",p[0]?.index||1))}}),"goToPage"===e.action&&(0,l.createElement)(n.SelectControl,{label:(0,o.__)("Ir a la página","vas-dinamico-forms"),value:e.targetPage?e.targetPage.toString():"",options:E(),onChange:e=>g(r,"targetPage",parseInt(e))}),s[r]&&(0,l.createElement)("div",{className:"conditional-logic-validation-error"},(0,l.createElement)(n.Dashicon,{icon:"warning"}),(0,l.createElement)("span",null,s[r])),(0,l.createElement)("div",{className:"conditional-logic-rule-actions"},(0,l.createElement)(n.Button,{isDestructive:!0,isSmall:!0,onClick:()=>(e=>{const t=u.rules.filter((a,t)=>t!==e);0===t.length?(a({conditionalLogic:null}),m({})):a({conditionalLogic:{...u,rules:t}})})(r)},(0,o.__)("Eliminar regla","vas-dinamico-forms"))))),_&&u.rules.length>0&&(0,l.createElement)("div",{className:"conditional-logic-default-action"},(0,l.createElement)("h4",null,(0,o.__)("Acción predeterminada","vas-dinamico-forms")),(0,l.createElement)("p",{style:{fontSize:"12px",color:"#64748b",marginBottom:"12px"}},(0,o.__)("Define qué sucede cuando el participante selecciona un valor sin regla configurada.","vas-dinamico-forms")),(0,l.createElement)(n.SelectControl,{label:(0,o.__)("Para otros valores","vas-dinamico-forms"),value:"goToPage"===u.defaultAction?"goToPage":u.defaultAction||"nextPage",options:h(),onChange:e=>{"goToPage"===e?b(e,p[0]?.index||1):b(e)}}),"goToPage"===u.defaultAction&&(0,l.createElement)(n.SelectControl,{label:(0,o.__)("Ir a la página","vas-dinamico-forms"),value:u.defaultTargetPage?u.defaultTargetPage.toString():p[0]?.index.toString()||"1",options:E(),onChange:e=>b("goToPage",e)})),(0,l.createElement)(n.Button,{isPrimary:!0,isSmall:!0,onClick:()=>{const e={id:`rule-${Date.now()}`,matchValue:"",action:"goToPage",targetPage:p.length>0?p[0].index:1},t=[...u.rules,e];a({conditionalLogic:{...u,rules:t}})},disabled:!_,className:"conditional-logic-add-rule-button"},(0,o.__)("+ Agregar regla","vas-dinamico-forms")),_&&(0,l.createElement)("div",{className:"conditional-logic-info",style:{marginTop:"16px"}},(0,l.createElement)("p",null,(0,o.__)("Las reglas se evalúan en orden. La primera regla que coincida determinará la navegación del formulario.","vas-dinamico-forms")))))};(0,r.registerBlockType)("vas-dinamico/campo-select",{edit:function({attributes:e,setAttributes:a,clientId:t}){const{fieldName:r,label:s,required:m,placeholder:c,helperText:d,options:p,conditionalLogic:v}=e,g=r&&""!==r.trim()?r.trim():void 0,b=v&&(Array.isArray(v)?v.length>0:v.enabled&&v.rules&&v.rules.length>0),E=(0,i.useBlockProps)({className:"form-group eipsi-field eipsi-select-field","data-field-name":g,"data-required":m?"true":"false","data-field-type":"select","data-conditional-logic":b?"true":void 0}),h=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(g),_=s&&""!==s.trim()?s:(0,o.__)("Campo de selección","vas-dinamico-forms"),N=(y=p)&&""!==y.trim()?y.split(",").map(e=>e.trim()).filter(e=>""!==e):[];var y;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.InspectorControls,null,(0,l.createElement)(u,{attributes:e,setAttributes:a}),(0,l.createElement)(f,{attributes:e,setAttributes:a,options:N,clientId:t}),(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Select Options","vas-dinamico-forms"),initialOpen:!0},(0,l.createElement)(n.TextareaControl,{label:(0,o.__)("Options (comma-separated)","vas-dinamico-forms"),value:p||"",onChange:e=>a({options:e}),help:(0,o.__)("Enter options separated by commas (e.g., Option 1, Option 2, Option 3)","vas-dinamico-forms"),rows:5}))),(0,l.createElement)("div",{...E},(0,l.createElement)("label",{className:m?"required":void 0,htmlFor:h},_),(0,l.createElement)("select",{name:g,id:h,required:m,"data-required":m?"true":"false","data-field-type":"select",disabled:!0},c&&""!==c.trim()&&(0,l.createElement)("option",{value:""},c),N.length>0?N.map((e,a)=>(0,l.createElement)("option",{key:a,value:e},e)):(0,l.createElement)("option",{value:""},(0,o.__)("Add options in the sidebar","vas-dinamico-forms"))),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(d),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldName:a,label:t,required:r,placeholder:n,helperText:o,options:s,conditionalLogic:m}=e,c=a&&""!==a.trim()?a.trim():void 0,d=i.useBlockProps.save({className:"form-group eipsi-field eipsi-select-field","data-field-name":c,"data-required":r?"true":"false","data-field-type":"select","data-conditional-logic":m?JSON.stringify(m):void 0}),u=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(c),p=(f=s)&&""!==f.trim()?f.split(",").map(e=>e.trim()).filter(e=>""!==e):[];var f;return(0,l.createElement)("div",{...d},t&&(0,l.createElement)("label",{className:r?"required":void 0,htmlFor:u},t),(0,l.createElement)("select",{name:c,id:u,required:r,"data-required":r?"true":"false","data-field-type":"select"},n&&""!==n.trim()&&(0,l.createElement)("option",{value:""},n),p.map((e,a)=>(0,l.createElement)("option",{key:a,value:e},e))),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(o),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"}))}}),(0,r.registerBlockType)("vas-dinamico/campo-radio",{edit:function({attributes:e,setAttributes:a,clientId:t}){const{fieldName:r,label:s,required:m,helperText:c,options:d,conditionalLogic:p}=e,v=r&&""!==r.trim()?r.trim():void 0,g=p&&(Array.isArray(p)?p.length>0:p.enabled&&p.rules&&p.rules.length>0),b=(0,i.useBlockProps)({className:"form-group eipsi-field eipsi-radio-field","data-field-name":v,"data-required":m?"true":"false","data-field-type":"radio","data-conditional-logic":g?"true":void 0}),E=s&&""!==s.trim()?s:(0,o.__)("Campo de opciones","vas-dinamico-forms"),h=(_=d)&&""!==_.trim()?_.split(",").map(e=>e.trim()).filter(e=>""!==e):[];var _;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.InspectorControls,null,(0,l.createElement)(u,{attributes:e,setAttributes:a,showPlaceholder:!1}),(0,l.createElement)(f,{attributes:e,setAttributes:a,options:h,clientId:t}),(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Radio Options","vas-dinamico-forms"),initialOpen:!0},(0,l.createElement)(n.TextareaControl,{label:(0,o.__)("Options (comma-separated)","vas-dinamico-forms"),value:d||"",onChange:e=>a({options:e}),help:(0,o.__)("Enter options separated by commas (e.g., Option 1, Option 2, Option 3)","vas-dinamico-forms"),rows:5}))),(0,l.createElement)("div",{...b},(0,l.createElement)("label",{className:m?"required":void 0},E),(0,l.createElement)("ul",{className:"radio-list"},h.length>0?h.map((e,a)=>{const t=((e,a="")=>{if(!e||""===e.trim())return;const t=e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-");return a?`field-${t}-${a}`:`field-${t}`})(v,a.toString());return(0,l.createElement)("li",{key:a},(0,l.createElement)("input",{type:"radio",name:v,id:t,value:e,required:m,"data-required":m?"true":"false","data-field-type":"radio",disabled:!0}),(0,l.createElement)("label",{htmlFor:t},e))}):(0,l.createElement)("li",{className:"empty-state"},(0,o.__)("Add options in the sidebar","vas-dinamico-forms"))),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(c),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldName:a,label:t,required:r,helperText:n,options:o,conditionalLogic:s}=e,m=a&&""!==a.trim()?a.trim():void 0,c=i.useBlockProps.save({className:"form-group eipsi-field eipsi-radio-field","data-field-name":m,"data-required":r?"true":"false","data-field-type":"radio","data-conditional-logic":s?JSON.stringify(s):void 0}),d=(u=o)&&""!==u.trim()?u.split(",").map(e=>e.trim()).filter(e=>""!==e):[];var u;return(0,l.createElement)("div",{...c},t&&(0,l.createElement)("label",{className:r?"required":void 0},t),(0,l.createElement)("ul",{className:"radio-list"},d.map((e,a)=>{const t=((e,a="")=>{if(!e||""===e.trim())return;const t=e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-");return a?`field-${t}-${a}`:`field-${t}`})(m,a.toString());return(0,l.createElement)("li",{key:a},(0,l.createElement)("input",{type:"radio",name:m,id:t,value:e,required:r,"data-required":r?"true":"false","data-field-type":"radio"}),(0,l.createElement)("label",{htmlFor:t},e))})),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(n),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"}))}}),(0,r.registerBlockType)("vas-dinamico/campo-multiple",{edit:function({attributes:e,setAttributes:a,clientId:t}){const{fieldName:r,label:s,required:m,helperText:c,options:d,conditionalLogic:p}=e,v=r&&""!==r.trim()?r.trim():void 0,g=p&&(Array.isArray(p)?p.length>0:p.enabled&&p.rules&&p.rules.length>0),b=(0,i.useBlockProps)({className:"form-group eipsi-field eipsi-checkbox-field","data-field-name":v,"data-required":m?"true":"false","data-field-type":"checkbox","data-conditional-logic":g?"true":void 0}),E=s&&""!==s.trim()?s:(0,o.__)("Campo de selección múltiple","vas-dinamico-forms"),h=(_=d)&&""!==_.trim()?_.split(",").map(e=>e.trim()).filter(e=>""!==e):[];var _;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.InspectorControls,null,(0,l.createElement)(u,{attributes:e,setAttributes:a,showPlaceholder:!1}),(0,l.createElement)(f,{attributes:e,setAttributes:a,options:h,clientId:t}),(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Checkbox Options","vas-dinamico-forms"),initialOpen:!0},(0,l.createElement)(n.TextareaControl,{label:(0,o.__)("Options (comma-separated)","vas-dinamico-forms"),value:d||"",onChange:e=>a({options:e}),help:(0,o.__)("Enter options separated by commas (e.g., Option 1, Option 2, Option 3)","vas-dinamico-forms"),rows:5}))),(0,l.createElement)("div",{...b},(0,l.createElement)("label",{className:m?"required":void 0},E),(0,l.createElement)("ul",{className:"checkbox-list"},h.length>0?h.map((e,a)=>{const t=((e,a="")=>{if(!e||""===e.trim())return;const t=e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-");return a?`field-${t}-${a}`:`field-${t}`})(v,a.toString());return(0,l.createElement)("li",{key:a},(0,l.createElement)("input",{type:"checkbox",name:`${v}[]`,id:t,value:e,"data-required":m?"true":"false","data-field-type":"checkbox",disabled:!0}),(0,l.createElement)("label",{htmlFor:t},e))}):(0,l.createElement)("li",{className:"empty-state"},(0,o.__)("Add options in the sidebar","vas-dinamico-forms"))),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(c),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldName:a,label:t,required:r,helperText:n,options:o,conditionalLogic:s}=e,m=a&&""!==a.trim()?a.trim():void 0,c=i.useBlockProps.save({className:"form-group eipsi-field eipsi-checkbox-field","data-field-name":m,"data-required":r?"true":"false","data-field-type":"checkbox","data-conditional-logic":s?JSON.stringify(s):void 0}),d=(u=o)&&""!==u.trim()?u.split(",").map(e=>e.trim()).filter(e=>""!==e):[];var u;return(0,l.createElement)("div",{...c},t&&(0,l.createElement)("label",{className:r?"required":void 0},t),(0,l.createElement)("ul",{className:"checkbox-list"},d.map((e,a)=>{const t=((e,a="")=>{if(!e||""===e.trim())return;const t=e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-");return a?`field-${t}-${a}`:`field-${t}`})(m,a.toString());return(0,l.createElement)("li",{key:a},(0,l.createElement)("input",{type:"checkbox",name:`${m}[]`,id:t,value:e,"data-required":r?"true":"false","data-field-type":"checkbox"}),(0,l.createElement)("label",{htmlFor:t},e))})),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(n),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"}))}});const v=e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`},g=e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`};(0,r.registerBlockType)("vas-dinamico/campo-likert",{edit:function({attributes:e,setAttributes:a,clientId:t}){const{fieldKey:r,fieldName:s,label:m,required:d,helperText:u,minValue:p,maxValue:f,labels:g}=e;(0,c.useEffect)(()=>{if(!r){const e=`likert-${t.replace(/[^a-zA-Z0-9]/g,"")}`;a({fieldKey:e})}},[r,t,a]);const b=s&&""!==s.trim()?s.trim():r,E=(0,i.useBlockProps)({className:"form-group eipsi-field eipsi-likert-field","data-field-name":b,"data-required":d?"true":"false","data-field-type":"likert","data-min":p,"data-max":f}),h=m&&""!==m.trim()?m:(0,o.__)("Escala Likert","vas-dinamico-forms"),_=g&&""!==g.trim()?g.split(",").map(e=>e.trim()).filter(e=>""!==e):[],N=[];for(let e=p;e<=f;e++)N.push(e);const y=_.length>0&&_.length!==N.length;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.InspectorControls,null,(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Field Settings","vas-dinamico-forms"),initialOpen:!0},(0,l.createElement)(n.TextControl,{label:(0,o.__)("Field Name / Slug","vas-dinamico-forms"),value:s||"",onChange:e=>a({fieldName:e}),help:(0,o.__)("Used as the input name attribute (e.g., satisfaction)","vas-dinamico-forms")}),(0,l.createElement)(n.TextControl,{label:(0,o.__)("Label","vas-dinamico-forms"),value:m||"",onChange:e=>a({label:e})}),(0,l.createElement)(n.ToggleControl,{label:(0,o.__)("Required field","vas-dinamico-forms"),checked:!!d,onChange:e=>a({required:!!e})}),(0,l.createElement)(n.TextareaControl,{label:(0,o.__)("Helper text","vas-dinamico-forms"),value:u||"",onChange:e=>a({helperText:e}),help:(0,o.__)("Displayed below the field to provide additional guidance.","vas-dinamico-forms")})),(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Likert Scale Options","vas-dinamico-forms"),initialOpen:!0},(0,l.createElement)(n.RangeControl,{label:(0,o.__)("Minimum Value","vas-dinamico-forms"),value:p,onChange:e=>{e<f&&a({minValue:e})},min:0,max:10,help:(0,o.__)("The lowest value in the scale","vas-dinamico-forms")}),(0,l.createElement)(n.RangeControl,{label:(0,o.__)("Maximum Value","vas-dinamico-forms"),value:f,onChange:e=>{e>p&&a({maxValue:e})},min:1,max:10,help:(0,o.__)("The highest value in the scale","vas-dinamico-forms")}),(0,l.createElement)(n.TextareaControl,{label:(0,o.__)("Labels (comma-separated)","vas-dinamico-forms"),value:g||"",onChange:e=>a({labels:e}),help:(0,o.__)("Optional labels for each scale point. Must match the number of scale points.","vas-dinamico-forms")}),y&&(0,l.createElement)(n.Notice,{status:"warning",isDismissible:!1},(0,o.__)("You have %1$d labels but %2$d scale points. Labels will be ignored if count doesn't match.","vas-dinamico-forms").replace("%1$d",_.length).replace("%2$d",N.length)))),(0,l.createElement)("div",{...E},m&&(0,l.createElement)("label",{htmlFor:b?`${v(b)}-label`:void 0,className:d?"required":void 0},h),(0,l.createElement)("div",{className:"likert-scale likert-preview","data-scale":`${p}-${f}`},(0,l.createElement)("ul",{className:"likert-list"},N.map((e,a)=>{const t=`${v(b)}-${e}`,r=_[a]||e.toString();return(0,l.createElement)("li",{key:e,className:"likert-item"},(0,l.createElement)("input",{type:"radio",name:b,id:t,value:e,required:d,"data-required":d?"true":"false",disabled:!0}),(0,l.createElement)("label",{htmlFor:t,className:"likert-label"},r))}))),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(u),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldKey:a,fieldName:t,label:r,required:n,helperText:o,minValue:s,maxValue:m,labels:c}=e,d=t&&""!==t.trim()?t.trim():a,u=i.useBlockProps.save({className:"form-group eipsi-field eipsi-likert-field","data-field-name":d,"data-required":n?"true":"false","data-field-type":"likert","data-min":s,"data-max":m}),p=c&&""!==c.trim()?c.split(",").map(e=>e.trim()).filter(e=>""!==e):[],f=[];for(let e=s;e<=m;e++)f.push(e);return(0,l.createElement)("div",{...u},r&&(0,l.createElement)("label",{htmlFor:d?`${g(d)}-label`:void 0,className:n?"required":void 0},r),(0,l.createElement)("div",{className:"likert-scale","data-scale":`${s}-${m}`},(0,l.createElement)("ul",{className:"likert-list"},f.map((e,a)=>{const t=`${g(d)}-${e}`,r=p[a]||e.toString();return(0,l.createElement)("li",{key:e,className:"likert-item"},(0,l.createElement)("label",{htmlFor:t,className:"likert-label-wrapper"},(0,l.createElement)("input",{type:"radio",name:d,id:t,value:e,required:n,"data-required":n?"true":"false"}),(0,l.createElement)("span",{className:"likert-label-text"},r)))}))),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(o),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"}))}}),(0,r.registerBlockType)("vas-dinamico/vas-slider",{edit:function({attributes:e,setAttributes:a}){const{fieldName:t,label:r,required:s,helperText:m,leftLabel:d,rightLabel:u,labels:p,minValue:f,maxValue:v,step:g,initialValue:b,showValue:E}=e,h=t&&""!==t.trim()?t.trim():void 0,_=(0,i.useBlockProps)({className:"form-group eipsi-field eipsi-vas-slider-field","data-field-name":h,"data-required":s?"true":"false","data-field-type":"vas-slider"}),N=r&&""!==r.trim()?r:(0,o.__)("VAS Slider","vas-dinamico-forms"),y=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(h),x=b>=f&&b<=v?b:Math.floor((f+v)/2),[k,C]=(0,c.useState)(x),P=p&&""!==p.trim()?p.split(",").map(e=>e.trim()).filter(e=>""!==e):[],T=P.length>0;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.InspectorControls,null,(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Field Settings","vas-dinamico-forms"),initialOpen:!0},(0,l.createElement)(n.TextControl,{label:(0,o.__)("Field Name / Slug","vas-dinamico-forms"),value:t||"",onChange:e=>a({fieldName:e}),help:(0,o.__)("Used as the input name attribute (e.g., pain_level)","vas-dinamico-forms")}),(0,l.createElement)(n.TextControl,{label:(0,o.__)("Label","vas-dinamico-forms"),value:r||"",onChange:e=>a({label:e})}),(0,l.createElement)(n.ToggleControl,{label:(0,o.__)("Required field","vas-dinamico-forms"),checked:!!s,onChange:e=>a({required:!!e})}),(0,l.createElement)(n.TextareaControl,{label:(0,o.__)("Helper text","vas-dinamico-forms"),value:m||"",onChange:e=>a({helperText:e}),help:(0,o.__)("Displayed below the field to provide additional guidance.","vas-dinamico-forms")})),(0,l.createElement)(n.PanelBody,{title:(0,o.__)("VAS Slider Options","vas-dinamico-forms"),initialOpen:!0},(0,l.createElement)(n.TextareaControl,{label:(0,o.__)("Labels (comma-separated)","vas-dinamico-forms"),value:p||"",onChange:e=>a({labels:e}),help:(0,o.__)('Optional: Multiple labels for scale points (e.g., "Muy mal,Mal,Neutral,Bien,Muy bien")',"vas-dinamico-forms")}),(0,l.createElement)(n.TextControl,{label:(0,o.__)("Left Label","vas-dinamico-forms"),value:d||"",onChange:e=>a({leftLabel:e}),help:(0,o.__)("Label for the minimum value (used when multi-labels are not set)","vas-dinamico-forms")}),(0,l.createElement)(n.TextControl,{label:(0,o.__)("Right Label","vas-dinamico-forms"),value:u||"",onChange:e=>a({rightLabel:e}),help:(0,o.__)("Label for the maximum value (used when multi-labels are not set)","vas-dinamico-forms")}),(0,l.createElement)(n.RangeControl,{label:(0,o.__)("Minimum Value","vas-dinamico-forms"),value:f,onChange:e=>{if(a({minValue:e}),v<=e&&a({maxValue:e+1}),b<e){const t=Math.floor((e+v)/2);a({initialValue:t}),C(t)}},min:0,max:100}),(0,l.createElement)(n.RangeControl,{label:(0,o.__)("Maximum Value","vas-dinamico-forms"),value:v,onChange:e=>{if(a({maxValue:e}),f>=e&&a({minValue:e-1}),b>e){const t=Math.floor((f+e)/2);a({initialValue:t}),C(t)}},min:1,max:1e3}),(0,l.createElement)(n.RangeControl,{label:(0,o.__)("Step","vas-dinamico-forms"),value:g,onChange:e=>a({step:e}),min:.1,max:10,step:.1,help:(0,o.__)("Increment for each slider movement","vas-dinamico-forms")}),(0,l.createElement)(n.RangeControl,{label:(0,o.__)("Initial Value","vas-dinamico-forms"),value:b,onChange:e=>{a({initialValue:e}),C(e)},min:f,max:v,step:g,help:(0,o.__)("Default slider position","vas-dinamico-forms")}),(0,l.createElement)(n.ToggleControl,{label:(0,o.__)("Show current value","vas-dinamico-forms"),checked:!!E,onChange:e=>a({showValue:!!e})}))),(0,l.createElement)("div",{..._},(0,l.createElement)("label",{className:s?"required":void 0,htmlFor:y},N),(0,l.createElement)("div",{className:"vas-slider-container vas-slider-preview","data-scale":`${f}-${v}`},!T&&(0,l.createElement)("div",{className:"vas-slider-labels"},d&&(0,l.createElement)("span",{className:"vas-label-left"},d),E&&(0,l.createElement)("span",{className:"vas-current-value",id:`${y}-value`},k),u&&(0,l.createElement)("span",{className:"vas-label-right"},u)),T&&(0,l.createElement)("div",{className:"vas-multi-labels"},P.map((e,a)=>(0,l.createElement)("span",{key:a,className:"vas-multi-label"},e))),T&&E&&(0,l.createElement)("div",{className:"vas-current-value-solo",id:`${y}-value`},k),(0,l.createElement)("input",{type:"range",name:h,id:y,className:"vas-slider",min:f,max:v,step:g,value:k,onChange:e=>C(parseFloat(e.target.value)),required:s,"data-required":s?"true":"false","data-show-value":E?"true":"false","aria-valuemin":f,"aria-valuemax":v,"aria-valuenow":k,"aria-labelledby":`${y}-value`})),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(m),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"})))},save:function({attributes:e}){const{fieldName:a,label:t,required:r,helperText:n,labels:o,minValue:s,maxValue:m,step:c,initialValue:d,showValue:u}=e,p=a&&""!==a.trim()?a.trim():void 0,f=i.useBlockProps.save({className:"form-group eipsi-field eipsi-vas-slider-field","data-field-name":p,"data-required":r?"true":"false","data-field-type":"vas-slider"}),v=(e=>{if(e&&""!==e.trim())return`field-${e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-")}`})(p),g=d>=s&&d<=m?d:Math.floor((s+m)/2),b=o&&""!==o.trim()?o.split(",").map(e=>e.trim()).filter(e=>""!==e):["Nada","Leve","Moderado","Fuerte","Muy fuerte"];return(0,l.createElement)("div",{...f},t&&(0,l.createElement)("label",{className:r?"required":void 0,htmlFor:v},t),(0,l.createElement)("div",{className:"vas-section"},(0,l.createElement)("div",{className:"vas-slider-container"},b.length>0&&(0,l.createElement)("div",{className:"vas-labels"},b.map((e,a)=>(0,l.createElement)("span",{key:a,className:"vas-label"},e))),(0,l.createElement)("div",{className:"vas-slider-wrapper"},(0,l.createElement)("input",{type:"range",name:p,id:v,className:"vas-slider",min:s,max:m,step:c,defaultValue:g,required:r,"data-required":r?"true":"false","data-show-value":u?"true":"false","aria-valuemin":s,"aria-valuemax":m,"aria-valuenow":g,"aria-labelledby":`${v}-value`})),u&&(0,l.createElement)("div",{className:"vas-value-display"},(0,l.createElement)("span",{className:"vas-value-number",id:`${v}-value-display`},g)))),(e=>{if(!e||""===e.trim())return null;const a=e.split("\n");return(0,l.createElement)("p",{className:"field-helper"},a.map((e,t)=>(0,l.createElement)("span",{key:t},e,t<a.length-1&&(0,l.createElement)("br",null))))})(n),(0,l.createElement)("div",{className:"form-error","aria-live":"polite"}))}})}},t={};function l(e){var r=t[e];if(void 0!==r)return r.exports;var i=t[e]={exports:{}};return a[e](i,i.exports,l),i.exports}l.m=a,e=[],l.O=(a,t,r,i)=>{if(!t){var n=1/0;for(c=0;c<e.length;c++){for(var[t,r,i]=e[c],o=!0,s=0;s<t.length;s++)(!1&i||n>=i)&&Object.keys(l.O).every(e=>l.O[e](t[s]))?t.splice(s--,1):(o=!1,i<n&&(n=i));if(o){e.splice(c--,1);var m=r();void 0!==m&&(a=m)}}return a}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[t,r,i]},l.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return l.d(a,{a}),a},l.d=(e,a)=>{for(var t in a)l.o(a,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},l.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={57:0,350:0};l.O.j=a=>0===e[a];var a=(a,t)=>{var r,i,[n,o,s]=t,m=0;if(n.some(a=>0!==e[a])){for(r in o)l.o(o,r)&&(l.m[r]=o[r]);if(s)var c=s(l)}for(a&&a(t);m<n.length;m++)i=n[m],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return l.O(c)},t=globalThis.webpackChunkvas_dinamico_forms=globalThis.webpackChunkvas_dinamico_forms||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var r=l.O(void 0,[350],()=>l(878));r=l.O(r)})();