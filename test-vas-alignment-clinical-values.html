<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test VAS Alignment Clinical Values</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .test-case {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #ccc;
        }
        .test-case h3 {
            margin-top: 0;
        }
        .result {
            font-family: monospace;
            background: #f5f5f5;
            padding: 5px;
        }
        .pass {
            color: green;
            font-weight: bold;
        }
        .fail {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Test VAS Alignment Clinical Values</h1>
    <div id="results"></div>
    
    <script type="module">
        // Import the functions from the module
        import { calculateLabelLeftPercent } from './src/blocks/vas-slider/calculateLabelSpacing.js';

        const testCases = [
            { labels: 3, alignment: 100, expected: [5, 50, 87] },
            { labels: 3, alignment: 50, expected: [20, 50, 70] },
            { labels: 3, alignment: 25, expected: null }, // Interpolated
            { labels: 4, alignment: 100, expected: [5, 30, 70, 88] },
            { labels: 4, alignment: 50, expected: [15, 35, 65, 80] },
            { labels: 5, alignment: 100, expected: [5, 25, 50, 75, 90] },
            { labels: 5, alignment: 50, expected: [15, 28, 50, 70, 80] },
            { labels: 5, alignment: 75, expected: null }, // Interpolated
        ];

        function runTests() {
            const resultsDiv = document.getElementById('results');
            let allPassed = true;

            testCases.forEach((testCase, index) => {
                const div = document.createElement('div');
                div.className = 'test-case';
                
                const h3 = document.createElement('h3');
                h3.textContent = `Test ${index + 1}: ${testCase.labels} labels, alignment ${testCase.alignment}`;
                div.appendChild(h3);

                const calculated = [];
                for (let i = 0; i < testCase.labels; i++) {
                    calculated.push(Math.round(calculateLabelLeftPercent(i, testCase.labels, testCase.alignment)));
                }

                const resultP = document.createElement('p');
                resultP.innerHTML = `<strong>Calculated:</strong> <span class="result">[${calculated.join(', ')}]</span>`;
                div.appendChild(resultP);

                if (testCase.expected) {
                    const expectedP = document.createElement('p');
                    expectedP.innerHTML = `<strong>Expected:</strong> <span class="result">[${testCase.expected.join(', ')}]</span>`;
                    div.appendChild(expectedP);

                    const passed = JSON.stringify(calculated) === JSON.stringify(testCase.expected);
                    const statusP = document.createElement('p');
                    statusP.className = passed ? 'pass' : 'fail';
                    statusP.textContent = passed ? 'PASS ✓' : 'FAIL ✗';
                    div.appendChild(statusP);
                    
                    if (!passed) allPassed = false;
                } else {
                    const statusP = document.createElement('p');
                    statusP.textContent = 'Interpolated (no expected value)';
                    div.appendChild(statusP);
                }

                resultsDiv.appendChild(div);
            });

            const summaryDiv = document.createElement('div');
            summaryDiv.style.marginTop = '20px';
            summaryDiv.style.fontWeight = 'bold';
            summaryDiv.textContent = allPassed ? 'All tests PASSED ✓' : 'Some tests FAILED ✗';
            resultsDiv.appendChild(summaryDiv);
        }

        runTests();
    </script>
</body>
</html>