<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test: VAS Last-Child Compression Fix at Alignment 100</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 2em;
            background: #f0f0f0;
            color: #2c3e50;
        }
        
        h1 {
            color: #005a87;
            margin-bottom: 0.5em;
        }
        
        .test-container {
            background: white;
            padding: 2em;
            margin-bottom: 3em;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 90, 135, 0.1);
        }
        
        h2 {
            margin-top: 0;
            color: #005a87;
            font-size: 1.2em;
        }
        
        .status {
            display: inline-block;
            padding: 0.3em 0.8em;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.9em;
            margin-left: 1em;
        }
        
        .status.before {
            background: #ffebee;
            color: #d32f2f;
        }
        
        .status.after {
            background: #e8f5e9;
            color: #2e7d32;
        }
        
        /* VAS Slider Styles - AFTER FIX */
        .vas-slider-container {
            margin: 1.5em 0;
            padding: 2em;
            background: #f8f9fa;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
        }
        
        .vas-multi-labels {
            position: relative;
            width: 100%;
            margin-bottom: 1em;
            padding: 0;
            min-height: 4.8em;
        }
        
        .vas-multi-label {
            position: absolute;
            top: 0;
            white-space: normal;
            word-wrap: break-word;
            overflow-wrap: break-word;
            word-break: break-word;
            hyphens: none;
            max-width: 22%;
            font-weight: normal;
            font-size: 16px;
            line-height: 1.2;
            text-align: center;
            padding: 0.6em 0.5em;
            background: transparent;
            border-radius: 6px;
            border: none;
            color: #2c3e50;
            width: auto;
        }
        
        /* FIRST-CHILD */
        .vas-multi-label:first-child {
            text-align: left;
            max-width: 30%;  /* AFTER: 26% ‚Üí 30% */
        }
        
        /* LAST-CHILD */
        .vas-multi-label:last-child {
            text-align: right;
            max-width: 30%;  /* AFTER: 26% ‚Üí 30% */
        }
        
        .vas-slider {
            width: 100%;
            height: 12px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background: linear-gradient(to right, #e2e8f0 0%, #cbd5e0 50%, #e2e8f0 100%);
            border-radius: 8px;
            outline: none;
            cursor: pointer;
            border: 2px solid #cbd5e0;
        }
        
        .vas-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #005a87 0%, #003d5b 100%);
            border: 4px solid #ffffff;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
        }
        
        .vas-slider::-moz-range-thumb {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #005a87 0%, #003d5b 100%);
            border: 4px solid #ffffff;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
        }
        
        /* BEFORE (for comparison) */
        .before-fix .vas-multi-label:first-child,
        .before-fix .vas-multi-label:last-child {
            max-width: 26%;  /* OLD VALUE */
        }
        
        .info {
            background: #e3f2fd;
            padding: 1em;
            border-radius: 6px;
            margin-top: 1em;
            font-size: 0.9em;
            color: #0d47a1;
        }
        
        .info strong {
            color: #005a87;
        }
        
        code {
            background: #263238;
            color: #80cbc4;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2em;
            margin-top: 2em;
        }
        
        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <h1>üî¨ Test: VAS Last-Child Compression Fix</h1>
    <p>Objetivo: Verificar que "Muy bien" en alignment 100 se divide en DOS l√≠neas sin compresi√≥n vertical.</p>
    
    <!-- TEST 1: BEFORE (26% max-width, translateX 50%) -->
    <div class="test-container">
        <h2>
            ‚ùå BEFORE: max-width 26% + translateX(50%)
            <span class="status before">PROBLEMA</span>
        </h2>
        <div class="vas-slider-container before-fix">
            <div class="vas-multi-labels">
                <span class="vas-multi-label" style="left: 0%; transform: translateX(-100%); text-align: left;">Muy mal</span>
                <span class="vas-multi-label" style="left: 25%; transform: translateX(-50%); text-align: center;">Mal</span>
                <span class="vas-multi-label" style="left: 50%; transform: translateX(-50%); text-align: center;">M√°s o menos</span>
                <span class="vas-multi-label" style="left: 75%; transform: translateX(-50%); text-align: center;">Bien</span>
                <span class="vas-multi-label" style="left: 100%; transform: translateX(50%); text-align: right;">Muy bien</span>
            </div>
            <input type="range" class="vas-slider" min="0" max="100" value="50">
        </div>
        <div class="info">
            <strong>Problema:</strong> "Muy bien" se comprime verticalmente (M-u-y-b-i-e-n) porque:
            <ul>
                <li><code>left: 100%</code> + <code>transform: translateX(50%)</code> ‚Üí label intenta crecer HACIA LA DERECHA</li>
                <li><code>max-width: 26%</code> insuficiente ‚Üí word-wrap forzado por letra</li>
            </ul>
        </div>
    </div>
    
    <!-- TEST 2: AFTER (30% max-width, translateX 0%) -->
    <div class="test-container">
        <h2>
            ‚úÖ AFTER: max-width 30% + translateX(0%)
            <span class="status after">SOLUCI√ìN</span>
        </h2>
        <div class="vas-slider-container">
            <div class="vas-multi-labels">
                <span class="vas-multi-label" style="left: 0%; transform: translateX(-100%); text-align: left;">Muy mal</span>
                <span class="vas-multi-label" style="left: 25%; transform: translateX(-50%); text-align: center;">Mal</span>
                <span class="vas-multi-label" style="left: 50%; transform: translateX(-50%); text-align: center;">M√°s o menos</span>
                <span class="vas-multi-label" style="left: 75%; transform: translateX(-50%); text-align: center;">Bien</span>
                <span class="vas-multi-label" style="left: 100%; transform: translateX(0%); text-align: right;">Muy bien</span>
            </div>
            <input type="range" class="vas-slider" min="0" max="100" value="50">
        </div>
        <div class="info">
            <strong>Soluci√≥n:</strong> "Muy bien" se ve en DOS l√≠neas correctamente porque:
            <ul>
                <li><code>left: 100%</code> + <code>transform: translateX(0%)</code> ‚Üí label anclado en borde, crece HACIA LA IZQUIERDA</li>
                <li><code>max-width: 30%</code> ‚Üí 4% m√°s de espacio horizontal</li>
                <li><code>text-align: right</code> mantiene alineaci√≥n correcta</li>
            </ul>
        </div>
    </div>
    
    <!-- TEST 3: ALIGNMENT 81 (caso funcional) -->
    <div class="test-container">
        <h2>
            ‚úÖ Alignment 81 (CONTROL)
            <span class="status after">YA FUNCIONABA</span>
        </h2>
        <div class="vas-slider-container">
            <div class="vas-multi-labels">
                <span class="vas-multi-label" style="left: 5%; transform: translateX(-100%); text-align: left;">Muy mal</span>
                <span class="vas-multi-label" style="left: 26.25%; transform: translateX(-50%); text-align: center;">Mal</span>
                <span class="vas-multi-label" style="left: 47.5%; transform: translateX(-50%); text-align: center;">M√°s o menos</span>
                <span class="vas-multi-label" style="left: 68.75%; transform: translateX(-50%); text-align: center;">Bien</span>
                <span class="vas-multi-label" style="left: 90%; transform: translateX(0%); text-align: right;">Muy bien</span>
            </div>
            <input type="range" class="vas-slider" min="0" max="100" value="50">
        </div>
        <div class="info">
            <strong>Verificar:</strong> Este caso YA funcionaba (alignment 81). La soluci√≥n NO debe romperlo.
        </div>
    </div>
    
    <!-- TEST 4: Palabra larga en last-child -->
    <div class="test-container">
        <h2>
            ‚úÖ Last-child con palabra larga
            <span class="status after">EDGE CASE</span>
        </h2>
        <div class="vas-slider-container">
            <div class="vas-multi-labels">
                <span class="vas-multi-label" style="left: 0%; transform: translateX(-100%); text-align: left;">Nada</span>
                <span class="vas-multi-label" style="left: 33.33%; transform: translateX(-50%); text-align: center;">Moderado</span>
                <span class="vas-multi-label" style="left: 66.66%; transform: translateX(-50%); text-align: center;">Intenso</span>
                <span class="vas-multi-label" style="left: 100%; transform: translateX(0%); text-align: right;">Extremadamente intenso</span>
            </div>
            <input type="range" class="vas-slider" min="0" max="100" value="50">
        </div>
        <div class="info">
            <strong>Verificar:</strong> "Extremadamente intenso" debe dividirse por PALABRA en 2-3 l√≠neas, no por letra.
        </div>
    </div>
    
    <!-- RESUMEN T√âCNICO -->
    <div class="test-container">
        <h2>üìã Resumen T√©cnico</h2>
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #e3f2fd; text-align: left;">
                    <th style="padding: 0.5em; border: 1px solid #90caf9;">Aspecto</th>
                    <th style="padding: 0.5em; border: 1px solid #90caf9;">BEFORE (v1.2.2)</th>
                    <th style="padding: 0.5em; border: 1px solid #90caf9;">AFTER (fix)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;"><strong>Last-child max-width</strong></td>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;"><code>26%</code></td>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;"><code>30%</code> (+4%)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;"><strong>Last-child transform</strong></td>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;"><code>translateX(50%)</code></td>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;"><code>translateX(0%)</code></td>
                </tr>
                <tr>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;"><strong>Comportamiento</strong></td>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;">Se aplasta contra borde derecho</td>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;">Crece hacia la izquierda sin compresi√≥n</td>
                </tr>
                <tr>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;"><strong>Word-wrap</strong></td>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;">Por LETRA (M-u-y-b-i-e-n)</td>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;">Por PALABRA (Muy / bien)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;"><strong>Archivos modificados</strong></td>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;">-</td>
                    <td style="padding: 0.5em; border: 1px solid #e0e0e0;">
                        <code>style.scss</code><br>
                        <code>editor.scss</code><br>
                        <code>calculateLabelSpacing.js</code>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <!-- CRITERIOS DE ACEPTACI√ìN -->
    <div class="test-container">
        <h2>‚úÖ Criterios de Aceptaci√≥n</h2>
        <ul>
            <li>‚úÖ Alignment 100: "Muy bien" se ve en DOS l√≠neas (no aplastado)</li>
            <li>‚úÖ Alignment 81: funcionamiento sin cambios</li>
            <li>‚úÖ First-child: sin cambios (crece hacia la derecha)</li>
            <li>‚úÖ Labels intermedios: sin cambios</li>
            <li>‚úÖ Word-wrap: POR PALABRA, no por letra</li>
            <li>‚úÖ Editor = Frontend (WYSIWYG)</li>
            <li>‚úÖ Build: < 250 KiB, 0 errors, 0 warnings</li>
            <li>‚úÖ Lint: 0 errors, 0 warnings</li>
            <li>‚úÖ Dark Mode: compatible</li>
            <li>‚úÖ Responsive: desktop, tablet, mobile</li>
        </ul>
    </div>
</body>
</html>
