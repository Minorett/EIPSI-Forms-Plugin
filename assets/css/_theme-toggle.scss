/**
 * EIPSI Forms - Dark Mode Automatic System
 * CSS-only dark mode detection via prefers-color-scheme media query
 * 
 * PHILOSOPHY: No JavaScript needed. Respects user's OS preference automatically.
 * 
 * @package EIPSI_Forms
 * @version 4.0.0 - CSS Pure (December 2024)
 */

/* ========================================
   LIGHT MODE (DEFAULT - :root)
   ======================================== */

:root {
    /* Core Colors - Light Mode */
    --eipsi-color-primary: #3B6CAA;
    --eipsi-color-primary-hover: #004466;
    --eipsi-color-secondary: #f0f4f8;
    --eipsi-color-background: #ffffff;
    --eipsi-color-background-subtle: #f5f7fa;
    --eipsi-color-text: #1e293b;
    --eipsi-color-text-muted: #64748b;

    /* Input Colors */
    --eipsi-color-input-bg: #ffffff;
    --eipsi-color-input-text: #1e293b;
    --eipsi-color-input-border: #cbd5e1;
    --eipsi-color-input-border-focus: #3B6CAA;
    --eipsi-color-input-error-bg: #fef2f2;
    --eipsi-color-input-icon: #3B6CAA;

    /* Button Colors */
    --eipsi-color-button-bg: #3B6CAA;
    --eipsi-color-button-text: #ffffff;
    --eipsi-color-button-hover-bg: #004466;

    /* Semantic Colors */
    --eipsi-color-error: #dc2626;
    --eipsi-color-success: #059669;
    --eipsi-color-warning: #d97706;

    /* Border Colors */
    --eipsi-color-border: #e2e8f0;
    --eipsi-color-border-dark: #cbd5e1;

    /* Shadows */
    --eipsi-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
    --eipsi-shadow-md: 0 4px 12px rgba(0, 0, 0, 0.12);
    --eipsi-shadow-lg: 0 8px 25px rgba(0, 0, 0, 0.15);
    --eipsi-shadow-focus: 0 0 0 3px rgba(59, 108, 170, 0.2);
    --eipsi-shadow-error: 0 0 0 3px rgba(220, 38, 38, 0.2);

    /* Cards & Surfaces */
    --eipsi-color-card-bg: #ffffff;
    --eipsi-color-card-bg-hover: #f9fafb;
    --eipsi-color-card-border: #e5e7eb;
    --eipsi-color-checked-bg: rgba(59, 108, 170, 0.08);
    --eipsi-color-checked-shadow: rgba(59, 108, 170, 0.15);

    /* Success Message */
    --eipsi-color-success-dark: #047857;
    --eipsi-color-success-text: #ffffff;
    --eipsi-color-success-overlay: rgba(5, 150, 105, 0.1);
    --eipsi-color-success-subtitle: rgba(5, 150, 105, 0.9);
    --eipsi-color-success-note: rgba(5, 150, 105, 0.8);
    --eipsi-color-success-shadow: rgba(0, 0, 0, 0.1);

    /* Error Message */
    --eipsi-color-error-text: #ffffff;
    --eipsi-color-error-border-strong: rgba(220, 38, 38, 0.3);

    /* Progress Bar */
    --eipsi-color-progress-bg: #f3f4f6;
    --eipsi-color-progress-border: #d1d5db;
    --eipsi-color-progress-fill: #3B6CAA;
    --eipsi-color-progress-text: #1f2937;
    --eipsi-color-progress-text-highlight: #3B6CAA;

    /* VAS Slider - CRITICAL */
    --eipsi-color-vas-container-bg: #ffffff;
    --eipsi-color-vas-container-bg-hover: #f5f7fa;
    --eipsi-color-vas-container-border: #e5e7eb;
    --eipsi-color-vas-slider-track: #d1d5db;
    --eipsi-color-vas-slider-track-filled: #3B6CAA;
    --eipsi-color-vas-slider-thumb: #3B6CAA;
    --eipsi-color-vas-slider-thumb-hover: #004466;
    --eipsi-color-vas-label-text: #1e293b;
    --eipsi-color-vas-label-bg: transparent;
    --eipsi-color-vas-value-text: #3B6CAA;
    --eipsi-color-vas-value-bg: #f0f4f8;

    /* Transitions */
    --eipsi-transition-duration: 0.3s;
    --eipsi-transition-timing: ease;
}

/* ========================================
   DARK MODE (@media prefers-color-scheme)
   ======================================== */

@media (prefers-color-scheme: dark) {
    .vas-dinamico-form,
    .eipsi-form {
        /* Core Colors - Dark Mode */
        --eipsi-color-primary: #60a5fa;
        --eipsi-color-primary-hover: #3b82f6;
        --eipsi-color-secondary: #1e3a8a;
        --eipsi-color-background: #0f172a;
        --eipsi-color-background-subtle: #1e293b;
        --eipsi-color-text: #e2e8f0;
        --eipsi-color-text-muted: #94a3b8;

        /* Input Colors */
        --eipsi-color-input-bg: #1e293b;
        --eipsi-color-input-text: #e2e8f0;
        --eipsi-color-input-border: #475569;
        --eipsi-color-input-border-focus: #60a5fa;
        --eipsi-color-input-error-bg: #2d1f1f;
        --eipsi-color-input-icon: #60a5fa;

        /* Button Colors */
        --eipsi-color-button-bg: #3b82f6;
        --eipsi-color-button-text: #ffffff;
        --eipsi-color-button-hover-bg: #2563eb;

        /* Semantic Colors */
        --eipsi-color-error: #fca5a5;
        --eipsi-color-success: #86efac;
        --eipsi-color-warning: #fcd34d;

        /* Border Colors */
        --eipsi-color-border: #334155;
        --eipsi-color-border-dark: #475569;

        /* Shadows (darker for dark mode) */
        --eipsi-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
        --eipsi-shadow-md: 0 4px 12px rgba(0, 0, 0, 0.5);
        --eipsi-shadow-lg: 0 8px 25px rgba(0, 0, 0, 0.6);
        --eipsi-shadow-focus: 0 0 0 3px rgba(96, 165, 250, 0.3);
        --eipsi-shadow-error: 0 0 0 3px rgba(252, 165, 165, 0.3);

        /* Cards & Surfaces */
        --eipsi-color-card-bg: #1e293b;
        --eipsi-color-card-bg-hover: #334155;
        --eipsi-color-card-border: #475569;
        --eipsi-color-checked-bg: rgba(96, 165, 250, 0.15);
        --eipsi-color-checked-shadow: rgba(96, 165, 250, 0.25);

        /* Success Message */
        --eipsi-color-success-dark: #059669;
        --eipsi-color-success-text: #ffffff;
        --eipsi-color-success-overlay: rgba(255, 255, 255, 0.1);
        --eipsi-color-success-subtitle: rgba(255, 255, 255, 0.95);
        --eipsi-color-success-note: rgba(255, 255, 255, 0.85);
        --eipsi-color-success-shadow: rgba(0, 0, 0, 0.3);

        /* Error Message */
        --eipsi-color-error-text: #ffffff;
        --eipsi-color-error-border-strong: rgba(255, 255, 255, 0.3);

        /* Progress Bar */
        --eipsi-color-progress-bg: #1e293b;
        --eipsi-color-progress-border: #475569;
        --eipsi-color-progress-fill: #60a5fa;
        --eipsi-color-progress-text: #e2e8f0;
        --eipsi-color-progress-text-highlight: #60a5fa;

        /* VAS Slider - CRITICAL */
        --eipsi-color-vas-container-bg: #1e293b;
        --eipsi-color-vas-container-bg-hover: #334155;
        --eipsi-color-vas-container-border: #475569;
        --eipsi-color-vas-slider-track: #334155;
        --eipsi-color-vas-slider-track-filled: #60a5fa;
        --eipsi-color-vas-slider-thumb: #60a5fa;
        --eipsi-color-vas-slider-thumb-hover: #3b82f6;
        --eipsi-color-vas-label-text: #e2e8f0;
        --eipsi-color-vas-label-bg: transparent;
        --eipsi-color-vas-value-text: #60a5fa;
        --eipsi-color-vas-value-bg: rgba(96, 165, 250, 0.1);
    }

    /* ========================================
       PRESET-SPECIFIC DARK MODE VARIANTS
       ======================================== */

    /* Clinical Blue - Dark */
    .vas-dinamico-form[data-preset="Clinical Blue"] {
        --eipsi-color-primary: #60a5fa;
        --eipsi-color-primary-hover: #3b82f6;
    }

    /* Minimal White - Dark (grayscale) */
    .vas-dinamico-form[data-preset="Minimal White"] {
        --eipsi-color-primary: #9ca3af;
        --eipsi-color-primary-hover: #6b7280;
    }

    /* Warm Neutral - Dark */
    .vas-dinamico-form[data-preset="Warm Neutral"] {
        --eipsi-color-primary: #d4b896;
        --eipsi-color-primary-hover: #c19968;
    }

    /* Serene Teal - Dark */
    .vas-dinamico-form[data-preset="Serene Teal"] {
        --eipsi-color-primary: #5eead4;
        --eipsi-color-primary-hover: #2dd4bf;
    }
}

/* ========================================
   ACCESSIBILITY & MOTION PREFERENCES
   ======================================== */

/**
 * Respect prefers-reduced-motion for users with motion sensitivity
 */
@media (prefers-reduced-motion: reduce) {
    .vas-dinamico-form,
    .eipsi-form {
        --eipsi-transition-duration: 0s;
    }
}

/**
 * Enhanced contrast for users with contrast preferences
 */
@media (prefers-contrast: high) {
    .vas-dinamico-form,
    .eipsi-form {
        --eipsi-color-border: #1e293b;
        --eipsi-color-text-muted: #475569;
    }

    @media (prefers-color-scheme: dark) {
        .vas-dinamico-form,
        .eipsi-form {
            --eipsi-color-border: #f1f5f9;
            --eipsi-color-text-muted: #cbd5e1;
        }
    }
}

/* ========================================
   PRINT STYLES
   ======================================== */

@media print {
    .vas-dinamico-form,
    .eipsi-form {
        background-color: #ffffff;
        color: #000000;
    }
}
